<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Koordinator v1.6: æ”¯æŒ AI/ML åœºæ™¯çš„å¼‚æ„èµ„æºè°ƒåº¦èƒ½åŠ› | Koordinator</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://koordinator.sh/zh-Hans/blog/release-v1.6.0"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Koordinator v1.6: æ”¯æŒ AI/ML åœºæ™¯çš„å¼‚æ„èµ„æºè°ƒåº¦èƒ½åŠ› | Koordinator"><meta data-rh="true" name="description" content="èƒŒæ™¯"><meta data-rh="true" property="og:description" content="èƒŒæ™¯"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-02-24T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/ZiMengSheng,https://github.com/saintube,https://github.com/songtao98"><meta data-rh="true" property="article:tag" content="release"><link data-rh="true" rel="icon" href="/zh-Hans/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://koordinator.sh/zh-Hans/blog/release-v1.6.0"><link data-rh="true" rel="alternate" href="https://koordinator.sh/blog/release-v1.6.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://koordinator.sh/zh-Hans/blog/release-v1.6.0" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://koordinator.sh/blog/release-v1.6.0" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKASWWQYOP-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh-Hans/blog/rss.xml" title="Koordinator RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-Hans/blog/atom.xml" title="Koordinator Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Koordinator" href="/zh-Hans/opensearch.xml"><link rel="stylesheet" href="/zh-Hans/assets/css/styles.d55f2266.css">
<link rel="preload" href="/zh-Hans/assets/js/runtime~main.8fd6342c.js" as="script">
<link rel="preload" href="/zh-Hans/assets/js/main.b7c3fb77.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">â­ï¸ If you like Koordinator, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/koordinator-sh/koordinator">GitHub</a>! â­ï¸</div><button type="button" aria-label="å…³é—­" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-Hans/"><div class="navbar__logo"><img src="/zh-Hans/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-Hans/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Koordinator</b></a><a class="navbar__item navbar__link" href="/zh-Hans/docs">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-Hans/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh-Hans/docs/">v1.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-Hans/docs/next/">v1.7 ğŸš§</a></li><li><a class="dropdown__link" href="/zh-Hans/docs/">v1.6</a></li><li><a class="dropdown__link" href="/zh-Hans/docs/v1.5/">v1.5</a></li><li><a class="dropdown__link" href="/zh-Hans/docs/v1.4/">v1.4</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ç®€ä½“ä¸­æ–‡</a><ul class="dropdown__menu"><li><a href="/blog/release-v1.6.0" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh-Hans/blog/release-v1.6.0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_pO2u margin-bottom--md">æ‰€æœ‰æ–‡ç« </div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/zh-Hans/blog/release-v1.6.0">Koordinator v1.6: æ”¯æŒ AI/ML åœºæ™¯çš„å¼‚æ„èµ„æºè°ƒåº¦èƒ½åŠ›</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.5.0">Koordinator v1.5: æŒç»­ä¼˜åŒ–ï¼Œè¿›å…¥ CNCF Sandbox</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.4.0">Koordinator v1.4: æ›´å¤šçš„è®¡ç®—è´Ÿè½½ç±»å‹å’Œæ›´çµæ´»çš„èµ„æºç®¡ç†æœºåˆ¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.3.0">Koordinator v1.3: å¢å¼ºèµ„æºé¢„ç•™ï¼Œæ”¯æŒ NRIï¼Œæä¾›èŠ‚ç‚¹ç”»åƒçš„ Mid èµ„æºè¶…å–</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.2.0">Koordinator v1.2: æ”¯æŒèŠ‚ç‚¹èµ„æºé¢„ç•™ï¼Œå…¼å®¹ç¤¾åŒºé‡è°ƒåº¦ç­–ç•¥</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/anolis-CPU-Co-location">é¾™èœ¥ plugsched ç¥å™¨åŠ©åŠ› Koordinator äº‘åŸç”Ÿå•æœºæ··éƒ¨â€”â€” å†…æ ¸ CPU QoS æ­ç§˜</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.1.0">Koordinator v1.1: è®©è°ƒåº¦æ„ŸçŸ¥è´Ÿè½½ä¸å¹²æ‰°æ£€æµ‹é‡‡é›†</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v1.0.0">Koordinator v1.0: æ­£å¼å‘å¸ƒ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.7.0">Koordinator v0.7: ä¸ºä»»åŠ¡è°ƒåº¦é¢†åŸŸæ³¨å…¥æ–°æ´»åŠ›</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.6.0">Koordinator v0.6: Complete fine-grained CPU orchestration, Resource Reservation and Descheduling</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.5.0">Koordinator v0.5: Now With Node Resource Topology And More</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.4.0">What&#x27;s New in Koordinator v0.4.0?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.3.0">What&#x27;s New in Koordinator v0.3.0?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.2.0">Koordinator v0.2.0 - Enhanced node-side scheduling capabilities</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-Hans/blog/release-v0.1.0">Koordinator v0.1.0 - QoS based scheduling system</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Koordinator v1.6: æ”¯æŒ AI/ML åœºæ™¯çš„å¼‚æ„èµ„æºè°ƒåº¦èƒ½åŠ›</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-02-24T00:00:00.000Z" itemprop="datePublished">2025å¹´2æœˆ24æ—¥</time> Â· <!-- -->34 åˆ†é’Ÿé˜…è¯»</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ZiMengSheng" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ZiMengSheng.png" alt="Jianyu Wang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ZiMengSheng" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jianyu Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator member</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/saintube" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/saintube.png" alt="Rougang Han"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/saintube" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Rougang Han</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator member</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/songtao98" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/songtao98.png" alt="Tao Song"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/songtao98" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Tao Song</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator member</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>éšç€ DeepSeek ç­‰å¤§æ¨¡å‹çš„ç«çˆ†ï¼ŒAI å’Œé«˜æ€§èƒ½è®¡ç®—é¢†åŸŸå¯¹å¼‚æ„è®¾å¤‡èµ„æºè°ƒåº¦çš„éœ€æ±‚è¿…é€Ÿå¢é•¿ï¼Œæ— è®ºæ˜¯ GPUã€NPU è¿˜æ˜¯ RDMA ç­‰è®¾å¤‡ã€‚å¦‚ä½•é«˜æ•ˆç®¡ç†å’Œè°ƒåº¦è¿™äº›èµ„æºæˆä¸ºäº†è¡Œä¸šå…³æ³¨çš„æ ¸å¿ƒé—®é¢˜ã€‚åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼ŒKoordinator ç§¯æå“åº”ç¤¾åŒºè¯‰æ±‚ï¼ŒæŒç»­æ·±è€•å¼‚æ„è®¾å¤‡è°ƒåº¦èƒ½åŠ›ï¼Œå¹¶åœ¨æœ€æ–°çš„ v1.6 ç‰ˆæœ¬ä¸­æ¨å‡ºäº†ä¸€ç³»åˆ—åˆ›æ–°åŠŸèƒ½ï¼Œå¸®åŠ©å®¢æˆ·è§£å†³å¼‚æ„èµ„æºè°ƒåº¦éš¾é¢˜ã€‚</p><p>åœ¨ v1.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å®Œå–„äº†è®¾å¤‡æ‹“æ‰‘è°ƒåº¦èƒ½åŠ›ï¼Œæ”¯æŒæ„ŸçŸ¥æ›´å¤šæœºå‹çš„ GPU æ‹“æ‰‘ç»“æ„ï¼Œæ˜¾è‘—åŠ é€Ÿ AI åº”ç”¨å†…çš„ GPU äº’è”æ€§èƒ½ã€‚ä¸å¼€æºé¡¹ç›® HAMi åˆä½œï¼Œæ¨å‡ºäº†ç«¯åˆ°ç«¯çš„ GPU &amp; RDMA è”åˆåˆ†é…èƒ½åŠ›ä»¥åŠ GPU å¼ºéš”ç¦»èƒ½åŠ›ï¼Œæœ‰æ•ˆæå‡äº†å…¸å‹ AI è®­ç»ƒä»»åŠ¡çš„è·¨æœºäº’è”æ•ˆç‡å’Œæ¨ç†ä»»åŠ¡çš„éƒ¨ç½²å¯†åº¦ï¼Œä»è€Œæ›´å¥½åœ°ä¿éšœåº”ç”¨æ€§èƒ½å¹¶æé«˜é›†ç¾¤èµ„æºåˆ©ç”¨ç‡ã€‚åŒæ—¶ï¼Œå¢å¼ºäº† Kubernetes ç¤¾åŒºçš„èµ„æºæ’ä»¶ï¼Œä½¿å…¶å¯ä»¥å¯¹ä¸åŒèµ„æºé…ç½®ä¸åŒçš„èŠ‚ç‚¹æ‰“åˆ†ç­–ç•¥ï¼Œè¯¥åŠŸèƒ½åœ¨ GPU ä»»åŠ¡å’Œ CPU ä»»åŠ¡æ··éƒ¨åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­æ—¶èƒ½æœ‰æ•ˆé™ä½ GPU ç¢ç‰‡ç‡ã€‚</p><p>è‡ª 2022 å¹´ 4 æœˆæ­£å¼å¼€æºä»¥æ¥ï¼ŒKoordinator å·²è¿­ä»£å‘å¸ƒäº† 14 ä¸ªå¤§ç‰ˆæœ¬ï¼Œå¸å¼•äº†æ¥è‡ªé˜¿é‡Œå·´å·´ã€èš‚èšç§‘æŠ€ã€Intelã€å°çº¢ä¹¦ã€å°ç±³ã€çˆ±å¥‡è‰ºã€360ã€æœ‰èµç­‰ä¼—å¤šä¼ä¸šçš„ä¼˜ç§€å·¥ç¨‹å¸ˆå‚ä¸è´¡çŒ®ã€‚ä»–ä»¬å¸¦æ¥äº†ä¸°å¯Œçš„æƒ³æ³•ã€ä»£ç å’Œå®é™…åº”ç”¨åœºæ™¯ï¼Œæå¤§åœ°æ¨åŠ¨äº†é¡¹ç›®çš„å‘å±•ã€‚ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ v1.6.0 ç‰ˆæœ¬ä¸­ï¼Œå…±æœ‰ 10 ä½æ–°åŠ å…¥çš„å¼€å‘è€…ç§¯æå‚ä¸åˆ° Koordinator ç¤¾åŒºçš„å»ºè®¾ä¸­ï¼Œä»–ä»¬æ˜¯ @LY-todayã€@AdrianMachaoã€@TaoYang526ã€@dongjiang1989ã€@chengjoeyã€@JBininã€@clay-wangzhiã€@ferris-cxã€@nce3xin å’Œ @lijunxin559ã€‚æ„Ÿè°¢ä»–ä»¬çš„è´¡çŒ®ï¼Œä¹Ÿæ„Ÿè°¢æ‰€æœ‰ç¤¾åŒºæˆå‘˜çš„æŒç»­æŠ•å…¥å’Œæ”¯æŒï¼</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¸å¿ƒäº®ç‚¹åŠŸèƒ½">æ ¸å¿ƒäº®ç‚¹åŠŸèƒ½<a href="#æ ¸å¿ƒäº®ç‚¹åŠŸèƒ½" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1gpu-æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦åŠ é€Ÿ-ai-åº”ç”¨å†…çš„-gpu-äº’è”">1ã€GPU æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ï¼šåŠ é€Ÿ AI åº”ç”¨å†…çš„ GPU äº’è”<a href="#1gpu-æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦åŠ é€Ÿ-ai-åº”ç”¨å†…çš„-gpu-äº’è”" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>éšç€æ·±åº¦å­¦ä¹ å’Œé«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰ç­‰é¢†åŸŸçš„å¿«é€Ÿå‘å±•ï¼ŒGPU æˆä¸ºè®¸å¤šè®¡ç®—å¯†é›†å‹å·¥ä½œè´Ÿè½½çš„æ ¸å¿ƒèµ„æºã€‚åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒGPU çš„é«˜æ•ˆåˆ©ç”¨å¯¹äºæå‡åº”ç”¨æ€§èƒ½è‡³å…³é‡è¦ã€‚ç„¶è€Œï¼ŒGPU èµ„æºçš„æ€§èƒ½è¡¨ç°å¹¶ä¸å‡è¡¡ï¼Œå—åˆ°ç¡¬ä»¶æ‹“æ‰‘ç»“æ„å’Œèµ„æºé…ç½®çš„å½±å“ã€‚ä¾‹å¦‚</p><ol><li>åœ¨å¤š NUMA èŠ‚ç‚¹çš„ç³»ç»Ÿä¸­ï¼ŒGPUã€CPU å’Œå†…å­˜ä¹‹é—´çš„ç‰©ç†è¿æ¥å¯èƒ½ä¼šå½±å“æ•°æ®ä¼ è¾“é€Ÿåº¦å’Œè®¡ç®—æ•ˆç‡ã€‚</li><li>å¯¹äº NVIDIA çš„ L20ã€L40S ç­‰å¡å‹ï¼ŒGPU ä¹‹é—´çš„é€šä¿¡æ•ˆç‡å–å†³äºå®ƒä»¬æ˜¯å¦å±äºåŒä¸€ä¸ª PCIE æˆ–è€…åŒä¸€ä¸ª NUMANodeã€‚</li><li>å¯¹äºåä¸ºçš„æ™Ÿè…¾ NPU ä»¥åŠè™šæ‹ŸåŒ–ç¯å¢ƒä¸­é‡‡ç”¨ SharedNVSwitch æ¨¡å¼çš„ NVIDIA Hç³»åˆ—æœºå™¨ï¼ŒGPU çš„åˆ†é…éœ€è¦éµå®ˆä¸€äº›é¢„å®šä¹‰çš„ Partition è§„åˆ™ã€‚</li></ol><p><img loading="lazy" alt="image" src="/zh-Hans/assets/images/device_topology-97ee3391d3ee1b4b235c279b501dfdc9.png" width="938" height="575" class="img_ev3q"></p><p>Koordinator é’ˆå¯¹ä¸Šè¿°è®¾å¤‡åœºæ™¯ï¼Œæä¾›äº†ä¸°å¯Œçš„è®¾å¤‡æ‹“æ‰‘è°ƒåº¦ API æ¥æ»¡è¶³ Pod å¯¹äº GPU æ‹“æ‰‘çš„è¯‰æ±‚ã€‚ä¸‹é¢æ˜¯è¿™äº› API çš„ä½¿ç”¨ä¸¾ä¾‹ï¼š</p><ol><li>GPUã€CPUã€å†…å­˜ç­‰åˆ†é…åœ¨åŒä¸€ä¸ª NUMA Node<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/numa-topology-spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;numaTopologyPolicy&quot;:&quot;Restricted&quot;, &quot;singleNUMANodeExclusive&quot;:&quot;Preferred&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 500Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 500Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>GPU åˆ†é…åœ¨åŒä¸€ä¸ª PCIE<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/device-allocate-hint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;gpu&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;requiredTopologyScope&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PCIe&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>GPU åˆ†é…åœ¨åŒä¸€ä¸ª NUMA Node<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/device-allocate-hint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;gpu&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;requiredTopologyScope&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NUMANode&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>GPU éœ€æŒ‰ç…§é¢„å®šä¹‰çš„ Partition åˆ†é…</li></ol><p>é€šå¸¸ï¼ŒGPU é¢„å®šä¹‰ Partition è§„åˆ™ç”±ç‰¹å®šçš„ GPU å‹å·æˆ–ç³»ç»Ÿé…ç½®å†³å®šï¼Œä¹Ÿå¯èƒ½å—åˆ°å…·ä½“èŠ‚ç‚¹ä¸Šçš„ GPU é…ç½®çš„å½±å“ã€‚è°ƒåº¦å™¨æ— æ³•æ´æ‚‰ç¡¬ä»¶å‹å·æˆ– GPU ç±»å‹çš„å…·ä½“ä¿¡æ¯ï¼›ç›¸åï¼Œå®ƒä¾é èŠ‚ç‚¹çº§åˆ«çš„ç»„ä»¶å°†è¿™äº›é¢„å®šä¹‰è§„åˆ™ä¸ŠæŠ¥ç»™è®¾å¤‡è‡ªå®šä¹‰èµ„æº (CR) æ¥çŸ¥æ™“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/gpu-partitions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;1&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;NVLINK&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  # Which GPUs are included</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  &quot;minors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                      0</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  # GPU Interconnect Type</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  &quot;gpuLinkType&quot;: &quot;NVLink&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  # Here we take the bottleneck bandwidth between GPUs in the Ring algorithm. BusBandwidth can be referenced from https://github.com/NVIDIA/nccl-tests/blob/master/doc/PERFORMANCE.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  &quot;ringBusBandwidth&quot;: 400Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  # Indicate the overall allocation quality for the node after the partition has been assigned away.</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  &quot;allocationScore&quot;: &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;2&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;4&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;8&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æŒ‡ç¤º Partition è§„åˆ™æ˜¯å¦å¿…é¡»éµå®ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">node.koordinator.sh/gpu-partition-policy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Honor&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“åŒæ—¶æœ‰å¤šä¸ªå¯é€‰çš„ Partition æ–¹æ¡ˆæ—¶ï¼ŒKoordinator å…è®¸ç”¨æˆ·å†³å®šæ˜¯å¦æŒ‰ç…§æœ€ä¼˜ Partition åˆ†é…:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/gpu-partition-spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        # BestEffort|Restricted</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;allocatePolicy&quot;: &quot;Restricted&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç”¨æˆ·ä¸éœ€è¦æŒ‰ç…§æœ€ä¼˜ Partition åˆ†é…æ—¶ï¼Œè°ƒåº¦å™¨å°†ä¼šæŒ‰ç…§å°½å¯èƒ½ Binpack çš„æ–¹å¼åˆ†é…ã€‚
æƒ³è¦äº†è§£å…³äº GPU æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚è€ƒå¦‚ä¸‹è®¾è®¡æ–‡æ¡£ï¼š</p><ul><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20230415-numa-topology-scheduling.md" target="_blank" rel="noopener noreferrer">NUMA Topology Scheduling</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20230803-device-allocate-hint-apis.md" target="_blank" rel="noopener noreferrer">Device Allocate Hint API</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20241008-gpu-partition-api.md" target="_blank" rel="noopener noreferrer">GPU Partition APIs</a></li></ul><p>ç”±è¡·æ„Ÿè°¢ç¤¾åŒºå¼€å‘è€… @eahydra å¯¹è¯¥ç‰¹æ€§çš„è´¡çŒ®ï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2ç«¯åˆ°ç«¯-gdr-æ”¯æŒæå‡è·¨æœºä»»åŠ¡çš„äº’è”æ€§èƒ½">2ã€ç«¯åˆ°ç«¯ GDR æ”¯æŒï¼šæå‡è·¨æœºä»»åŠ¡çš„äº’è”æ€§èƒ½<a href="#2ç«¯åˆ°ç«¯-gdr-æ”¯æŒæå‡è·¨æœºä»»åŠ¡çš„äº’è”æ€§èƒ½" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="image" src="/zh-Hans/assets/images/gdr-6856416194117f2b55c389428b8bf5fe.webp" width="1650" height="928" class="img_ev3q">
åœ¨ AI æ¨¡å‹è®­ç»ƒåœºæ™¯ä¸­ï¼ŒGPU ä¹‹é—´éœ€è¦è¿›è¡Œé¢‘ç¹çš„é›†åˆé€šä¿¡ï¼Œä»¥åŒæ­¥è®­ç»ƒè¿‡ç¨‹è¿­ä»£æ›´æ–°çš„æƒé‡ã€‚GDR å…¨ç§°å«åš GPUDirect RDMAï¼Œå…¶ç›®çš„æ˜¯è§£å†³å¤šæœº GPU è®¾å¤‡ä¹‹é—´äº¤æ¢æ•°æ®çš„æ•ˆç‡é—®é¢˜ã€‚é€šè¿‡ GDR æŠ€æœ¯å¤šæœºä¹‹é—´ GPU äº¤æ¢æ•°æ®å¯ä»¥ä¸ç»è¿‡ CPU å’Œå†…å­˜ï¼Œå¤§å¹…èŠ‚çœ CPU/Memory å¼€é”€åŒæ—¶é™ä½å»¶æ—¶ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼ŒKoordinator v1.6.0 ç‰ˆæœ¬ä¸­è®¾è®¡å®ç°äº† GPU/RDMA è®¾å¤‡è”åˆè°ƒåº¦ç‰¹æ€§ï¼Œæ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="image" src="/zh-Hans/assets/images/gpu-rdma-joint-allocation-cf89f80793e0755b8761bee882121ddb.jpg" width="3348" height="1671" class="img_ev3q"></p><ol><li>Koordlet æ£€æµ‹èŠ‚ç‚¹ä¸Šçš„ GPU å’Œ RDMA è®¾å¤‡ï¼Œå¹¶å°†ç›¸å…³ä¿¡æ¯ä¸ŠæŠ¥ç»™ Device CRã€‚</li><li>Koord-Manager ä»è®¾å¤‡ CR åŒæ­¥èµ„æºåˆ° node.status.allocatableã€‚</li><li>Koord-Scheduler æ ¹æ®è®¾å¤‡æ‹“æ‰‘ä¸º Pod åˆ†é… GPU å’Œ RDMAï¼Œå¹¶å°†åˆ†é…ç»“æœæ³¨è§£åˆ° Pods ä¸Šã€‚</li><li>Multus-CNI è®¿é—® Koordlet PodResources Proxy ä»¥è·å–åˆ†é…ç»™ Pods çš„ RDMA è®¾å¤‡ï¼Œå¹¶å°†ç›¸åº”çš„ NIC é™„åŠ åˆ° Pods çš„ç½‘ç»œå‘½åç©ºé—´ä¸­ã€‚</li><li>Koordlet æä¾› NRI æ’ä»¶ï¼Œå°†è®¾å¤‡æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚</li></ol><p>ç”±äºæ¶‰åŠåˆ°ä¼—å¤šç»„ä»¶å’Œå¤æ‚çš„ç¯å¢ƒï¼ŒKoordinator v1.6.0 æä¾›äº†<a href="https://koordinator.sh/docs/next/best-practices/gpu-and-rdma-joint-allocation/" target="_blank" rel="noopener noreferrer">æœ€ä½³å®è·µ</a>æ¥å±•ç¤ºå¦‚ä½•ä¸€æ­¥æ­¥éƒ¨ç½² Koordinatorã€Multus-CNI å’Œ SRIOV-CNIã€‚åœ¨éƒ¨ç½²å¥½ç›¸å…³ç»„ä»¶ä¹‹åï¼Œç”¨æˆ·å¯ä»¥ç®€å•é‡‡ç”¨å¦‚ä¸‹çš„ Pod åè®®æ¥è¯·æ±‚è°ƒåº¦å™¨ä¸ºå®ƒç”³è¯·çš„ GPU å’Œ RDMA è¿›è¡Œè”åˆåˆ†é…ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">vf01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubeflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/device-joint-allocate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;deviceTypes&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;gpu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;rdma&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/device-allocate-hint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">&quot;rdma&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">&quot;vfSelector&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> //apply VF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">vf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/rdma</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/rdma</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æƒ³è¦æ›´è¿›ä¸€æ­¥åœ°é‡‡ç”¨ Koordinator ç«¯åˆ°ç«¯åœ°æµ‹è¯• GDR ä»»åŠ¡ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒ<a href="https://koordinator.sh/docs/next/best-practices/gpu-and-rdma-joint-allocation/" target="_blank" rel="noopener noreferrer">æœ€ä½³å®è·µ</a>ä¸­çš„æ ·ä¾‹ä¸€æ­¥æ­¥è¿›è¡Œï¼Œåœ¨æ­¤ä¹Ÿç”±è¡·æ„Ÿè°¢ç¤¾åŒºå¼€å‘è€… @ferris-cx å¯¹è¯¥ç‰¹æ€§çš„è´¡çŒ®ï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3gpu-å…±äº«å¼ºéš”ç¦»æé«˜-ai-æ¨ç†ä»»åŠ¡çš„èµ„æºåˆ©ç”¨ç‡">3ã€GPU å…±äº«å¼ºéš”ç¦»ï¼šæé«˜ AI æ¨ç†ä»»åŠ¡çš„èµ„æºåˆ©ç”¨ç‡<a href="#3gpu-å…±äº«å¼ºéš”ç¦»æé«˜-ai-æ¨ç†ä»»åŠ¡çš„èµ„æºåˆ©ç”¨ç‡" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ AI åº”ç”¨ä¸­ï¼ŒGPU æ˜¯å¤§æ¨¡å‹è®­ç»ƒå’Œæ¨ç†ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒè®¾å¤‡ï¼Œèƒ½å¤Ÿä¸ºè®¡ç®—å¯†é›†å‹ä»»åŠ¡æä¾›å¼ºå¤§çš„ç®—åŠ›æ”¯æŒã€‚ç„¶è€Œï¼Œè¿™ç§å¼ºå¤§çš„ç®—åŠ›å¾€å¾€ä¼´éšç€é«˜æ˜‚çš„æˆæœ¬ã€‚åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šä¸€äº›å°æ¨¡å‹æˆ–è½»é‡çº§æ¨ç†ä»»åŠ¡ä»…éœ€å ç”¨ GPU çš„ä¸€å°éƒ¨åˆ†èµ„æºï¼ˆä¾‹å¦‚ 20% çš„ç®—åŠ›æˆ– GPU å†…å­˜ï¼‰ï¼Œä½†ä¸ºäº†è¿è¡Œè¿™äº›ä»»åŠ¡ï¼Œå´ä¸å¾—ä¸ç‹¬å ä¸€å¼ é«˜æ€§èƒ½ GPU å¡ã€‚è¿™ç§èµ„æºä½¿ç”¨æ–¹å¼ä¸ä»…æµªè´¹äº†å®è´µçš„ GPU ç®—åŠ›ï¼Œè¿˜æ˜¾è‘—å¢åŠ äº†ä¼ä¸šçš„æˆæœ¬ã€‚</p><p>è¿™ç§æƒ…å†µåœ¨ä»¥ä¸‹åœºæ™¯ä¸­å°¤ä¸ºå¸¸è§ï¼š</p><ol><li><strong>åœ¨çº¿æ¨ç†æœåŠ¡</strong>ï¼šè®¸å¤šåœ¨çº¿æ¨ç†ä»»åŠ¡çš„è®¡ç®—éœ€æ±‚è¾ƒä½ï¼Œä½†å¯¹å»¶è¿Ÿè¦æ±‚è¾ƒé«˜ï¼Œé€šå¸¸éœ€è¦éƒ¨ç½²åœ¨é«˜æ€§èƒ½ GPU ä¸Šä»¥æ»¡è¶³å®æ—¶æ€§éœ€æ±‚ã€‚</li><li><strong>å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒ</strong>ï¼šå¼€å‘è€…åœ¨è°ƒè¯•æ¨¡å‹æ—¶ï¼Œå¾€å¾€åªéœ€ä½¿ç”¨å°‘é‡ GPU èµ„æºï¼Œä½†ä¼ ç»Ÿè°ƒåº¦æ–¹å¼ä¼šå¯¼è‡´èµ„æºåˆ©ç”¨ç‡ä½ä¸‹ã€‚</li><li><strong>å¤šç§Ÿæˆ·å…±äº«é›†ç¾¤</strong>ï¼šåœ¨å¤šç”¨æˆ·æˆ–å¤šå›¢é˜Ÿå…±äº«çš„ GPU é›†ç¾¤ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡ç‹¬å  GPU ä¼šå¯¼è‡´èµ„æºåˆ†é…ä¸å‡ï¼Œéš¾ä»¥å……åˆ†åˆ©ç”¨ç¡¬ä»¶èƒ½åŠ›ã€‚</li></ol><p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒKoordinator ç»“åˆ HAMi ä¸ºç”¨æˆ·æä¾›äº† GPU å…±äº«éš”ç¦»çš„èƒ½åŠ›ï¼Œå…è®¸å¤šä¸ª Pod å…±äº«åŒä¸€å¼  GPU å¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸ä»…å¯ä»¥æ˜¾è‘—æé«˜ GPU çš„èµ„æºåˆ©ç”¨ç‡ï¼Œè¿˜èƒ½é™ä½ä¼ä¸šæˆæœ¬ï¼ŒåŒæ—¶æ»¡è¶³ä¸åŒä»»åŠ¡å¯¹èµ„æºçš„çµæ´»éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ Koordinator çš„ GPU å…±äº«æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥ç²¾ç¡®åˆ†é… GPU æ ¸å¿ƒæ•°æˆ–æ˜¾å­˜æ¯”ä¾‹ï¼Œç¡®ä¿æ¯ä¸ªä»»åŠ¡éƒ½èƒ½è·å¾—æ‰€éœ€çš„èµ„æºï¼ŒåŒæ—¶é¿å…ç›¸äº’å¹²æ‰°ã€‚</p><p><img loading="lazy" alt="image" src="/zh-Hans/assets/images/gpushare_gpubinpack-0ae1662ad8128f6092b49131859dda4b.webp" width="1650" height="663" class="img_ev3q"></p><p>HAMi æ˜¯ CNCF Sandbox é¡¹ç›®ï¼Œæ—¨åœ¨ä¸º Kubernetes æä¾›ä¸€ä¸ªè®¾å¤‡ç®¡ç†ä¸­é—´ä»¶ã€‚HAMi-Core æ˜¯å®ƒçš„æ ¸å¿ƒæ¨¡å—ï¼Œé€šè¿‡åŠ«æŒ CUDA-Runtimeï¼ˆlibcudart.soï¼‰å’Œ CUDA-Driverï¼ˆlibcuda.soï¼‰ä¹‹é—´çš„ API è°ƒç”¨æä¾› GPU å…±äº«éš”ç¦»èƒ½åŠ›ã€‚åœ¨ v1.6.0 ç‰ˆæœ¬ä¸­ï¼ŒKoordinator åˆ©ç”¨ HAMi-Core çš„ GPU éš”ç¦»åŠŸèƒ½ï¼Œæä¾›ç«¯åˆ°ç«¯çš„ GPU å…±äº«è§£å†³æ–¹æ¡ˆã€‚</p><p>å¤§å®¶å¯ä»¥é€šè¿‡ä¸‹é¢çš„ YAML æ–‡ä»¶éƒ¨ç½² DaemonSet ç›´æ¥åœ¨å¯¹åº”èŠ‚ç‚¹ä¸Šå®‰è£… HAMi-coreã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DaemonSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hami</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">distribute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">koord-app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hami</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">distribute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koord-app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hami</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">distribute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">affinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">nodeAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">requiredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nodeSelectorTerms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gpu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cp -f /k8s-vgpu/lib/nvidia/libvgpu.so /usl/local/vgpu &amp;&amp; sleep 3600000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker.m.daocloud.io/projecthami/hami</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v2.4.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 256Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /usl/local/vgpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vgpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /tmp/vgpulock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vgpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /usl/local/vgpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DirectoryOrCreate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vgpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># https://github.com/Project-HAMi/HAMi/issues/696</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /tmp/vgpulock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DirectoryOrCreate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vgpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Koordinator è°ƒåº¦å™¨çš„ GPU Binpack èƒ½åŠ›æ˜¯é»˜è®¤å¼€å¯çŠ¶æ€ï¼Œåœ¨å®‰è£…å¥½ Koordinator å’Œ HAMi-Core ä¹‹åï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ç”³è¯· GPU å…±äº«å¡å¹¶å¯ç”¨ HAMi-Core éš”ç¦»ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-isolation-provider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hami</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-shared</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-shared</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…³äºåœ¨ Koordinator å¯ç”¨ HAMi GPU å…±äº«éš”ç¦»èƒ½åŠ›çš„ä½¿ç”¨æŒ‡å¯¼ï¼Œè¯·å‚è€ƒï¼š</p><ul><li><a href="https://koordinator.sh/docs/next/user-manuals/device-scheduling-gpu-share-with-hami/" target="_blank" rel="noopener noreferrer">Device Scheduling - GPU Share With HAMi</a></li></ul><p>ç”±è¡·æ„Ÿè°¢ HAMi ç¤¾åŒºåŒå­¦ @wawa0210 å¯¹è¯¥ç‰¹æ€§çš„æ”¯æŒï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4å·®å¼‚åŒ–-gpu-è°ƒåº¦ç­–ç•¥æœ‰æ•ˆé™ä½-gpu-ç¢ç‰‡ç‡">4ã€å·®å¼‚åŒ– GPU è°ƒåº¦ç­–ç•¥ï¼šæœ‰æ•ˆé™ä½ GPU ç¢ç‰‡ç‡<a href="#4å·®å¼‚åŒ–-gpu-è°ƒåº¦ç­–ç•¥æœ‰æ•ˆé™ä½-gpu-ç¢ç‰‡ç‡" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ç°ä»£ Kubernetes é›†ç¾¤ä¸­ï¼Œå¤šç§ç±»å‹èµ„æºï¼ˆå¦‚ CPUã€å†…å­˜ã€GPU ç­‰ï¼‰é€šå¸¸åœ¨ä¸€ä¸ªç»Ÿä¸€çš„å¹³å°ä¸Šè¿›è¡Œç®¡ç†ã€‚ç„¶è€Œï¼Œä¸åŒç±»å‹èµ„æºçš„ä½¿ç”¨æ¨¡å¼å’Œéœ€æ±‚å¾€å¾€å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œè¿™å¯¼è‡´äº†å¯¹èµ„æºå †å ï¼ˆPackingï¼‰å’Œæ‰“æ•£ï¼ˆSpreadingï¼‰çš„ä¸åŒç­–ç•¥éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š</p><ul><li><strong>GPU èµ„æº</strong>ï¼šåœ¨ AI æ¨¡å‹è®­ç»ƒæˆ–æ¨ç†ä»»åŠ¡ä¸­ï¼Œä¸ºäº†æœ€å¤§åŒ– GPU çš„åˆ©ç”¨ç‡å¹¶å‡å°‘ç¢ç‰‡åŒ–ï¼Œç”¨æˆ·é€šå¸¸å¸Œæœ›å°† GPU ä»»åŠ¡ä¼˜å…ˆè°ƒåº¦åˆ°å·²ç»åˆ†é…äº† GPU çš„èŠ‚ç‚¹ä¸Šï¼ˆå³â€œå †å â€ç­–ç•¥ï¼‰ã€‚è¿™ç§ç­–ç•¥å¯ä»¥é¿å…å›  GPU åˆ†å¸ƒè¿‡äºåˆ†æ•£è€Œå¯¼è‡´èµ„æºæµªè´¹ã€‚</li><li><strong>CPU å’Œå†…å­˜èµ„æº</strong>ï¼šç›¸æ¯”ä¹‹ä¸‹ï¼ŒCPU å’Œå†…å­˜èµ„æºçš„éœ€æ±‚æ›´å¤šæ ·åŒ–ã€‚å¯¹äºä¸€äº›åœ¨çº¿æœåŠ¡æˆ–æ‰¹å¤„ç†ä»»åŠ¡ï¼Œç”¨æˆ·æ›´å€¾å‘äºå°†ä»»åŠ¡åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼ˆå³â€œæ‰“æ•£â€ç­–ç•¥ï¼‰ï¼Œä»¥é¿å…å•ä¸ªèŠ‚ç‚¹ä¸Šçš„èµ„æºçƒ­ç‚¹é—®é¢˜ï¼Œä»è€Œæé«˜æ•´ä½“é›†ç¾¤çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</li></ul><p>æ­¤å¤–ï¼Œåœ¨æ··åˆå·¥ä½œè´Ÿè½½åœºæ™¯ä¸­ï¼Œä¸åŒä»»åŠ¡å¯¹èµ„æºçš„éœ€æ±‚ä¹Ÿä¼šç›¸äº’å½±å“ã€‚ä¾‹å¦‚ï¼š</p><ul><li>åœ¨ä¸€ä¸ªåŒæ—¶è¿è¡Œ GPU è®­ç»ƒä»»åŠ¡å’Œæ™®é€š CPU å¯†é›†å‹ä»»åŠ¡çš„é›†ç¾¤ä¸­ï¼Œå¦‚æœ CPU å¯†é›†å‹ä»»åŠ¡è¢«è°ƒåº¦åˆ° GPU èŠ‚ç‚¹ä¸Šå¹¶æ¶ˆè€—äº†å¤§é‡ CPU å’Œå†…å­˜èµ„æºï¼Œå¯èƒ½ä¼šå¯¼è‡´åç»­çš„ GPU ä»»åŠ¡å› é CPU èµ„æºä¸è¶³è€Œæ— æ³•å¯åŠ¨ï¼Œæœ€ç»ˆå¤„äº Pending çŠ¶æ€ã€‚</li><li>åœ¨å¤šç§Ÿæˆ·ç¯å¢ƒä¸­ï¼ŒæŸäº›ç”¨æˆ·å¯èƒ½åªç”³è¯· CPU å’Œå†…å­˜èµ„æºï¼Œè€Œå¦ä¸€äº›ç”¨æˆ·åˆ™éœ€è¦ GPU èµ„æºã€‚å¦‚æœè°ƒåº¦å™¨ä¸èƒ½åŒºåˆ†è¿™äº›éœ€æ±‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºäº‰ç”¨å’Œä¸å…¬å¹³çš„èµ„æºåˆ†é…ã€‚</li></ul><p><img loading="lazy" alt="image" src="/zh-Hans/assets/images/gpubinpack-9c1da8580381eb1df412a2560ae7c833.webp" width="1650" height="793" class="img_ev3q"></p><p>Kubernetes åŸç”Ÿçš„ NodeResourcesFit æ’ä»¶ç›®å‰å¯¹ä¸åŒèµ„æºåªæ”¯æŒé…ç½®åŒæ ·çš„æ‰“åˆ†ç­–ç•¥ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">pluginConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFitArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">scoringStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LeastAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nvidia.com/gpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½†åœ¨ç”Ÿäº§å®è·µä¸­ï¼Œæœ‰äº›åœºæ™¯å¹¶ä¸é€‚ç”¨è¿™ç§è®¾è®¡ã€‚ä¾‹å¦‚ï¼šåœ¨ AI åœºæ™¯ä¸­ï¼Œç”³è¯· GPU çš„ä¸šåŠ¡å¸Œæœ›ä¼˜å…ˆå ç”¨æ•´ä¸ª GPU æœºå™¨ï¼Œé˜²æ­¢ GPU ç¢ç‰‡åŒ–ï¼›ç”³è¯· CPU&amp;MEM çš„ä¸šåŠ¡å¸Œæœ›ä¼˜å…ˆ Spreadï¼Œä»¥é™ä½ CPU çƒ­ç‚¹ã€‚Koordinator åœ¨ v1.6.0 ç‰ˆæœ¬ä¸­å¼•å…¥äº† NodeResourceFitPlus æ’ä»¶ä»¥æ”¯æŒä¸ºä¸åŒèµ„æºé…ç½®å·®å¼‚åŒ–çš„æ‰“åˆ†ç­–ç•¥ï¼Œç”¨æˆ·åœ¨å®‰è£… Koordinator è°ƒåº¦å™¨æ—¶å¯é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">pluginConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFitPlusArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">nvidia.com/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MostAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LeastAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LeastAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFitPlus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">score</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFitPlus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦å¤–ï¼Œç”³è¯· CPU&amp;MEM çš„ä¸šåŠ¡ä¼šå¸Œæœ›ä¼˜å…ˆåˆ†æ•£åˆ°é GPU æœºå™¨ï¼Œé˜²æ­¢ GPU æœºå™¨ä¸Š CPU&amp;MEM æ¶ˆè€—è¿‡å¤§ï¼Œå¯¼è‡´çœŸæ­£çš„ç”³è¯· GPU ä»»åŠ¡å› é GPU èµ„æºä¸è¶³è€Œå¤„äº Pending çŠ¶æ€ã€‚Koordinator åœ¨ v1.6.0 å½“ä¸­å¼•å…¥äº† ScarceResourceAvoidance æ’ä»¶ä»¥æ”¯æŒè¯¥éœ€æ±‚ï¼Œç”¨æˆ·å¯é…ç½®è°ƒåº¦å™¨å¦‚ä¸‹ï¼Œè¡¨ç¤º nvidia.com/gpu æ˜¯ç¨€ç¼ºèµ„æºï¼Œå½“ Pod æ²¡æœ‰ç”³è¯·è¯¥ç¨€ç¼ºèµ„æºæ—¶å°½é‡é¿å…è°ƒåº¦åˆ°ä¸Šé¢ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">pluginConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ScarceResourceAvoidanceArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nvidia.com/gpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ScarceResourceAvoidance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">score</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeResourcesFitPlus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ScarceResourceAvoidance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">disabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…³äº GPU èµ„æºå·®å¼‚åŒ–è°ƒåº¦ç­–ç•¥çš„è¯¦ç»†è®¾è®¡å’Œä½¿ç”¨æŒ‡å¯¼ï¼Œè¯·å‚è€ƒï¼š</p><ul><li><a href="https://koordinator.sh/docs/next/designs/node-resource-fit-plus-scoring/" target="_blank" rel="noopener noreferrer">è®¾è®¡æ–‡æ¡£</a></li><li><a href="http://koordinator.sh/docs/next/user-manuals/node-resource-fit-plus-scoring" target="_blank" rel="noopener noreferrer">ç”¨æˆ·æ‰‹å†Œ</a></li></ul><p>ç”±è¡·æ„Ÿè°¢ç¤¾åŒºå¼€å‘è€… @LY-today å¯¹è¯¥ç‰¹æ€§çš„è´¡çŒ®ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5ç²¾ç»†åŒ–èµ„æºé¢„ç•™æ»¡è¶³-ai-ä»»åŠ¡çš„é«˜æ•ˆè¿è¡Œéœ€æ±‚">5ã€ç²¾ç»†åŒ–èµ„æºé¢„ç•™ï¼šæ»¡è¶³ AI ä»»åŠ¡çš„é«˜æ•ˆè¿è¡Œéœ€æ±‚<a href="#5ç²¾ç»†åŒ–èµ„æºé¢„ç•™æ»¡è¶³-ai-ä»»åŠ¡çš„é«˜æ•ˆè¿è¡Œéœ€æ±‚" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¼‚æ„èµ„æºçš„é«˜æ•ˆåˆ©ç”¨å¾€å¾€ä¾èµ–äºä¸å…¶ç´§å¯†è€¦åˆçš„ CPU å’Œ NUMA èµ„æºçš„ç²¾ç¡®å¯¹é½ã€‚ä¾‹å¦‚ï¼š</p><ul><li><strong>GPU åŠ é€Ÿä»»åŠ¡</strong>ï¼šåœ¨å¤š NUMA èŠ‚ç‚¹çš„æœåŠ¡å™¨ä¸­ï¼Œå¦‚æœ GPU ä¸ CPU æˆ–å†…å­˜ä¹‹é—´çš„ç‰©ç†è¿æ¥è·¨è¶Šäº† NUMA è¾¹ç•Œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¼ è¾“å»¶è¿Ÿå¢åŠ ï¼Œä»è€Œæ˜¾è‘—é™ä½ä»»åŠ¡æ€§èƒ½ã€‚å› æ­¤ï¼Œè¿™ç±»ä»»åŠ¡é€šå¸¸è¦æ±‚ GPUã€CPU å’Œå†…å­˜åˆ†é…åœ¨åŒä¸€ NUMA èŠ‚ç‚¹ä¸Šã€‚</li><li><strong>AI æ¨ç†æœåŠ¡</strong>ï¼šåœ¨çº¿æ¨ç†ä»»åŠ¡å¯¹å»¶è¿Ÿéå¸¸æ•æ„Ÿï¼Œéœ€è¦ç¡®ä¿ GPU å’Œ CPU çš„èµ„æºåˆ†é…å°½å¯èƒ½é è¿‘ï¼Œä»¥å‡å°‘è·¨ NUMA èŠ‚ç‚¹çš„é€šä¿¡å¼€é”€ã€‚</li><li><strong>ç§‘å­¦è®¡ç®—ä»»åŠ¡</strong>ï¼šä¸€äº›é«˜æ€§èƒ½è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚åˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿæˆ–å¤©æ°”é¢„æµ‹ï¼‰éœ€è¦é«˜å¸¦å®½ã€ä½å»¶è¿Ÿçš„å†…å­˜è®¿é—®ï¼Œå› æ­¤å¿…é¡»ä¸¥æ ¼å¯¹é½ CPU æ ¸å¿ƒå’Œæœ¬åœ°å†…å­˜ã€‚</li></ul><p>è¿™äº›éœ€æ±‚ä¸ä»…é€‚ç”¨äºä»»åŠ¡è°ƒåº¦ï¼Œä¹Ÿå»¶ä¼¸åˆ°äº†èµ„æºé¢„ç•™åœºæ™¯ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œèµ„æºé¢„ç•™æ˜¯ä¸€ç§é‡è¦çš„æœºåˆ¶ï¼Œç”¨äºä¸ºå…³é”®ä»»åŠ¡æå‰é”å®šèµ„æºï¼Œç¡®ä¿å…¶åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹èƒ½å¤Ÿé¡ºåˆ©è¿è¡Œã€‚ç„¶è€Œï¼Œåœ¨å¼‚æ„èµ„æºåœºæ™¯ä¸‹ï¼Œç®€å•çš„èµ„æºé¢„ç•™æœºåˆ¶å¾€å¾€æ— æ³•æ»¡è¶³ç²¾ç»†åŒ–çš„èµ„æºç¼–æ’éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š</p><ul><li>æŸäº›ä»»åŠ¡å¯èƒ½éœ€è¦é¢„ç•™ç‰¹å®š NUMA èŠ‚ç‚¹ä¸Šçš„ CPU å’Œ GPU èµ„æºï¼Œä»¥ä¿è¯ä»»åŠ¡å¯åŠ¨åèƒ½å¤Ÿè·å¾—æœ€ä½³æ€§èƒ½ã€‚</li><li>åœ¨å¤šç§Ÿæˆ·é›†ç¾¤ä¸­ï¼Œä¸åŒç”¨æˆ·å¯èƒ½éœ€è¦é¢„ç•™ä¸åŒç±»å‹çš„èµ„æºç»„åˆï¼ˆå¦‚ GPU + CPU + å†…å­˜ï¼‰ï¼Œå¹¶ä¸”å¸Œæœ›è¿™äº›èµ„æºèƒ½å¤Ÿä¸¥æ ¼å¯¹é½ã€‚</li><li>å½“é¢„ç•™èµ„æºæœªè¢«å®Œå…¨ä½¿ç”¨æ—¶ï¼Œå¦‚ä½•çµæ´»åœ°å°†å‰©ä½™èµ„æºåˆ†é…ç»™å…¶ä»–ä»»åŠ¡ï¼ŒåŒæ—¶é¿å…å½±å“é¢„ç•™ä»»åŠ¡çš„èµ„æºä¿éšœï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦æŒ‘æˆ˜ã€‚</li></ul><p>ä¸ºäº†åº”å¯¹è¿™äº›å¤æ‚çš„åœºæ™¯ï¼ŒKoordinator åœ¨ v1.6 ç‰ˆæœ¬ä¸­å¯¹èµ„æºé¢„ç•™åŠŸèƒ½è¿›è¡Œäº†å…¨é¢å¢å¼ºï¼Œæä¾›äº†æ›´ç²¾ç»†åŒ–å’Œçµæ´»çš„èµ„æºç¼–æ’èƒ½åŠ›ã€‚å…·ä½“åŒ…æ‹¬ä»¥ä¸‹æ”¹è¿›ï¼š</p><ol><li>æ”¯æŒç²¾ç»†åŒ– CPUã€GPU èµ„æºçš„é¢„ç•™å’ŒæŠ¢å ã€‚</li><li>æ”¯æŒ Pod å¯¹é¢„ç•™èµ„æºé‡çš„ç²¾ç¡®åŒ¹é…ã€‚</li><li>èµ„æºé¢„ç•™äº²å’Œæ€§æ”¯æŒæŒ‡å®šé¢„ç•™åç§°å’Œæ±¡ç‚¹å®¹å¿å±æ€§ã€‚</li><li>èµ„æºé¢„ç•™æ”¯æŒ Pods æ•°é™åˆ¶ã€‚</li><li>æ”¯æŒèµ„æºé¢„ç•™æŠ¢å ä½ä¼˜å…ˆçº§ Podã€‚</li></ol><p>æ’ä»¶æ‰©å±•æ¥å£å˜åŠ¨ï¼š</p><ol><li>é¢„ç•™èµ„æºæ ¡éªŒæ¥å£ ReservationFilterPlugin ä» PreScore é˜¶æ®µå‰ç½®åˆ° Filter é˜¶æ®µä»¥ç¡®ä¿è¿‡æ»¤ç»“æœæ›´å‡†ç¡®ã€‚</li><li>é¢„ç•™èµ„æºè´¦æœ¬å½’è¿˜æ¥å£ ReservationRestorePlugin åºŸå¼ƒäº†ä¸éœ€è¦çš„æ–¹æ³•ä»¥æå‡è°ƒåº¦æ•ˆç‡ã€‚</li></ol><p>ä»¥ä¸‹æ˜¯æ–°åŠŸèƒ½çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p><ol><li>é¢„ç•™èµ„æºé‡ç²¾ç¡®åŒ¹é…ï¼ˆExact-Match Reservationï¼‰
æŒ‡å®š Pod ç²¾ç¡®åŒ¹é…é¢„ç•™èµ„æºé‡ï¼Œå¯ä»¥ç”¨äºç¼©å°ä¸€ç»„ Pod å’Œä¸€ç»„é¢„ç•™èµ„æºçš„åŒ¹é…å…³ç³»ï¼Œè®©é¢„ç•™èµ„æºçš„åˆ†é…æ›´å¯æ§ã€‚</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šPodç²¾ç¡®åŒ¹é…é¢„ç•™çš„èµ„æºç±»åˆ«ï¼ŒPodåªèƒ½åŒ¹é…åœ¨è¿™äº›èµ„æºç±»åˆ«ä¸‹é¢„ç•™èµ„æºé‡å’ŒPodè§„æ ¼å®Œå…¨ç›¸ç­‰çš„Reservationå¯¹è±¡ï¼›æ¯”å¦‚æŒ‡å®š&quot;cpu&quot;,&quot;memory&quot;,&quot;nvidia.com/gpu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/exact-match-reservation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;resourceNames&quot;:{&quot;cpu&quot;,&quot;memory&quot;,&quot;nvidia.com/gpu&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å¿½ç•¥èµ„æºé¢„ç•™ï¼ˆreservation-ignoredï¼‰
æŒ‡å®š Pod å¿½ç•¥èµ„æºé¢„ç•™ï¼Œå¯ä»¥è®© Pod å¡«å……å·²é¢„ç•™ä½†æœªåˆ†é…çš„èŠ‚ç‚¹ç©ºé—²èµ„æºï¼Œé…åˆæŠ¢å ä½¿ç”¨å¯ä»¥æ›´å‡å°‘èµ„æºç¢ç‰‡ã€‚</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šPodçš„è°ƒåº¦å¯ä»¥å¿½ç•¥æ‰èµ„æºé¢„ç•™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/reservation-ignored</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>æŒ‡å®šèµ„æºé¢„ç•™åç§°çš„äº²å’Œæ€§ï¼ˆReservationAffinityï¼‰</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šPodåŒ¹é…çš„èµ„æºé¢„ç•™åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/reservation-affinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;name&quot;:&quot;test-reservation&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>æŒ‡å®šèµ„æºé¢„ç•™çš„æ±¡ç‚¹å’Œå®¹å¿</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Reservation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">reservation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šReservationçš„Taintsï¼Œå…¶é¢„ç•™èµ„æºåªèƒ½åˆ†é…ç»™å®¹å¿è¯¥æ±¡ç‚¹çš„Pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">taints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">taint</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">taint</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šPodå¯¹èµ„æºé¢„ç•™çš„æ±¡ç‚¹å®¹å¿</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">scheduling.koordinator.sh/reservation-affinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;tolerations&quot;:[{&quot;key&quot;:&quot;test-taint-key&quot;,&quot;operator&quot;:&quot;Equal&quot;,&quot;value&quot;:&quot;test-taint-value&quot;,&quot;effect&quot;:&quot;NoSchedule&quot;}]}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>å¼€å¯ reservation æŠ¢å </li></ol><blockquote><p>æ³¨ï¼šå½“å‰ä¸æ”¯æŒé«˜ä¼˜ Pod æŠ¢å ä½ä¼˜ Reservation çš„ç”¨æ³•ã€‚</p></blockquote><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1beta3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">pluginConfigs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Reservation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1beta3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ReservationArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enablePreemption</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">postFilter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è°ƒåº¦å™¨é…ç½®ä¸­ï¼Œå…³é—­DefaultPreemptionæ’ä»¶çš„æŠ¢å ï¼Œå¼€å¯Reservationæ’ä»¶çš„æŠ¢å </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">disabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DefaultPreemption</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Reservation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±è¡·æ„Ÿè°¢ç¤¾åŒºå¼€å‘è€… @saintube å¯¹è¯¥ç‰¹æ€§çš„è´¡çŒ®ï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6æ··éƒ¨mid-tier-æ”¯æŒç©ºé—²èµ„æºå†åˆ†é…å¢å¼º-pod-çº§åˆ«-qos-é…ç½®">6ã€æ··éƒ¨ï¼šMid tier æ”¯æŒç©ºé—²èµ„æºå†åˆ†é…ï¼Œå¢å¼º Pod çº§åˆ« QoS é…ç½®<a href="#6æ··éƒ¨mid-tier-æ”¯æŒç©ºé—²èµ„æºå†åˆ†é…å¢å¼º-pod-çº§åˆ«-qos-é…ç½®" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ç°ä»£æ•°æ®ä¸­å¿ƒä¸­ï¼Œæ··éƒ¨æŠ€æœ¯å·²ç»æˆä¸ºæå‡èµ„æºåˆ©ç”¨ç‡çš„é‡è¦æ‰‹æ®µã€‚é€šè¿‡å°†å»¶è¿Ÿæ•æ„Ÿå‹ä»»åŠ¡ï¼ˆå¦‚åœ¨çº¿æœåŠ¡ï¼‰ä¸èµ„æºå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚ç¦»çº¿æ‰¹å¤„ç†ï¼‰æ··åˆéƒ¨ç½²åœ¨åŒä¸€é›†ç¾¤ä¸­ï¼Œä¼ä¸šå¯ä»¥æ˜¾è‘—é™ä½ç¡¬ä»¶æˆæœ¬å¹¶æé«˜èµ„æºä½¿ç”¨æ•ˆç‡ã€‚ç„¶è€Œï¼Œéšç€æ··éƒ¨é›†ç¾¤èµ„æºæ°´ä½çš„ä¸æ–­æé«˜ï¼Œå¦‚ä½•ç¡®ä¿ä¸åŒç±»å‹ä»»åŠ¡ä¹‹é—´çš„èµ„æºéš”ç¦»æˆä¸ºå…³é”®æŒ‘æˆ˜ã€‚</p><p>åœ¨æ··éƒ¨åœºæ™¯ä¸­ï¼Œèµ„æºéš”ç¦»èƒ½åŠ›çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p><ul><li><strong>ä¿éšœé«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„æ€§èƒ½</strong>ï¼šä¾‹å¦‚ï¼Œåœ¨çº¿æœåŠ¡éœ€è¦ç¨³å®šçš„ CPUã€å†…å­˜å’Œ I/O èµ„æºï¼Œä»¥æ»¡è¶³ä½å»¶è¿Ÿè¦æ±‚ã€‚</li><li><strong>å……åˆ†åˆ©ç”¨ç©ºé—²èµ„æº</strong>ï¼šç¦»çº¿ä»»åŠ¡åº”å°½å¯èƒ½åˆ©ç”¨é«˜ä¼˜å…ˆçº§ä»»åŠ¡æœªä½¿ç”¨çš„èµ„æºï¼Œä½†ä¸èƒ½å¯¹é«˜ä¼˜å…ˆçº§ä»»åŠ¡é€ æˆå¹²æ‰°ã€‚</li><li><strong>åŠ¨æ€è°ƒæ•´èµ„æºåˆ†é…</strong>ï¼šæ ¹æ®èŠ‚ç‚¹è´Ÿè½½çš„å˜åŒ–å®æ—¶è°ƒæ•´èµ„æºåˆ†é…ç­–ç•¥ï¼Œé¿å…èµ„æºäº‰æŠ¢æˆ–æµªè´¹ã€‚</li></ul><p>ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼ŒKoordinator æŒç»­æ„å»ºå’Œå®Œå–„èµ„æºéš”ç¦»èƒ½åŠ›ã€‚åœ¨ v1.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å›´ç»•èµ„æºè¶…å–å’Œæ··éƒ¨ QoS å±•å¼€äº†ä¸€ç³»åˆ—åŠŸèƒ½ä¼˜åŒ–å’Œé—®é¢˜ä¿®å¤ï¼Œå…·ä½“åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ol><li>Mid èµ„æºè¶…å–å’ŒèŠ‚ç‚¹ç”»åƒç‰¹æ€§ä¼˜åŒ–è®¡ç®—é€»è¾‘ï¼Œæ”¯æŒè¶…å–èŠ‚ç‚¹æœªåˆ†é…èµ„æºï¼Œé¿å…å¯¹èŠ‚ç‚¹èµ„æºè¿›è¡ŒäºŒæ¬¡è¶…å–ã€‚</li><li>è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦ä¼˜åŒ–æŒ‡æ ‡é™çº§é€»è¾‘ã€‚</li><li>CPU QoSã€Resctrl QoS æ”¯æŒ pod ç»´åº¦é…ç½®ã€‚</li><li>å¸¦å¤–è´Ÿè½½ç®¡ç†è¡¥å…… prometheus metricsï¼Œä»¥å¢å¼ºå¯è§‚æµ‹æ€§ã€‚</li><li>Blkio QoSã€èµ„æºæ”¾å¤§ç­‰ç‰¹æ€§çš„ bugfixesã€‚</li></ol><p>Mid èµ„æºè¶…å–ä» Koordinator v1.3 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ï¼Œæä¾›åŸºäº<a href="https://koordinator.sh/docs/designs/node-prediction/" target="_blank" rel="noopener noreferrer">èŠ‚ç‚¹ç”»åƒ</a>çš„åŠ¨æ€èµ„æºè¶…å–èƒ½åŠ›ã€‚ä½†æ˜¯ï¼Œä¸ºäº†ç¡®ä¿è¶…å–èµ„æºçš„ç¨³å®šæ€§ï¼ŒMid èµ„æºå®Œå…¨ä»èŠ‚ç‚¹ä¸Šå·²åˆ†é…çš„ Prod pods ä¸­è·å–ï¼Œæ„å‘³ç€ç©ºèŠ‚ç‚¹ä¸€å¼€å§‹æ˜¯æ²¡æœ‰ Mid èµ„æºçš„ï¼Œè¿™ç»™ä¸€äº›å·¥ä½œè´Ÿè½½ä½¿ç”¨ Mid èµ„æºå¸¦æ¥äº†è¯¸å¤šä¸ä¾¿ï¼ŒKoordinator ç¤¾åŒºä¹Ÿæ”¶åˆ°äº†ä¸€äº›ä¼ä¸šç”¨æˆ·çš„åé¦ˆå’Œè´¡çŒ®ã€‚
<img loading="lazy" alt="Resource Model" src="/zh-Hans/assets/images/resource-model-0f6ca53f0a140a2be9705e75758caf22.png" width="1058" height="353" class="img_ev3q">
åœ¨ v1.6 ç‰ˆæœ¬ä¸­ï¼ŒKoordinator æ›´æ–°äº†è¶…å–è®¡ç®—å…¬å¼ï¼Œå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MidAllocatable := min(ProdReclaimable, NodeAllocatable * thresholdRatio) + ProdUnallocated * unallocatedRatio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProdReclaimable := min(max(0, ProdAllocated - ProdPeak * (1 + safeMargin)), NodeUnused)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®¡ç®—é€»è¾‘æœ‰ä¸¤ç‚¹å˜åŒ–ï¼š</p><ol><li>æ”¯æŒæŒ‰é™æ€æ¯”ä¾‹å¯¹æœªåˆ†é…èµ„æºè¿›è¡Œè¶…å–ï¼Œä»¥æ”¹å–„å†·å¯åŠ¨é—®é¢˜ã€‚</li><li>ä¸å…è®¸è¶…å–å®é™…å·²ä½¿ç”¨çš„èŠ‚ç‚¹èµ„æºï¼Œé¿å…å› äºŒæ¬¡è¶…å–åœºæ™¯å¯¼è‡´é¢„ä¼°å€¼è¿‡å¤§ï¼›ä¾‹å¦‚ï¼Œä¸€äº›ç”¨æˆ·ä½¿ç”¨äº† Koordinator çš„èŠ‚ç‚¹èµ„æºæ”¾å¤§èƒ½åŠ›ä»¥è°ƒåº¦æ›´å¤š Prod podsï¼Œä½¿å¾—èŠ‚ç‚¹ä¸Š ProdAllocated &gt; NodeAllocatableï¼Œå¯¼è‡´ MidAllocatable çš„é¢„ä¼°å€¼å·²ç»åç¦»çœŸå®çš„èŠ‚ç‚¹è´Ÿè½½ã€‚</li></ol><p>æ­¤å¤–ï¼Œåœ¨æ··éƒ¨ QoS æ–¹é¢ï¼ŒKoordinator v1.6 å¢å¼ºäº† Pod ç²’åº¦çš„ QoS ç­–ç•¥é…ç½®èƒ½åŠ›ï¼Œé€‚ç”¨äºä¾‹å¦‚æ··éƒ¨èŠ‚ç‚¹ä¸ŠåŠ é»‘å¹²æ‰° Pod ä»¥åŠç°åº¦è°ƒæ•´æ··éƒ¨ QoS çš„ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li>Resctrl ç‰¹æ€§ï¼Œæ”¯æŒ Pod ç»´åº¦çš„ LLC å’Œå†…å­˜å¸¦å®½éš”ç¦»èƒ½åŠ›</li><li>CPU QoS ç‰¹æ€§ï¼Œæ”¯æŒ Pod ç»´åº¦çš„ CPU QoS é…ç½®</li></ol><p>Resctrl ç‰¹æ€§å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨ Pod ç»´åº¦å¯ç”¨ï¼š</p><ol><li>åœ¨ Koordlet ä¸­ feature-gate ä¸­å¯ç”¨ Resctrl ç‰¹æ€§ã€‚</li><li>é€šè¿‡ Pod Annotation åè®®node.koordinator.sh/resctrlï¼Œé…ç½® LLC åŠå†…å­˜å¸¦å®½ï¼ˆMBï¼‰é™åˆ¶ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œ</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">node.koordinator.sh/resctrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;llc&quot;: {&quot;schemata&quot;: {&quot;range&quot;: [0, 30]}}, &quot;mb&quot;: {&quot;schemata&quot;: {&quot;percent&quot;: 20}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pod ç»´åº¦çš„ CPU QoS é…ç½®åˆ™å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯ç”¨ï¼š</p><ol><li>å¯ç”¨ CPU QoSï¼Œè¯·å‚ç…§ï¼š<a href="https://koordinator.sh/docs/user-manuals/cpu-qos/" target="_blank" rel="noopener noreferrer">https://koordinator.sh/docs/user-manuals/cpu-qos/</a></li><li>é€šè¿‡ Pod Annotation åè®®koordinator.sh/cpuQOSï¼Œé…ç½® Pod çš„ CPU QoS ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œ</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/cpuQOS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;groupIdentity&quot;: 1}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±è¡·æ„Ÿè°¢ @kangclzjcã€@j4ckstrawã€@lijunxin559ã€@tan90githubã€@yangfeiyu20102011 ç­‰ç¤¾åŒºå¼€å‘è€…åœ¨æ··éƒ¨ç›¸å…³ç‰¹æ€§ä¸Šçš„è´¡çŒ®ï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7è°ƒåº¦é‡è°ƒåº¦æŒç»­æå‡çš„è¿è¡Œæ•ˆç‡">7ã€è°ƒåº¦ã€é‡è°ƒåº¦ï¼šæŒç»­æå‡çš„è¿è¡Œæ•ˆç‡<a href="#7è°ƒåº¦é‡è°ƒåº¦æŒç»­æå‡çš„è¿è¡Œæ•ˆç‡" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨äº‘åŸç”ŸæŠ€æœ¯æŒç»­å‘å±•çš„ä»Šå¤©ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå°†æ ¸å¿ƒä¸šåŠ¡è¿ç§»åˆ° Kubernetes å¹³å°ï¼Œé›†ç¾¤è§„æ¨¡å’Œä»»åŠ¡æ•°é‡å‘ˆç°çˆ†å‘å¼å¢é•¿ã€‚è¿™ç§è¶‹åŠ¿å¸¦æ¥äº†æ˜¾è‘—çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨è°ƒåº¦æ€§èƒ½å’Œé‡è°ƒåº¦ç­–ç•¥æ–¹é¢ï¼š</p><ul><li><strong>è°ƒåº¦æ€§èƒ½éœ€æ±‚</strong>ï¼šéšç€é›†ç¾¤è§„æ¨¡çš„æ‰©å¤§ï¼Œè°ƒåº¦å™¨éœ€è¦å¤„ç†çš„ä»»åŠ¡æ•°é‡æ€¥å‰§å¢åŠ ï¼Œè¿™å¯¹è°ƒåº¦å™¨çš„æ€§èƒ½å’Œæ‰©å±•æ€§æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œå¦‚ä½•å¿«é€Ÿå®Œæˆ Pod çš„è°ƒåº¦å†³ç­–ã€é™ä½è°ƒåº¦å»¶è¿Ÿæˆä¸ºå…³é”®é—®é¢˜ã€‚</li><li><strong>é‡è°ƒåº¦ç­–ç•¥éœ€æ±‚</strong>ï¼šåœ¨å¤šç§Ÿæˆ·ç¯å¢ƒä¸‹ï¼Œèµ„æºç«äº‰åŠ å‰§ï¼Œé¢‘ç¹çš„é‡è°ƒåº¦å¯èƒ½å¯¼è‡´å·¥ä½œè´Ÿè½½åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´åå¤è¿ç§»ï¼Œè¿›è€Œå¢åŠ ç³»ç»Ÿè´Ÿæ‹…å¹¶å½±å“é›†ç¾¤ç¨³å®šæ€§ã€‚æ­¤å¤–ï¼Œå¦‚ä½•åœ¨ä¿éšœç”Ÿäº§ä»»åŠ¡ç¨³å®šè¿è¡Œçš„åŒæ—¶ï¼Œåˆç†åˆ†é…èµ„æºä»¥é¿å…çƒ­ç‚¹é—®é¢˜ï¼Œä¹Ÿæˆä¸ºé‡è°ƒåº¦ç­–ç•¥è®¾è®¡çš„é‡è¦è€ƒé‡ã€‚</li></ul><p>ä¸ºäº†åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒKoordinator åœ¨ v1.6.0 ç‰ˆæœ¬ä¸­å¯¹è°ƒåº¦å™¨å’Œé‡è°ƒåº¦å™¨è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ï¼Œæ—¨åœ¨æå‡è°ƒåº¦æ€§èƒ½ã€å¢å¼ºé‡è°ƒåº¦ç­–ç•¥çš„ç¨³å®šæ€§å’Œåˆç†æ€§ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨å½“å‰ç‰ˆæœ¬ä¸­é’ˆå¯¹è°ƒåº¦å™¨æ€§èƒ½çš„ä¼˜åŒ–ï¼š</p><ol><li>å°† PodGroup çš„ MinMember æ£€æŸ¥æå‰åˆ° PreEnqueueï¼Œå‡å°‘ä¸å¿…è¦çš„è°ƒåº¦å‘¨æœŸã€‚</li><li>å°† Reservation çš„èµ„æºå½’è¿˜å»¶è¿Ÿåˆ° AfterPreFilter é˜¶æ®µï¼Œåªåœ¨ PreFilterResult å…è®¸çš„èŠ‚ç‚¹ä¸Šåšèµ„æºå½’è¿˜ï¼Œé™ä½ç®—æ³•å¤æ‚åº¦ã€‚</li><li>ä¼˜åŒ– NodeNUMAResourceã€DeviceShareã€Reservation ç­‰æ’ä»¶çš„ CycleState åˆ†å¸ƒï¼Œé™ä½å†…å­˜å¼€é”€ã€‚</li><li>ä¸º Koordinator é¢å¤–å¢åŠ çš„æ‰©å±•ç‚¹å¦‚ BeforePreFilterã€AfterPreFilter æ–°å¢å»¶è¿ŸæŒ‡æ ‡ã€‚</li></ol><p>éšç€é›†ç¾¤è§„æ¨¡çš„ä¸æ–­æ‰©å¤§ï¼Œé‡è°ƒåº¦è¿‡ç¨‹çš„ç¨³å®šæ€§å’Œåˆç†æ€§æˆä¸ºæ ¸å¿ƒå…³æ³¨ç‚¹ã€‚é¢‘ç¹çš„é©±é€å¯èƒ½å¯¼è‡´å·¥ä½œè´Ÿè½½åœ¨èŠ‚ç‚¹é—´åå¤è¿ç§»ï¼Œå¢åŠ ç³»ç»Ÿè´Ÿæ‹…å¹¶å¼•å‘ç¨³å®šæ€§é£é™©ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨ v1.6.0 ç‰ˆæœ¬ä¸­å¯¹é‡è°ƒåº¦å™¨è¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–ï¼š</p><ol><li>LowNodeLoad æ’ä»¶ä¼˜åŒ–ï¼š<ol><li>LowNodeLoad æ’ä»¶ç°åœ¨æ”¯æŒé…ç½® ProdHighThresholds å’Œ ProdLowThresholdsï¼Œç»“åˆ Koordinator ä¼˜å…ˆçº§ï¼ˆPriorityï¼‰å¯¹å·¥ä½œè´Ÿè½½çš„èµ„æºåˆ©ç”¨ç‡è¿›è¡Œå·®å¼‚åŒ–ç®¡ç†ï¼Œèƒ½å¤Ÿå‡å°‘ç”Ÿäº§åº”ç”¨å¼•èµ·çš„çƒ­ç‚¹é—®é¢˜ï¼Œä»è€Œå®ç°æ›´ç»†ç²’åº¦çš„è´Ÿè½½å‡è¡¡ï¼›</li><li>ä¼˜åŒ–äº†å¯¹å¾…é©±é€ Pod çš„æ’åºé€»è¾‘ï¼Œé€šè¿‡åˆ†æ®µå‡½æ•°æ‰“åˆ†ç®—æ³•é€‰å‡ºæœ€é€‚åˆé©±é€çš„ Podï¼Œç¡®ä¿åˆç†çš„èµ„æºåˆ†é…ï¼Œé¿å…å› é©±é€èµ„æºåˆ©ç”¨ç‡æœ€å¤§çš„Podè€Œé€ æˆçš„ç¨³å®šæ€§é—®é¢˜ï¼›</li><li>ä¼˜åŒ–äº† Pod é©±é€å‰çš„æ£€æŸ¥é€»è¾‘ï¼ŒLowNodeLoad åœ¨é©±é€ Pod å‰é€ä¸€æ£€æŸ¥ç›®æ ‡èŠ‚ç‚¹æ˜¯å¦ä¼šå› é‡è°ƒåº¦æˆä¸ºæ–°çš„çƒ­ç‚¹èŠ‚ç‚¹ï¼Œè¿™ä¸€ä¼˜åŒ–æœ‰æ•ˆé¿å…äº†åå¤é‡è°ƒåº¦çš„å‘ç”Ÿã€‚</li></ol></li><li>é©±é€æ§åˆ¶å™¨ MigrationController å¢å¼ºï¼š<ol><li>MigrationController å…·æœ‰ ObjectLimiter çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ§åˆ¶æŸæ®µæ—¶é—´å†…å·¥ä½œè´Ÿè½½çš„é©±é€é¢‘ç‡ã€‚ç°åœ¨æ”¯æŒé…ç½® namespace çº§åˆ«çš„é©±é€é™æµï¼Œå¯¹ namespace ä¸‹çš„é©±é€è¿›è¡Œæ›´åŠ ç²¾ç»†åŒ–çš„æ§åˆ¶ï¼›åŒæ—¶å°†ObjectLimiterä»Arbitrator è¿ç§»åˆ° MigrationController å†…éƒ¨ï¼Œä¿®å¤äº†åœ¨å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½å‡ºç°çš„é™æµå¤±æ•ˆé—®é¢˜ï¼›</li><li>æ–°å¢ EvictAllBarePods é…ç½®é¡¹ï¼Œå…è®¸ç”¨æˆ·å¼€å¯é©±é€æ²¡æœ‰ OwnerRef çš„ Podï¼Œä»è€Œæé«˜äº†é‡è°ƒåº¦çš„çµæ´»æ€§ï¼›</li><li>æ–°å¢ MaxMigratingGlobally é…ç½®é¡¹ï¼ŒMigrationController å¯ä»¥å•ç‹¬æ§åˆ¶Podçš„æœ€å¤§é©±é€æ•°é‡ï¼Œä»è€Œé™ä½äº†ç¨³å®šæ€§é£é™©ï¼›</li><li>ä¼˜åŒ–äº† GetMaxUnavailable æ–¹æ³•çš„è®¡ç®—é€»è¾‘ï¼Œå½“è®¡ç®—å·¥ä½œè´Ÿè½½çš„æœ€å¤§ä¸å¯ç”¨å‰¯æœ¬æ•°å‘ä¸‹å–æ•´ä¸º 0 æ—¶ï¼Œé»˜è®¤å°†å…¶è°ƒæ•´ä¸º 1ï¼Œé¿å…å¯¼è‡´ç”¨æˆ·å¯¹å‰¯æœ¬ä¸å¯ç”¨æ•°çš„æ§åˆ¶å¤±å»é¢„æœŸçš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li></ol></li><li>æ–°å¢é‡è°ƒåº¦å…¨å±€é…ç½®å‚æ•° MaxNoOfPodsToEvictTotalï¼Œå¯ä»¥ç¡®ä¿é‡è°ƒåº¦å™¨å…¨å±€çš„ Pod æœ€å¤§é©±é€æ•°é‡ï¼Œå‡å°‘å¯¹é›†ç¾¤çš„è´Ÿæ‹…å¹¶æå‡ç¨³å®šæ€§ï¼›</li></ol><p>ç”±è¡·æ„Ÿè°¢ç¤¾åŒºå¼€å‘è€… @AdrianMachaoã€@songtao98ã€@LY-todayã€@zwForrestã€@JBininã€@googs1025ã€@bogo-y åœ¨è°ƒåº¦é‡è°ƒåº¦ä¼˜åŒ–ä¸Šçš„è´¡çŒ®ï¼</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœªæ¥è®¡åˆ’">æœªæ¥è®¡åˆ’<a href="#æœªæ¥è®¡åˆ’" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Koordinator ç¤¾åŒºå°†ç»§ç»­ä¸“æ³¨äºåŠ å¼º GPU èµ„æºç®¡ç†å’Œè°ƒåº¦åŠŸèƒ½ï¼Œæä¾›é‡è°ƒåº¦æ’ä»¶è¿›ä¸€æ­¥è§£å†³èµ„æºåˆ†é…ä¸å‡è¡¡å¯¼è‡´çš„ GPU ç¢ç‰‡é—®é¢˜ï¼Œå¹¶è®¡åˆ’åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­å¼•å…¥æ›´å¤šæ–°çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä»¥æ”¯æŒæ›´å¤æ‚çš„å·¥ä½œè´Ÿè½½åœºæ™¯ï¼›åŒæ—¶ï¼Œåœ¨èµ„æºé¢„ç•™å’Œæ··éƒ¨æ–¹é¢ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä»¥æ”¯æŒæ›´ç»†ç²’åº¦çš„åœºæ™¯ã€‚</p><p>ç›®å‰ç¤¾åŒºå·²ç»åœ¨è§„åˆ’çš„ Proposal å¦‚ä¸‹ï¼š</p><ul><li><a href="https://github.com/koordinator-sh/koordinator/issues/2335" target="_blank" rel="noopener noreferrer">ç²¾ç»†åŒ–è®¾å¤‡è°ƒåº¦æ”¯æŒæ™Ÿè…¾ NPU</a></li><li><a href="https://github.com/koordinator-sh/koordinator/issues/2332" target="_blank" rel="noopener noreferrer">æä¾›é‡è°ƒåº¦æ’ä»¶è§£å†³èµ„æºä¸å‡è¡¡é—®é¢˜</a></li><li><a href="https://github.com/koordinator-sh/koordinator/issues/2150" target="_blank" rel="noopener noreferrer">Reservation æ”¯æŒç»‘å®šå·²åˆ†é… Pod</a></li></ul><p>ç€é‡è§£å†³çš„ä½¿ç”¨é—®é¢˜å¦‚ä¸‹ï¼š</p><ul><li><a href="https://github.com/koordinator-sh/koordinator/issues/2334" target="_blank" rel="noopener noreferrer">NRI æ’ä»¶å†²çª</a></li></ul><p>é•¿æœŸè§„åˆ’çš„ Proposal å¦‚ä¸‹ï¼š</p><ul><li><a href="https://github.com/koordinator-sh/koordinator/issues/2181" target="_blank" rel="noopener noreferrer">æä¾›ä¸€ä¸ªç«¯åˆ°ç«¯å¯æ¼”è¿›çš„è®¾å¤‡ç®¡ç†æ–¹æ¡ˆ</a></li></ul><p>æˆ‘ä»¬é¼“åŠ±ç”¨æˆ·åé¦ˆä½¿ç”¨ä½“éªŒï¼Œå¹¶æ¬¢è¿æ›´å¤šå¼€å‘è€…å‚ä¸ Koordinator é¡¹ç›®ï¼Œå…±åŒæ¨åŠ¨å…¶å‘å±•ï¼</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh-Hans/blog/tags/release">release</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/koordinator-sh/koordinator.sh/edit/main/blog/2025-02-24-release/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="åšæ–‡åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--next" href="/zh-Hans/blog/release-v1.5.0"><div class="pagination-nav__sublabel">è¾ƒæ—§ä¸€ç¯‡</div><div class="pagination-nav__label">Koordinator v1.5: æŒç»­ä¼˜åŒ–ï¼Œè¿›å…¥ CNCF Sandbox</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#èƒŒæ™¯" class="table-of-contents__link toc-highlight">èƒŒæ™¯</a></li><li><a href="#æ ¸å¿ƒäº®ç‚¹åŠŸèƒ½" class="table-of-contents__link toc-highlight">æ ¸å¿ƒäº®ç‚¹åŠŸèƒ½</a><ul><li><a href="#1gpu-æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦åŠ é€Ÿ-ai-åº”ç”¨å†…çš„-gpu-äº’è”" class="table-of-contents__link toc-highlight">1ã€GPU æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ï¼šåŠ é€Ÿ AI åº”ç”¨å†…çš„ GPU äº’è”</a></li><li><a href="#2ç«¯åˆ°ç«¯-gdr-æ”¯æŒæå‡è·¨æœºä»»åŠ¡çš„äº’è”æ€§èƒ½" class="table-of-contents__link toc-highlight">2ã€ç«¯åˆ°ç«¯ GDR æ”¯æŒï¼šæå‡è·¨æœºä»»åŠ¡çš„äº’è”æ€§èƒ½</a></li><li><a href="#3gpu-å…±äº«å¼ºéš”ç¦»æé«˜-ai-æ¨ç†ä»»åŠ¡çš„èµ„æºåˆ©ç”¨ç‡" class="table-of-contents__link toc-highlight">3ã€GPU å…±äº«å¼ºéš”ç¦»ï¼šæé«˜ AI æ¨ç†ä»»åŠ¡çš„èµ„æºåˆ©ç”¨ç‡</a></li><li><a href="#4å·®å¼‚åŒ–-gpu-è°ƒåº¦ç­–ç•¥æœ‰æ•ˆé™ä½-gpu-ç¢ç‰‡ç‡" class="table-of-contents__link toc-highlight">4ã€å·®å¼‚åŒ– GPU è°ƒåº¦ç­–ç•¥ï¼šæœ‰æ•ˆé™ä½ GPU ç¢ç‰‡ç‡</a></li><li><a href="#5ç²¾ç»†åŒ–èµ„æºé¢„ç•™æ»¡è¶³-ai-ä»»åŠ¡çš„é«˜æ•ˆè¿è¡Œéœ€æ±‚" class="table-of-contents__link toc-highlight">5ã€ç²¾ç»†åŒ–èµ„æºé¢„ç•™ï¼šæ»¡è¶³ AI ä»»åŠ¡çš„é«˜æ•ˆè¿è¡Œéœ€æ±‚</a></li><li><a href="#6æ··éƒ¨mid-tier-æ”¯æŒç©ºé—²èµ„æºå†åˆ†é…å¢å¼º-pod-çº§åˆ«-qos-é…ç½®" class="table-of-contents__link toc-highlight">6ã€æ··éƒ¨ï¼šMid tier æ”¯æŒç©ºé—²èµ„æºå†åˆ†é…ï¼Œå¢å¼º Pod çº§åˆ« QoS é…ç½®</a></li><li><a href="#7è°ƒåº¦é‡è°ƒåº¦æŒç»­æå‡çš„è¿è¡Œæ•ˆç‡" class="table-of-contents__link toc-highlight">7ã€è°ƒåº¦ã€é‡è°ƒåº¦ï¼šæŒç»­æå‡çš„è¿è¡Œæ•ˆç‡</a></li></ul></li><li><a href="#æœªæ¥è®¡åˆ’" class="table-of-contents__link toc-highlight">æœªæ¥è®¡åˆ’</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ–‡æ¡£</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/blog/docs/installation">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/blog/docs/user-manuals/colocation-profile">ç”¨æˆ·æ‰‹å†Œ</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/blog/docs/architecture/overview">æ¶æ„</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/koordinator-sh/shared_invite/zt-1756qoub4-Cn4~esfdlfAPsD7cwO2NzA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack ( #koordinator channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/blog/">DingTalk (GroupID: 33383887)</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/blog/blog">åšå®¢</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <div style="font-size: 18px">
        <br>
        <strong>Koordinatoræ˜¯ <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a> æ²™ç®±é¡¹ç›® </strong>
        <br>
        </div>
        <br>
        <img src="img/cncf-color.svg" alt="CNCF" width="auto" height="100px">
        <br>
        <div style="font-size: 14px">
        LinuxåŸºé‡‘ä¼šÂ® (TLF) å·²æ³¨å†Œå¹¶ä½¿ç”¨å•†æ ‡ã€‚å¦‚éœ€äº†è§£LinuxåŸºé‡‘ä¼šçš„å•†æ ‡åˆ—è¡¨ï¼Œè¯·è®¿é—®<a href="https://www.linuxfoundation.org/trademark-usage/">å•†æ ‡ä½¿ç”¨</a>é¡µé¢ã€‚
        <br>
        Copyright Â© 2024 Koordinatoré¡¹ç›®ä½œè€…ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
        </div>
        </div></div></div></footer></div>
<script src="/zh-Hans/assets/js/runtime~main.8fd6342c.js"></script>
<script src="/zh-Hans/assets/js/main.b7c3fb77.js"></script>
</body>
</html>