<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.7 plugin-docs plugin-id-default docs-doc-id-user-manuals/network-topology-aware-scheduling">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ | Koordinator</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://koordinator.sh/zh-Hans/docs/user-manuals/network-topology-aware-scheduling"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="v1.7"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.7"><meta data-rh="true" name="docsearch:version" content="v1.7"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.7"><meta data-rh="true" property="og:title" content="ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ | Koordinator"><meta data-rh="true" name="description" content="ç®€ä»‹"><meta data-rh="true" property="og:description" content="ç®€ä»‹"><link data-rh="true" rel="icon" href="/zh-Hans/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://koordinator.sh/zh-Hans/docs/user-manuals/network-topology-aware-scheduling"><link data-rh="true" rel="alternate" href="https://koordinator.sh/docs/user-manuals/network-topology-aware-scheduling" hreflang="en"><link data-rh="true" rel="alternate" href="https://koordinator.sh/zh-Hans/docs/user-manuals/network-topology-aware-scheduling" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://koordinator.sh/docs/user-manuals/network-topology-aware-scheduling" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://IRGGIU5RJ5-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh-Hans/blog/rss.xml" title="Koordinator RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-Hans/blog/atom.xml" title="Koordinator Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Koordinator" href="/zh-Hans/opensearch.xml">
<meta name="algolia-site-verification" content="94B07DDC59FCF9C7"><link rel="stylesheet" href="/zh-Hans/assets/css/styles.d55f2266.css">
<link rel="preload" href="/zh-Hans/assets/js/runtime~main.edc04791.js" as="script">
<link rel="preload" href="/zh-Hans/assets/js/main.f06d534c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">â­ï¸ If you like Koordinator, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/koordinator-sh/koordinator">GitHub</a>! â­ï¸</div><button type="button" aria-label="å…³é—­" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-Hans/"><div class="navbar__logo"><img src="/zh-Hans/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-Hans/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Koordinator</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-Hans/docs">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/zh-Hans/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zh-Hans/docs">v1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-Hans/docs/next/user-manuals/network-topology-aware-scheduling">v1.8 ğŸš§</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-Hans/docs/user-manuals/network-topology-aware-scheduling">v1.7</a></li><li><a class="dropdown__link" href="/zh-Hans/docs/v1.6">v1.6</a></li><li><a class="dropdown__link" href="/zh-Hans/docs/v1.5">v1.5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ç®€ä½“ä¸­æ–‡</a><ul class="dropdown__menu"><li><a href="/docs/user-manuals/network-topology-aware-scheduling" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh-Hans/docs/user-manuals/network-topology-aware-scheduling" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/zh-Hans/docs">å¿«é€Ÿå¼€å§‹</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs">ç®€ä»‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/installation">å®‰è£…</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/zh-Hans/docs/architecture/overview">æ¶æ„</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/overview">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/resource-model">èµ„æºæ¨¡å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/priority">ä¼˜å…ˆçº§</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/qos">QoS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/job">Job</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/architecture/device">Device</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh-Hans/docs/user-manuals/gang-scheduling">ç”¨æˆ·æ‰‹å†Œ</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh-Hans/docs/user-manuals/gang-scheduling">Task Scheduling</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/user-manuals/gang-scheduling">Gang è°ƒåº¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/user-manuals/job-level-preemption">Job çº§åˆ«æŠ¢å </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-Hans/docs/user-manuals/network-topology-aware-scheduling">ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/user-manuals/capacity-scheduling">Capacity Scheduling - Elastic Quota Management</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/fine-grained-device-scheduling">Heterogeneous Resources Scheduling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/node-resource-fit-plus-scoring">Heterogeneous Scheduling Strategy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/load-aware-scheduling">Load-aware Scheduling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/fine-grained-cpu-orchestration">Fine-grained Scheduling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/colocation-profile">Colocation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-Hans/docs/user-manuals/resource-reservation">Utils</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-Hans/docs/designs/koordlet-overview">è®¾è®¡</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-Hans/docs/best-practices/batch-colocation-quick-start">æœ€ä½³å®è·µ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-Hans/docs/developer-guide/component-guide">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-Hans/docs/api-reference/custom-resource-definitions">API Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/zh-Hans/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ç”¨æˆ·æ‰‹å†Œ</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Task Scheduling</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">ç‰ˆæœ¬ï¼šv1.7</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å¤§è§„æ¨¡ AI è®­ç»ƒåœºæ™¯ä¸­ï¼Œå°¤å…¶æ˜¯å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰è®­ç»ƒï¼Œé«˜æ•ˆçš„ Pod é—´é€šä¿¡å¯¹è®­ç»ƒæ€§èƒ½è‡³å…³é‡è¦ã€‚æ¨¡å‹å¹¶è¡ŒæŠ€æœ¯ï¼Œå¦‚å¼ é‡å¹¶è¡Œï¼ˆTPï¼‰ã€æµæ°´çº¿å¹¶è¡Œï¼ˆPPï¼‰å’Œæ•°æ®å¹¶è¡Œï¼ˆDPï¼‰ï¼Œéœ€è¦åœ¨ GPU ä¹‹é—´è¿›è¡Œé¢‘ç¹çš„é«˜å¸¦å®½æ•°æ®äº¤æ¢â€”â€”é€šå¸¸è·¨è¶Šå¤šä¸ªèŠ‚ç‚¹ã€‚åœ¨è¿™äº›å·¥ä½œè´Ÿè½½ä¸‹ï¼Œ<strong>ç½‘ç»œæ‹“æ‰‘æˆä¸ºå…³é”®çš„æ€§èƒ½ç“¶é¢ˆ</strong>ï¼Œé€šä¿¡å»¶è¿Ÿå’Œå¸¦å®½å—ç‰©ç†ç½‘ç»œå±‚æ¬¡ç»“æ„ï¼ˆå¦‚ NVLinkã€blockã€spineï¼‰çš„ä¸¥é‡å½±å“ã€‚</p><p>ä¸ºäº†ä¼˜åŒ–è®­ç»ƒæ•ˆç‡ï¼ŒKoordinator æä¾›äº†<strong>ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</strong>èƒ½åŠ›ï¼Œè¯¥èƒ½åŠ›ç¡®ä¿ï¼š</p><ul><li>å½“é›†ç¾¤èµ„æºå……è¶³æ—¶ï¼Œå…·æœ‰ç½‘ç»œæ‹“æ‰‘è°ƒåº¦éœ€æ±‚çš„ Pod å°†æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ç­–ç•¥è¢«è°ƒåº¦åˆ°æ€§èƒ½æ›´å¥½çš„æ‹“æ‰‘åŸŸï¼ˆä¾‹å¦‚ï¼Œæ›´ä½çš„å»¶è¿Ÿã€æ›´é«˜çš„å¸¦å®½ï¼‰ã€‚</li><li>å½“é›†ç¾¤èµ„æºä¸è¶³æ—¶ï¼Œè°ƒåº¦å™¨å°†åŸºäºç½‘ç»œæ‹“æ‰‘çº¦æŸé€šè¿‡ä½œä¸šçº§æŠ¢å ä¸º GangGroup æŠ¢å èµ„æºï¼Œå¹¶åœ¨ <code>.status.nominatedNode</code> å­—æ®µä¸­è®°å½•èµ„æºé¢„ç•™ï¼Œä»¥ç¡®ä¿ä¸€è‡´çš„æ”¾ç½®ã€‚</li></ul><p>æ­¤åŠŸèƒ½ä¸ <a href="https://koordinator.sh/docs/next/architecture/job/" target="_blank" rel="noopener noreferrer">PodGroup/GangGroup</a> è¯­ä¹‰æ— ç¼åä½œã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç½®æ¡ä»¶">å‰ç½®æ¡ä»¶<a href="#å‰ç½®æ¡ä»¶" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>Kubernetes &gt;= 1.18</li><li>Koordinator &gt;= 1.7.0</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="éªŒè¯ç½‘ç»œæ‹“æ‰‘æ”¯æŒæ˜¯å¦å¯ç”¨">éªŒè¯ç½‘ç»œæ‹“æ‰‘æ”¯æŒæ˜¯å¦å¯ç”¨<a href="#éªŒè¯ç½‘ç»œæ‹“æ‰‘æ”¯æŒæ˜¯å¦å¯ç”¨" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è™½ç„¶ä» Koordinator &gt;= 1.7.0 å¼€å§‹ï¼Œç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦<strong>é»˜è®¤å¯ç”¨</strong>ï¼Œä½†å»ºè®®åœ¨ç»§ç»­ä¹‹å‰ç¡®è®¤é…ç½®ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ£€æŸ¥-koord-scheduler-å¯åŠ¨å‚æ•°">æ£€æŸ¥ koord-scheduler å¯åŠ¨å‚æ•°<a href="#æ£€æŸ¥-koord-scheduler-å¯åŠ¨å‚æ•°" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>éªŒè¯ koord-scheduler å·²å¯ç”¨ç½‘ç»œæ‹“æ‰‘ç®¡ç†å™¨:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n koordinator-system get deployment koord-scheduler -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> enable-network-topology-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¢„æœŸè¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœå‚æ•°ç¼ºå¤±æˆ–è®¾ç½®ä¸º <code>false</code>ï¼Œè¯·æ›´æ–° koord-scheduler éƒ¨ç½²ä»¥æ·»åŠ æ­¤æ ‡å¿—ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ£€æŸ¥-coscheduling-æ’ä»¶é…ç½®">æ£€æŸ¥ Coscheduling æ’ä»¶é…ç½®<a href="#æ£€æŸ¥-coscheduling-æ’ä»¶é…ç½®" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol start="2"><li>éªŒè¯ Coscheduling æ’ä»¶å·²å¯ç”¨ç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n koordinator-system get cm koord-scheduler-config -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¡®ä¿ Coscheduling æ’ä»¶é…ç½®åŒ…å« <code>awareNetworkTopology: true</code>ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">koord-scheduler-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    apiVersion: kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    kind: KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    profiles:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    - pluginConfig:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      - name: Coscheduling</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          apiVersion: kubescheduler.config.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          kind: CoschedulingArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          awareNetworkTopology: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          enablePreemption: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœ <code>awareNetworkTopology</code> ç¼ºå¤±æˆ–è®¾ç½®ä¸º <code>false</code>ï¼Œè¯·æ›´æ–° ConfigMap å¹¶é‡å¯ koord-scheduler Podï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete po -l koord-app</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">koord-scheduler -n koordinator-system </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®ç½‘ç»œæ‹“æ‰‘">é…ç½®ç½‘ç»œæ‹“æ‰‘<a href="#é…ç½®ç½‘ç»œæ‹“æ‰‘" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºèŠ‚ç‚¹æ·»åŠ æ‹“æ‰‘ä¿¡æ¯æ ‡ç­¾">ä¸ºèŠ‚ç‚¹æ·»åŠ æ‹“æ‰‘ä¿¡æ¯æ ‡ç­¾<a href="#ä¸ºèŠ‚ç‚¹æ·»åŠ æ‹“æ‰‘ä¿¡æ¯æ ‡ç­¾" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆï¼Œä½¿ç”¨ NVIDIA çš„ <a href="https://github.com/NVIDIA/topograph/blob/v0.1.0/docs/engines/k8s.md" target="_blank" rel="noopener noreferrer">topograph</a> ç­‰å·¥å…·ä¸ºèŠ‚ç‚¹æ ‡è®°å…¶ç½‘ç»œæ‹“æ‰‘ä½ç½®ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">network.topology.nvidia.com/block</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> b1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">network.topology.nvidia.com/spine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»º-clusternetworktopology">åˆ›å»º ClusterNetworkTopology<a href="#åˆ›å»º-clusternetworktopology" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç®¡ç†å‘˜é€šè¿‡åä¸º <code>default</code> çš„ <code>ClusterNetworkTopology</code> CR å®šä¹‰æ‹“æ‰‘å±‚æ¬¡ç»“æ„ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterNetworkTopology</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networkTopologySpec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">labelKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> network.topology.nvidia.com/spine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">labelKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> network.topology.nvidia.com/block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">parentTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">parentTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‹“æ‰‘å½¢æˆæ ‘çŠ¶ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸€å±‚ä»£è¡¨ç½‘ç»œä¸­çš„èšåˆçº§åˆ«ï¼ˆä¾‹å¦‚ï¼ŒNode â†’ Block â†’ Spineï¼‰ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="éªŒè¯æ‹“æ‰‘é…ç½®">éªŒè¯æ‹“æ‰‘é…ç½®<a href="#éªŒè¯æ‹“æ‰‘é…ç½®" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åº”ç”¨ ClusterNetworkTopology åï¼Œæ£€æŸ¥å…¶çŠ¶æ€ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get clusternetworktopology default -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¤ºä¾‹è¾“å‡ºï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">detailStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">childTopologyNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">childTopologyNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">childTopologyNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">childTopologyNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">childTopologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nodeNum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentTopologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SpineLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> spine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">topologyInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyLayer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BlockLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŸºäºä¸Šè¿° <code>status</code>ï¼Œé›†ç¾¤å…·æœ‰ä¸¤å±‚ <strong>spine-block</strong> æ¶æ„ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ SpineLayer: spine-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ BlockLayer: block-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ NodeTopologyLayer: 3 nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ BlockLayer: block-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ NodeTopologyLayer: 2 nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ SpineLayer: spine-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ BlockLayer: block-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ NodeTopologyLayer: 2 nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ BlockLayer: block-3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ NodeTopologyLayer: 2 nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ SpineLayer: spine-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ BlockLayer: block-4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ NodeTopologyLayer: 3 nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ­¤ç½‘ç»œæ‹“æ‰‘æ¶æ„ä¸<a href="https://koordinator.sh/docs/next/architecture/job#topology-gather-algorithm" target="_blank" rel="noopener noreferrer">ç½‘ç»œæ‹“æ‰‘ç®—æ³•æ¼”ç¤º</a>ä¸­ä½¿ç”¨çš„æ¶æ„ä¸€è‡´ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨ç¤ºä¾‹">ä½¿ç”¨ç¤ºä¾‹<a href="#ä½¿ç”¨ç¤ºä¾‹" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒè®¾ç½®">ç¯å¢ƒè®¾ç½®<a href="#ç¯å¢ƒè®¾ç½®" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†æ¼”ç¤ºç½‘ç»œæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ï¼Œæˆ‘ä»¬å‡è®¾é›†ç¾¤å…·æœ‰<a href="#%E9%AA%8C%E8%AF%81%E6%8B%93%E6%89%91%E9%85%8D%E7%BD%AE">éªŒè¯æ‹“æ‰‘é…ç½®</a>éƒ¨åˆ†æ‰€ç¤ºçš„æ‹“æ‰‘é…ç½®ï¼š</p><ul><li>æ€»å…± 12 ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆnode-0 åˆ° node-11ï¼‰</li><li>3 ä¸ª Spineï¼š<ul><li>spine-0ï¼š 5 ä¸ªèŠ‚ç‚¹ï¼ˆblock-0 æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼šnode-0ã€node-1ã€node-2ï¼›block-1 æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼šnode-3ã€node-4ï¼‰</li><li>spine-1ï¼š 4 ä¸ªèŠ‚ç‚¹ï¼ˆblock-2 æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼šnode-5ã€node-6ï¼›block-3 æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼šnode-7ã€node-8ï¼‰</li><li>spine-2ï¼š 3 ä¸ªèŠ‚ç‚¹ï¼ˆblock-4 æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼šnode-9ã€node-10ã€node-11ï¼‰</li></ul></li><li>æ¯ä¸ªèŠ‚ç‚¹é…ç½®ï¼š 8 ä¸ª CPU æ ¸å¿ƒï¼Œ32 GiB å†…å­˜</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClusterTopologyLayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ SpineLayer: spine-0 (5 nodes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ BlockLayer: block-0 (node-0, node-1, node-2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ BlockLayer: block-1 (node-3, node-4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ SpineLayer: spine-1 (4 nodes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ BlockLayer: block-2 (node-5, node-6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ BlockLayer: block-3 (node-7, node-8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ SpineLayer: spine-2 (3 nodes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ BlockLayer: block-4 (node-9, node-10, node-11)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬çš„æ¼”ç¤ºå°†åŒ…æ‹¬ï¼š</p><ol><li><strong>ç¤ºä¾‹ 1</strong>ï¼š ä½¿ç”¨ <code>PreferGather</code> ç­–ç•¥å’Œ Binpack ç®—æ³•çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</li><li><strong>ç¤ºä¾‹ 2</strong>ï¼š å½“çº¦æŸæ— æ³•æ»¡è¶³æ—¶çš„ <code>MustGather</code> è°ƒåº¦å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤ºä¾‹-1-ä½¿ç”¨-prefergather-å’Œ-binpack-çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦">ç¤ºä¾‹ 1: ä½¿ç”¨ <code>PreferGather</code> å’Œ Binpack çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦<a href="#ç¤ºä¾‹-1-ä½¿ç”¨-prefergather-å’Œ-binpack-çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº† Koordinator å¦‚ä½•ä½¿ç”¨ <code>PreferGather</code> ç­–ç•¥è°ƒåº¦ Podï¼Œä»¥å®ç°<strong>æœ€ä¼˜ç½‘ç»œæ€§èƒ½</strong>å’Œ<strong>æœ€å°èµ„æºæµªè´¹</strong>ã€‚<code>PreferGather</code> ç­–ç•¥ç¡®ä¿ Pod èšé›†åœ¨åŒä¸€æ‹“æ‰‘åŸŸå†…ä»¥è·å¾—æ›´å¥½çš„ç½‘ç»œå±€éƒ¨æ€§ï¼Œè€Œ Binpack ç®—æ³•é€‰æ‹©æœ€ç´§å‡‘çš„åŸŸä»¥æœ€å°åŒ–èµ„æºç¢ç‰‡ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åœºæ™¯">åœºæ™¯<a href="#åœºæ™¯" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æˆ‘ä»¬å°†åœ¨æ‰€æœ‰ 12 ä¸ªèŠ‚ç‚¹ç©ºé—²æ—¶åˆ›å»ºä¸€ä¸ª 4 Pod è®­ç»ƒä½œä¸šï¼š</p><ul><li>æ¯ä¸ª Pod éœ€è¦ <strong>8 ä¸ª CPU æ ¸å¿ƒ</strong>ï¼ˆå ç”¨æ•´ä¸ªèŠ‚ç‚¹ï¼‰</li><li>æ€»éœ€æ±‚ï¼š 4 ä¸ª Pod = 4 ä¸ªèŠ‚ç‚¹</li><li>è°ƒåº¦å™¨åº”é€‰æ‹©æä¾›ä»¥ä¸‹å†…å®¹çš„æœ€ç´§å‡‘æ‹“æ‰‘åŸŸï¼š<ul><li><strong>æœ€ä½³ç½‘ç»œæ€§èƒ½</strong>ï¼š Pod èšé›†åœ¨åŒä¸€ Spine ä¸­ä»¥è·å¾—æ›´ä½çš„å»¶è¿Ÿå’Œæ›´é«˜çš„å¸¦å®½</li><li><strong>æœ€å°‘èµ„æºæµªè´¹</strong>ï¼š èƒ½å¤Ÿå®¹çº³æ‰€æœ‰ Pod çš„æœ€å°æ‹“æ‰‘åŸŸ</li></ul></li></ul><p><strong>é¢„æœŸç»“æœ</strong>ï¼š Pod è°ƒåº¦åˆ° <strong>spine-1</strong>ï¼ˆnode-5 åˆ° node-8ï¼‰ï¼Œè¿™æ˜¯æœ€ä¼˜é€‰æ‹©ï¼Œå› ä¸ºï¼š</p><ul><li>å®ƒæ°å¥½æœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼ˆå®Œç¾åŒ¹é…ï¼Œé›¶æµªè´¹ï¼‰</li><li>æ‰€æœ‰ Pod éƒ½åœ¨åŒä¸€ Spine ä¸­ä»¥è·å¾—æœ€ä½³ç½‘ç»œæ€§èƒ½</li><li>å…¶ä»– Spine ä¸­æ²¡æœ‰èµ„æºç¢ç‰‡</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-1-åˆ›å»ºå…·æœ‰-prefergather-ç­–ç•¥çš„-podgroup">æ­¥éª¤ 1: åˆ›å»ºå…·æœ‰ <code>PreferGather</code> ç­–ç•¥çš„ PodGroup<a href="#æ­¥éª¤-1-åˆ›å»ºå…·æœ‰-prefergather-ç­–ç•¥çš„-podgroup" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.sigs.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;gatherStrategy&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;layer&quot;: &quot;BlockLayer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;strategy&quot;: &quot;PreferGather&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;layer&quot;: &quot;SpineLayer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;strategy&quot;: &quot;PreferGather&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">minMember</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scheduleTimeoutSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-2-åˆ›å»º-4-pod-è®­ç»ƒä½œä¸š">æ­¥éª¤ 2: åˆ›å»º 4 Pod è®­ç»ƒä½œä¸š<a href="#æ­¥éª¤-2-åˆ›å»º-4-pod-è®­ç»ƒä½œä¸š" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-3-åº”ç”¨å¹¶éªŒè¯è°ƒåº¦ç»“æœ">æ­¥éª¤ 3ï¼š åº”ç”¨å¹¶éªŒè¯è°ƒåº¦ç»“æœ<a href="#æ­¥éª¤-3-åº”ç”¨å¹¶éªŒè¯è°ƒåº¦ç»“æœ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f topology-demo-job.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å‡ ç§’é’Ÿåï¼Œæ£€æŸ¥ Pod è°ƒåº¦ç»“æœï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -o wide </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> training-pod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¢„æœŸè¾“å‡º:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME            READY   STATUS    RESTARTS   AGE   IP            NODE      NOMINATED NODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">training-pod-0  1/1     Running   0          30s   10.244.5.10   node-5    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">training-pod-1  1/1     Running   0          30s   10.244.6.11   node-6    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">training-pod-2  1/1     Running   0          30s   10.244.7.10   node-7    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">training-pod-3  1/1     Running   0          30s   10.244.8.11   node-8    &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="binpack-ç®—æ³•å¦‚ä½•å·¥ä½œ">Binpack ç®—æ³•å¦‚ä½•å·¥ä½œ<a href="#binpack-ç®—æ³•å¦‚ä½•å·¥ä½œ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><strong>æ­¥éª¤ 1ï¼š è‡ªä¸‹è€Œä¸Šè®¡ç®— offerslots</strong></p><p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼ˆæ¯ä¸ª Pod éœ€è¦ 8 ä¸ª CPU æ ¸å¿ƒä»¥å ç”¨æ•´ä¸ªèŠ‚ç‚¹ï¼‰ï¼š</p><ul><li>æ‰€æœ‰èŠ‚ç‚¹ï¼ˆnode-0 åˆ° node-11ï¼‰ï¼š offerslots = 1 ï¼ˆ8 ä¸ªå¯ç”¨æ ¸å¿ƒ / æ¯ä¸ª Pod 8 ä¸ªæ ¸å¿ƒï¼‰</li></ul><p>å¯¹äºæ¯ä¸ª Blockï¼š</p><ul><li>block-0 ï¼ˆnode-0, node-1, node-2ï¼‰ï¼š offerslots = 3</li><li>block-1 ï¼ˆnode-3, node-4ï¼‰ï¼š offerslots = 2</li><li>block-2 ï¼ˆnode-5, node-6ï¼‰ï¼š offerslots = 2</li><li>block-3 ï¼ˆnode-7, node-8ï¼‰ï¼š offerslots = 2</li><li>block-4 ï¼ˆnode-9, node-10, node-11ï¼‰ï¼š offerslots = 3</li></ul><p>å¯¹äºæ¯ä¸ª Spineï¼š</p><ul><li>spine-0 ï¼ˆblock-0, block-1ï¼‰ï¼š offerslots = 5</li><li>spine-1 ï¼ˆblock-2, block-3ï¼‰ï¼š offerslots = 4</li><li>spine-2 ï¼ˆblock-4ï¼‰ï¼š offerslots = 3</li></ul><p><strong>æ­¥éª¤ 2ï¼š æŸ¥æ‰¾å€™é€‰æ‹“æ‰‘èŠ‚ç‚¹</strong></p><p>æˆ‘ä»¬éœ€è¦ 4 ä¸ª Podï¼ˆ4 ä¸ª offerslotsï¼‰ã€‚åªæœ‰ spine-0ï¼ˆ5 ä¸ªæ§½ä½ï¼‰å’Œ spine-1ï¼ˆ4 ä¸ªæ§½ä½ï¼‰å¯ä»¥å®¹çº³è¯¥ä½œä¸šã€‚</p><p>åœ¨ Block çº§åˆ«ï¼Œæ²¡æœ‰å•ä¸ª block å¯ä»¥å®¹çº³æ‰€æœ‰ 4 ä¸ª Podï¼Œå› æ­¤å€™é€‰è€…åœ¨ Spine çº§åˆ«ã€‚</p><p><strong>æ­¥éª¤ 3ï¼š åº”ç”¨ Binpack ç®—æ³•</strong></p><p>åœ¨å€™é€‰ Spine ä¸­ï¼š</p><ul><li>spine-0ï¼š offerslots = 5ï¼Œ éœ€è¦ = 4ï¼Œ æµªè´¹ = 1</li><li>spine-1ï¼š offerslots = 4ï¼Œ éœ€è¦ = 4ï¼Œ æµªè´¹ = 0  â† <strong>è¢«é€‰ä¸­ï¼ˆæœ€å°æµªè´¹ï¼‰</strong></li></ul><p>Binpack ç®—æ³•é€‰æ‹© <strong>spine-1</strong>ï¼ˆnode-5 åˆ° node-8ï¼‰ï¼Œæ”¾ç½®æ‰€æœ‰ 4 ä¸ª Pod åé›¶æµªè´¹ã€‚</p><p><strong>æœ€ç»ˆæ”¾ç½®</strong>ï¼š æ‰€æœ‰ 4 ä¸ª Pod éƒ½è°ƒåº¦åˆ° <strong>spine-1</strong>ï¼ˆnode-5ã€node-6ã€node-7ã€node-8ï¼‰ï¼Œå®ç°äº†ï¼š</p><ul><li><strong>æœ€ä¼˜ç½‘ç»œæ€§èƒ½ï¼ˆ<code>PreferGather</code> æ•ˆæœï¼‰</strong>ï¼š æ‰€æœ‰ Pod éƒ½èšé›†åœ¨åŒä¸€ Spineï¼ˆspine-1ï¼‰å†…ï¼Œæœ€å°åŒ–è·¨ Spine æµé‡å¹¶æœ€å¤§åŒ– Pod é—´é€šä¿¡çš„ç½‘ç»œå¸¦å®½</li><li><strong>æœ€å°èµ„æºæµªè´¹ï¼ˆBinpack æ•ˆæœï¼‰</strong>ï¼š spine-1 æ°å¥½æœ‰ 4 ä¸ªæ§½ä½ä¾› 4 ä¸ª Pod ä½¿ç”¨ï¼ˆé›¶æµªè´¹ï¼‰ï¼Œè€Œ spine-0 ä¼šæœ‰ 1 ä¸ªæ§½ä½æµªè´¹ã€‚è¿™ä½¿å¾— spine-0 çš„æ‰€æœ‰ 5 ä¸ªèŠ‚ç‚¹éƒ½å¯ç”¨äºæœªæ¥çš„å·¥ä½œè´Ÿè½½ï¼Œé˜²æ­¢èµ„æºç¢ç‰‡</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤ºä¾‹-2-mustgather-å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å ">ç¤ºä¾‹ 2ï¼š <code>MustGather</code> å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å <a href="#ç¤ºä¾‹-2-mustgather-å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å " class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸ºä»€ä¹ˆæŸäº›å·¥ä½œè´Ÿè½½éœ€è¦ <code>MustGather</code> ä»¥åŠæŠ¢å å¦‚ä½•éµå¾ªç½‘ç»œæ‹“æ‰‘çº¦æŸã€‚</p><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ <code>MustGather</code></strong>ï¼š åœ¨å»¶è¿Ÿæ•æ„Ÿçš„åˆ†å¸ƒå¼è®­ç»ƒåœºæ™¯ä¸­ï¼Œç½‘ç»œé€šä¿¡æ¨¡å¼å¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿã€‚å¦‚æœ Pod åˆ†æ•£åœ¨ä¸åŒçš„ Spine ä¸Šï¼Œè·¨ Spine é€šä¿¡å¼€é”€ä¼šä½¿è®­ç»ƒæ—¶é—´å¢åŠ  3-5 å€ï¼Œä½¿ä½œä¸šåœ¨ç»æµä¸Šä¸å¯è¡Œã€‚å› æ­¤ï¼Œ<strong><code>MustGather</code> ä¸ä»…ä»…æ˜¯ä¼˜åŒ–â€”â€”å®ƒæ˜¯è¿™äº›å·¥ä½œè´Ÿè½½çš„ç¡¬æ€§è¦æ±‚</strong>ã€‚</p><p><strong>æŠ¢å å¦‚ä½•éµå¾ªæ‹“æ‰‘</strong>ï¼š å½“ç”±äºèµ„æºä¸è¶³è€Œæ— æ³•æ»¡è¶³ <code>MustGather</code> çº¦æŸæ—¶ï¼ŒKoordinator æ‰§è¡Œ<strong>æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </strong>ã€‚è¿™æ„å‘³ç€ï¼š</p><ol><li>è°ƒåº¦å™¨è¯†åˆ«éœ€è¦æŠ¢å å“ªäº›ä½ä¼˜å…ˆçº§ Pod</li><li>æŠ¢å å†³ç­–éµå¾ªä¸è°ƒåº¦ç›¸åŒçš„æ‹“æ‰‘çº¦æŸ</li><li>è°ƒåº¦å™¨ç¡®ä¿é‡Šæ”¾çš„èµ„æºå¯ä»¥æ»¡è¶³ <code>MustGather</code> è¦æ±‚</li><li>é€šè¿‡ <code>nominatedNode</code> é¢„ç•™èµ„æºä»¥é˜²æ­¢å…¶ä»– Pod çªƒå–å®ƒä»¬</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åœºæ™¯-1">åœºæ™¯<a href="#åœºæ™¯-1" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ­¤ç¤ºä¾‹å±•ç¤ºäº†ä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>ä½ä¼˜å…ˆçº§ Pod å ç”¨ node-0ã€node-1 å’Œ node-5ï¼ˆæ¯ä¸ª Pod å ç”¨æ•´ä¸ªèŠ‚ç‚¹ï¼‰</li><li>æäº¤ä¸€ä¸ªå…·æœ‰ <code>MustGather</code> åˆ° SpineLayer çš„é«˜ä¼˜å…ˆçº§ 4 Pod ä½œä¸šï¼ˆæ¯ä¸ª Pod å ç”¨æ•´ä¸ªèŠ‚ç‚¹ï¼‰</li><li><strong>æ²¡æœ‰å•ä¸ª Spine åœ¨ä¸æŠ¢å çš„æƒ…å†µä¸‹æ‹¥æœ‰ 4 ä¸ªå¯ç”¨èŠ‚ç‚¹</strong></li><li>Koordinator æ‰§è¡Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å ï¼šæŠ¢å  node-5 ä¸Šçš„ Pod å¹¶å°†æ‰€æœ‰ 4 ä¸ªé«˜ä¼˜å…ˆçº§ Pod è°ƒåº¦åˆ° node-5 åˆ° node-8ï¼ˆåœ¨ spine-1 å†…ï¼‰ï¼Œ<strong>åœ¨æ•´ä¸ªæŠ¢å è¿‡ç¨‹ä¸­ç»´æŠ¤ <code>MustGather</code> çº¦æŸ</strong></li></ol><ul><li>3 ä¸ªä½ä¼˜å…ˆçº§ Pod å·²åœ¨ node-0ã€node-1 å’Œ node-5 ä¸Šè¿è¡Œï¼ˆæ¯ä¸ªå ç”¨ 8 æ ¸å¿ƒçš„æ•´ä¸ªèŠ‚ç‚¹ï¼‰</li><li>ä¸€ä¸ªå…·æœ‰ä¸¥æ ¼ç½‘ç»œè¦æ±‚çš„é«˜ä¼˜å…ˆçº§ 4 Pod è®­ç»ƒä½œä¸šï¼š<ul><li><strong>éœ€è¦ <code>MustGather</code></strong> åˆ° SpineLayerï¼šè·¨ Spine å»¶è¿Ÿä¼šä½¿æ€§èƒ½é™ä½ 3-5 å€</li><li>æ¯ä¸ª Pod éœ€è¦ <strong>8 ä¸ª CPU æ ¸å¿ƒ</strong>ï¼ˆå ç”¨æ•´ä¸ªèŠ‚ç‚¹ï¼‰</li></ul></li><li><strong>å½“å‰çŠ¶æ€</strong>ï¼š æ²¡æœ‰å•ä¸ª Spine æ‹¥æœ‰ 4 ä¸ªå¯ç”¨èŠ‚ç‚¹<ul><li>spine-0ï¼š 3 ä¸ªå¯ç”¨èŠ‚ç‚¹ï¼ˆnode-2ã€node-3ã€node-4ï¼‰ - node-0ã€node-1 è¢«å ç”¨</li><li>spine-1ï¼š 3 ä¸ªå¯ç”¨èŠ‚ç‚¹ï¼ˆnode-6ã€node-7ã€node-8ï¼‰ - node-5 è¢«å ç”¨</li><li>spine-2ï¼š 3 ä¸ªå¯ç”¨èŠ‚ç‚¹ï¼ˆnode-9ã€node-10ã€node-11ï¼‰</li></ul></li></ul><p><strong>é¢„æœŸç»“æœ</strong>ï¼š è°ƒåº¦å™¨æ‰§è¡Œ<strong>æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </strong>ï¼ŒæŠ¢å  node-5 ä¸Šçš„ä½ä¼˜å…ˆçº§ Pod ä»¥æ»¡è¶³ <code>MustGather</code> çº¦æŸï¼Œå¹¶å°†æ‰€æœ‰ 4 ä¸ªé«˜ä¼˜å…ˆçº§ Pod è°ƒåº¦åˆ° <strong>spine-1</strong>ï¼ˆnode-5 åˆ° node-8ï¼‰ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-1-å®šä¹‰-priorityclass">æ­¥éª¤ 1ï¼š å®šä¹‰ PriorityClass<a href="#æ­¥éª¤-1-å®šä¹‰-priorityclass" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PriorityClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;High priority for critical training jobs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PriorityClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Low priority for best-effort jobs&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f priorityclasses.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-2-åœ¨-node-0node-1-å’Œ-node-5-ä¸Šåˆ›å»ºä½ä¼˜å…ˆçº§-pod">æ­¥éª¤ 2ï¼š åœ¨ node-0ã€node-1 å’Œ node-5 ä¸Šåˆ›å»ºä½ä¼˜å…ˆçº§ Pod<a href="#æ­¥éª¤-2-åœ¨-node-0node-1-å’Œ-node-5-ä¸Šåˆ›å»ºä½ä¼˜å…ˆçº§-pod" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f low-priority-pods.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>éªŒè¯ Pod æ­£åœ¨è¿è¡Œï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -o wide</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  READY   STATUS    RESTARTS   AGE   IP            NODE     NOMINATED NODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-0    1/1     Running   0          10s   10.244.0.10   node-0   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-1    1/1     Running   0          10s   10.244.1.10   node-1   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-5    1/1     Running   0          10s   10.244.5.10   node-5   &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-3-åˆ›å»ºå…·æœ‰-mustgather-åˆ°-spinelayer-çš„é«˜ä¼˜å…ˆçº§ä½œä¸š">æ­¥éª¤ 3ï¼š åˆ›å»ºå…·æœ‰ <code>MustGather</code> åˆ° SpineLayer çš„é«˜ä¼˜å…ˆçº§ä½œä¸š<a href="#æ­¥éª¤-3-åˆ›å»ºå…·æœ‰-mustgather-åˆ°-spinelayer-çš„é«˜ä¼˜å…ˆçº§ä½œä¸š" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.sigs.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;gatherStrategy&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;layer&quot;: &quot;SpineLayer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;strategy&quot;: &quot;MustGather&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">minMember</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scheduleTimeoutSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod-group.scheduling.sigs.k8s.io</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priorityClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curlimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 365d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 32Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-4-åº”ç”¨å¹¶è§‚å¯ŸæŠ¢å ">æ­¥éª¤ 4ï¼š åº”ç”¨å¹¶è§‚å¯ŸæŠ¢å <a href="#æ­¥éª¤-4-åº”ç”¨å¹¶è§‚å¯ŸæŠ¢å " class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f high-priority-training.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æäº¤åç«‹å³æ£€æŸ¥ Pod çŠ¶æ€ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -o wide</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æŠ¢å æœŸé—´çš„é¢„æœŸè¾“å‡ºï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  READY   STATUS        RESTARTS   AGE   IP            NODE     NOMINATED NODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-0    1/1     Running       0          2m    10.244.0.10   node-0   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-1    1/1     Running       0          2m    10.244.1.10   node-1   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-5    0/1     Terminating   0          2m    10.244.5.10   node-5   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-0     0/1     Pending       0          10s   &lt;none&gt;        &lt;none&gt;   node-5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-1     0/1     Pending       0          10s   &lt;none&gt;        &lt;none&gt;   node-6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-2     0/1     Pending       0          10s   &lt;none&gt;        &lt;none&gt;   node-7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-3     0/1     Pending       0          10s   &lt;none&gt;        &lt;none&gt;   node-8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>ç†è§£æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å æœŸé—´çš„è°ƒåº¦å™¨æ¶ˆæ¯</strong></p><p>åœ¨æŠ¢å è¿›è¡Œä¸­ï¼ˆåœ¨å—å®³ Pod å®Œå…¨ç»ˆæ­¢ä¹‹å‰ï¼‰ï¼Œé«˜ä¼˜å…ˆçº§ Pod å°†å¤„äº <code>Pending</code> çŠ¶æ€ã€‚æ‚¨å¯ä»¥æ£€æŸ¥è¯¦ç»†çš„è°ƒåº¦å™¨æ¶ˆæ¯ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pod hp-training-pod-0 -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pod çŠ¶æ€å°†åŒ…å«è¯´æ˜ä¸ºä»€ä¹ˆè°ƒåº¦æ­£åœ¨ç­‰å¾…çš„ä¿¡æ¯æ€§æ¶ˆæ¯ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-10-23T07:35:30Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;0/12 nodes are available</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> no candidate topology nodes can accommodate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      job</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">desiredOfferSlot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">topology topologyNode SpineLayer/spine-0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3;topology</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">topologyNode SpineLayer/spine-1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">3;topology topologyNode SpineLayer/spine-2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">3. preemption</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> not eligible due to terminating pod on the nominated node..&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Unschedulable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodScheduled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nominatedNodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">phase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pending</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>æ¶ˆæ¯ä¸­çš„å…³é”®ä¿¡æ¯:</strong></p><ol><li><p><strong>æ‹“æ‰‘çº¦æŸè¯„ä¼°</strong>: <code>no candidate topology nodes can accommodate job, desiredOfferSlot: 4</code></p><ul><li>ä½œä¸šéœ€è¦åœ¨å•ä¸ªæ‹“æ‰‘åŸŸå†…æœ‰ 4 ä¸ªæ§½ä½(èŠ‚ç‚¹)</li></ul></li><li><p><strong>æ¯ä¸ª Spine çš„å¯ç”¨æ€§</strong>: </p><ul><li><code>topology topologyNode SpineLayer/spine-0: 3</code> - åªæœ‰ 3 ä¸ªå¯ç”¨èŠ‚ç‚¹</li><li><code>topology topologyNode SpineLayer/spine-1: 3</code> - åªæœ‰ 3 ä¸ªå¯ç”¨èŠ‚ç‚¹</li><li><code>topology topologyNode SpineLayer/spine-2: 3</code> - åªæœ‰ 3 ä¸ªå¯ç”¨èŠ‚ç‚¹</li><li><strong>æ²¡æœ‰ä»»ä½• Spine å¯ä»¥åœ¨ä¸æŠ¢å çš„æƒ…å†µä¸‹æ»¡è¶³ <code>MustGather</code> è¦æ±‚</strong></li></ul></li><li><p><strong>æŠ¢å çŠ¶æ€</strong>: <code>preemption: not eligible due to terminating pod on the nominated node</code></p><ul><li>å·²ä¸º node-5 ä¸Šçš„ low-priority-pod-5 è§¦å‘æŠ¢å </li><li>è°ƒåº¦å™¨æ­£åœ¨ç­‰å¾…å—å®³ Pod å®Œå…¨ç»ˆæ­¢</li><li>èµ„æºå·²é€šè¿‡ <code>nominatedNodeName: node-5</code> é¢„ç•™</li></ul></li><li><p><strong>GangGroup åè°ƒ</strong>: å…¶ä»–æˆå‘˜ Pod(hp-training-pod-1ã€hp-training-pod-2ã€hp-training-pod-3)å°†æ˜¾ç¤ºç±»ä¼¼æ¶ˆæ¯,è¡¨æ˜å®ƒä»¬ç”±äº GangGroup çº¦æŸè€Œç­‰å¾…:</p></li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;GangGroup &quot;default/high</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">priority</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training&quot; gets rejected due to member Pod </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;default/hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0&quot; is unschedulable with reason &quot;no candidate topology nodes </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  can accommodate job</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">desiredOfferSlot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 4</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">alreadyWaitForBound</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">0. preemption</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  preemption already attempted by default/hp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0 with message not eligible </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  due to terminating pod on the nominated node..&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤æ¶ˆæ¯ç¡®è®¤:</p><ul><li>GangGroup ä¸­çš„æ‰€æœ‰ Pod ä¸€èµ·ç­‰å¾…(gang è°ƒåº¦è¯­ä¹‰)</li><li>æŠ¢å åœ¨ä½œä¸šçº§åˆ«åè°ƒ</li><li>åœ¨æ•´ä¸ªæŠ¢å è¿‡ç¨‹ä¸­å¼ºåˆ¶æ‰§è¡Œæ‹“æ‰‘çº¦æŸ</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-5-éªŒè¯æœ€ç»ˆè°ƒåº¦ç»“æœ">æ­¥éª¤ 5: éªŒè¯æœ€ç»ˆè°ƒåº¦ç»“æœ<a href="#æ­¥éª¤-5-éªŒè¯æœ€ç»ˆè°ƒåº¦ç»“æœ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨ node-5 ä¸Šçš„ä½ä¼˜å…ˆçº§ Pod ç»ˆæ­¢å,å†æ¬¡æ£€æŸ¥:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -o wide</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¢„æœŸçš„æœ€ç»ˆè¾“å‡º:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  READY   STATUS    RESTARTS   AGE   IP            NODE     NOMINATED NODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-0    1/1     Running   0          3m    10.244.0.10   node-0   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">low-priority-pod-1    1/1     Running   0          3m    10.244.1.10   node-1   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-0     1/1     Running   0          45s   10.244.5.20   node-5   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-1     1/1     Running   0          45s   10.244.6.20   node-6   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-2     1/1     Running   0          45s   10.244.7.20   node-7   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hp-training-pod-3     1/1     Running   0          45s   10.244.8.20   node-8   &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å å¦‚ä½•å·¥ä½œ">æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å å¦‚ä½•å·¥ä½œ<a href="#æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å å¦‚ä½•å·¥ä½œ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><strong>æ­¥éª¤ 1: è¯†åˆ«æ‹“æ‰‘è¦æ±‚å¹¶éªŒè¯ <code>MustGather</code> çº¦æŸ</strong></p><p>é«˜ä¼˜å…ˆçº§ä½œä¸šè¦æ±‚æ‰€æœ‰ 4 ä¸ª Pod éƒ½åœ¨åŒä¸€ä¸ª Spine ä¸­(<code>MustGather</code> åˆ° SpineLayer)ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>ç¡¬çº¦æŸ</strong>â€”â€”å¦‚æœä¸æ»¡è¶³æ­¤è¦æ±‚,ä½œä¸šå°†æ— æ³•è¿è¡Œã€‚æ¯ä¸ª Pod éœ€è¦ 8 ä¸ª CPU æ ¸å¿ƒ(æ•´ä¸ªèŠ‚ç‚¹)ã€‚</p><p><strong>æ­¥éª¤ 2: è¯„ä¼°æ¯ä¸ª Spine çš„å¯ç”¨èµ„æº(éµå¾ªæ‹“æ‰‘)</strong></p><p>å½“å‰é›†ç¾¤çŠ¶æ€:</p><ul><li>spine-0 (5 ä¸ªèŠ‚ç‚¹):<ul><li>node-0: è¢« low-priority-pod-0 å ç”¨(8 æ ¸å¿ƒå·²ä½¿ç”¨,0 æ ¸å¿ƒå¯ç”¨)</li><li>node-1: è¢« low-priority-pod-1 å ç”¨(8 æ ¸å¿ƒå·²ä½¿ç”¨,0 æ ¸å¿ƒå¯ç”¨)</li><li>node-2: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-3: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-4: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>æ€»è®¡: 3 ä¸ªèŠ‚ç‚¹å¯ç”¨(ä½œä¸šéœ€è¦ 4 ä¸ª)</li></ul></li><li>spine-1 (4 ä¸ªèŠ‚ç‚¹):<ul><li>node-5: è¢« low-priority-pod-5 å ç”¨(8 æ ¸å¿ƒå·²ä½¿ç”¨,0 æ ¸å¿ƒå¯ç”¨)</li><li>node-6: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-7: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-8: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>æ€»è®¡: 3 ä¸ªèŠ‚ç‚¹å¯ç”¨(ä½œä¸šéœ€è¦ 4 ä¸ª)</li></ul></li><li>spine-2 (3 ä¸ªèŠ‚ç‚¹):<ul><li>node-9: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-10: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>node-11: å¯ç”¨(8 æ ¸å¿ƒ)</li><li>æ€»è®¡: 3 ä¸ªèŠ‚ç‚¹å¯ç”¨(å³ä½¿æŠ¢å ä¹Ÿæ— æ³•å®¹çº³ 4 ä¸ª Pod)</li></ul></li></ul><p><strong>å…³é”®è§‚å¯Ÿ</strong>: æ²¡æœ‰å•ä¸ª Spine åœ¨ä¸æŠ¢å çš„æƒ…å†µä¸‹æ‹¥æœ‰è¶³å¤Ÿçš„å¯ç”¨èµ„æºã€‚<strong>è°ƒåº¦å™¨å¿…é¡»æ‰§è¡Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å ä»¥æ»¡è¶³ <code>MustGather</code> çº¦æŸã€‚</strong></p><p><strong>æ­¥éª¤ 3: ç¡®å®šæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å ç­–ç•¥</strong></p><p>è°ƒåº¦å™¨åœ¨<strong>éµå¾ª SpineLayer æ‹“æ‰‘çº¦æŸ</strong>çš„åŒæ—¶è¯„ä¼°æœ€å°æŠ¢å é€‰é¡¹:</p><ul><li><strong>spine-0</strong>: éœ€è¦æŠ¢å  1 ä¸ªèŠ‚ç‚¹(node-0 æˆ– node-1),ç»“æœæœ‰ 4 ä¸ªå¯ç”¨èŠ‚ç‚¹<ul><li>æŠ¢å æ•°é‡: 1 ä¸ª Pod</li><li>æŠ¢å å: å¯ä»¥æ»¡è¶³ <code>MustGather</code> åˆ° SpineLayer</li></ul></li><li><strong>spine-1</strong>: éœ€è¦æŠ¢å  1 ä¸ªèŠ‚ç‚¹(node-5),ç»“æœæœ‰ 4 ä¸ªå¯ç”¨èŠ‚ç‚¹<ul><li>æŠ¢å æ•°é‡: 1 ä¸ª Pod</li><li>æŠ¢å å: å¯ä»¥æ»¡è¶³ <code>MustGather</code> åˆ° SpineLayer</li></ul></li><li><strong>spine-2</strong>: æ— æ³•å®¹çº³ 4 ä¸ª Pod(æ€»å…±åªæœ‰ 3 ä¸ªèŠ‚ç‚¹)<ul><li>ä¸æ˜¯æœ‰æ•ˆå€™é€‰è€…</li></ul></li></ul><p>spine-0 å’Œ spine-1 éƒ½éœ€è¦ç›¸åŒæ•°é‡çš„æŠ¢å (1 ä¸ª Pod)ã€‚Binpack ç®—æ³•é€‰æ‹© <strong>spine-1</strong>,å› ä¸º:</p><ol><li>å®ƒæ°å¥½æœ‰ 4 ä¸ªèŠ‚ç‚¹(å®Œç¾åŒ¹é…,é›¶æµªè´¹)</li><li>æŠ¢å  node-5 å: spine-1 ä¸­çš„æ‰€æœ‰ 4 ä¸ªèŠ‚ç‚¹éƒ½å˜ä¸ºå¯ç”¨</li><li>è¿™ä»¥æœ€å°çš„å¹²æ‰°æ»¡è¶³äº† <code>MustGather</code> çº¦æŸ</li></ol><p><strong>æ­¥éª¤ 4: æ‰§è¡Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </strong></p><p>Koordinator åœ¨<strong>ç»´æŠ¤æ‹“æ‰‘çº¦æŸ</strong>çš„åŒæ—¶æ‰§è¡ŒæŠ¢å :</p><ol><li>æ ‡è®° low-priority-pod-5 è¿›è¡ŒæŠ¢å (è®¾ç½® DisruptionTarget æ¡ä»¶)</li><li>ä¸ºæ‰€æœ‰ 4 ä¸ªé«˜ä¼˜å…ˆçº§ Pod è®¾ç½® <code>nominatedNode</code> åˆ° <strong>spine-1 å†…</strong>çš„èŠ‚ç‚¹(node-5 åˆ° node-8)<ul><li>è¿™ç¡®ä¿åœ¨èµ„æºé¢„ç•™æœŸé—´ä¿ç•™æ‹“æ‰‘çº¦æŸ</li></ul></li><li>åˆ é™¤ low-priority-pod-5</li><li>å°†æ‰€æœ‰é«˜ä¼˜å…ˆçº§ Pod è°ƒåº¦åˆ° spine-1,<strong>æ»¡è¶³ <code>MustGather</code> çº¦æŸ</strong></li></ol><p><strong>å…³é”®è¦ç‚¹:</strong></p><ol><li><p><strong><code>MustGather</code> æ˜¯ç¡¬æ€§è¦æ±‚</strong>: å¯¹äºå¼ é‡å¹¶è¡Œè®­ç»ƒç­‰å»¶è¿Ÿæ•æ„Ÿçš„å·¥ä½œè´Ÿè½½,<code>MustGather</code> ä¸æ˜¯å¯é€‰çš„â€”â€”å®ƒå¯¹äºå¯æ¥å—çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚è·¨ Spine é€šä¿¡ä¼šä½¿ä½œä¸šé€Ÿåº¦é™ä½ 3-5 å€ã€‚</p></li><li><p><strong>æŠ¢å éµå¾ªæ‹“æ‰‘çº¦æŸ</strong>: å½“å¯ç”¨èµ„æºæ— æ³•æ»¡è¶³ <code>MustGather</code> æ—¶,è°ƒåº¦å™¨æ‰§è¡Œ<strong>æ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </strong>ã€‚å®ƒ<strong>åœ¨æ¯ä¸ªæ‹“æ‰‘åŸŸ</strong>(Spine)å†…åˆ†åˆ«è¯„ä¼°æŠ¢å å€™é€‰è€…,ç¡®ä¿æœ€ç»ˆæ”¾ç½®æ»¡è¶³æ‹“æ‰‘è¦æ±‚ã€‚</p></li><li><p><strong>æœ€å°å¹²æ‰°</strong>: è°ƒåº¦å™¨ä»…æŠ¢å äº† 1 ä¸ª Pod(æ»¡è¶³ <code>MustGather</code> çº¦æŸæ‰€éœ€çš„æœ€å°æ•°é‡),é€‰æ‹© spine-1 æ˜¯å› ä¸ºå®ƒæ˜¯å®Œç¾åŒ¹é…(4 ä¸ªèŠ‚ç‚¹ä¾› 4 ä¸ª Pod ä½¿ç”¨)ã€‚</p></li><li><p><strong>èµ„æºé¢„ç•™ç»´æŠ¤æ‹“æ‰‘</strong>: <code>nominatedNode</code> æœºåˆ¶åœ¨<strong>æ‰€é€‰æ‹“æ‰‘åŸŸ</strong>(spine-1)å†…é¢„ç•™èµ„æº,é˜²æ­¢å…¶ä»– Pod åœ¨æŠ¢å è¿‡ç¨‹ä¸­ç ´åæ‹“æ‰‘çº¦æŸã€‚</p></li><li><p><strong>ç«¯åˆ°ç«¯æ‹“æ‰‘ä¿è¯</strong>: ä»æŠ¢å å†³ç­–é€šè¿‡èµ„æºé¢„ç•™åˆ°æœ€ç»ˆè°ƒåº¦,æ•´ä¸ªè¿‡ç¨‹éƒ½ç»´æŠ¤ <code>MustGather</code> çº¦æŸ,ç¡®ä¿æ‰€æœ‰ 4 ä¸ª Pod éƒ½æ”¾ç½®åœ¨ spine-1 å†…ã€‚</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é«˜çº§é…ç½®">é«˜çº§é…ç½®<a href="#é«˜çº§é…ç½®" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‹“æ‰‘å±‚å‘½åçº¦å®š">æ‹“æ‰‘å±‚å‘½åçº¦å®š<a href="#æ‹“æ‰‘å±‚å‘½åçº¦å®š" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å»ºè®®ä½¿ç”¨æ¸…æ™°çš„å‘½åçº¦å®šæ¥è¯†åˆ«æ‹“æ‰‘å±‚:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># æ¨èçš„å±‚å‘½å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NodeTopologyLayer       </span><span class="token comment" style="color:#999988;font-style:italic"># èŠ‚ç‚¹å±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AcceleratorLayer        </span><span class="token comment" style="color:#999988;font-style:italic"># åŠ é€Ÿå™¨äº’è¿å±‚(ä¾‹å¦‚ NVLink)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BlockLayer              </span><span class="token comment" style="color:#999988;font-style:italic"># Block äº¤æ¢æœºå±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SpineLayer              </span><span class="token comment" style="color:#999988;font-style:italic"># Spine äº¤æ¢æœºå±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DatacenterLayer         </span><span class="token comment" style="color:#999988;font-style:italic"># æ•°æ®ä¸­å¿ƒå±‚</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‹“æ‰‘ç­–ç•¥é€‰æ‹©æŒ‡å—">æ‹“æ‰‘ç­–ç•¥é€‰æ‹©æŒ‡å—<a href="#æ‹“æ‰‘ç­–ç•¥é€‰æ‹©æŒ‡å—" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><table><thead><tr><th>ç­–ç•¥</th><th>ç”¨ä¾‹</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td><code>PreferGather</code></td><td>æ‹“æ‰‘å±‚éœ€è¦è‰¯å¥½çš„ç½‘ç»œæ€§èƒ½ä½†å¯ä»¥å®¹å¿ä¸€äº›åˆ†æ•£</td><td>å°½å¯èƒ½èšé›†,ä½†å½“èµ„æºä¸è¶³æ—¶å…è®¸åˆ†æ•£</td></tr><tr><td><code>MustGather</code></td><td>æ‹“æ‰‘å±‚å…·æœ‰ä¸¥æ ¼çš„ç½‘ç»œå¸¦å®½è¦æ±‚</td><td>å¿…é¡»åœ¨æŒ‡å®šå±‚ä¸­èšé›†,å¦åˆ™è°ƒåº¦å¤±è´¥</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤š-podgroup-åè°ƒè°ƒåº¦">å¤š PodGroup åè°ƒè°ƒåº¦<a href="#å¤š-podgroup-åè°ƒè°ƒåº¦" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äºåŒ…å« master å’Œ worker çš„å¤æ‚è®­ç»ƒä½œä¸š,ä½¿ç”¨ <code>GangGroup</code> è¯­ä¹‰:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.sigs.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      [&quot;default/llm-master&quot;, &quot;default/llm-worker&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/network-topology-spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;gatherStrategy&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;layer&quot;: &quot;SpineLayer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;strategy&quot;: &quot;MustGather&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¡®ä¿æ‰€æœ‰ç›¸å…³çš„ PodGroup ä½¿ç”¨ç›¸åŒçš„ <code>gang.scheduling.koordinator.sh/groups</code> å’Œ <code>gang.scheduling.koordinator.sh/network-topology-spec</code> æ³¨è§£ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ•…éšœæ’æŸ¥">æ•…éšœæ’æŸ¥<a href="#æ•…éšœæ’æŸ¥" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod-å¡åœ¨-pending-çŠ¶æ€">Pod å¡åœ¨ Pending çŠ¶æ€<a href="#pod-å¡åœ¨-pending-çŠ¶æ€" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>å¯èƒ½åŸå› </strong>: ç½‘ç»œæ‹“æ‰‘çº¦æŸè¿‡äºä¸¥æ ¼,æ²¡æœ‰è¶³å¤Ÿçš„èŠ‚ç‚¹æ»¡è¶³è¦æ±‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>: </p><ul><li>æ£€æŸ¥é›†ç¾¤æ‹“æ‰‘é…ç½®: <code>kubectl get clusternetworktopology default -o yaml</code></li><li>æ”¾å®½æ‹“æ‰‘ç­–ç•¥,å°† <code>MustGather</code> æ›´æ”¹ä¸º <code>PreferGather</code></li><li>æ·»åŠ é›†ç¾¤èŠ‚ç‚¹æˆ–è°ƒæ•´èŠ‚ç‚¹æ‹“æ‰‘æ ‡ç­¾</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦æœªç”Ÿæ•ˆ">æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦æœªç”Ÿæ•ˆ<a href="#æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦æœªç”Ÿæ•ˆ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ•…éšœæ’æŸ¥æ­¥éª¤</strong>:</p><ol><li>éªŒè¯ Koord-Scheduler æ˜¯å¦å¯ç”¨äº†ç½‘ç»œæ‹“æ‰‘æ’ä»¶:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n koordinator-system get cm koord-scheduler-config -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å…·æœ‰æ­£ç¡®çš„æ‹“æ‰‘æ ‡ç­¾:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes --show-labels </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> network.topology</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>æ£€æŸ¥ ClusterNetworkTopology çŠ¶æ€:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get clusternetworktopology default -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ¢å æœªæŒ‰é¢„æœŸå‘ç”Ÿ">æŠ¢å æœªæŒ‰é¢„æœŸå‘ç”Ÿ<a href="#æŠ¢å æœªæŒ‰é¢„æœŸå‘ç”Ÿ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ£€æŸ¥</strong>:</p><ol><li>ç¡®è®¤ PriorityClass é…ç½®æ­£ç¡®</li><li>æ£€æŸ¥ Pod çš„ <code>preemptionPolicy</code> è®¾ç½®</li><li>æŸ¥çœ‹è°ƒåº¦å™¨æ—¥å¿—:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n koordinator-system logs -l </span><span class="token assign-left variable" style="color:#36acaa">component</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">koord-scheduler --tail</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ<a href="#æœ€ä½³å®è·µ" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li><p><strong>ä» <code>PreferGather</code> ç­–ç•¥å¼€å§‹</strong>: å¯¹äºåˆå§‹éƒ¨ç½²,ä½¿ç”¨ <code>PreferGather</code> äº†è§£ Pod æ”¾ç½®æ¨¡å¼,ç„¶åå†åº”ç”¨ä¸¥æ ¼çš„ <code>MustGather</code> çº¦æŸ</p></li><li><p><strong>ä¸ºåˆ†å¸ƒå¼è®­ç»ƒä½¿ç”¨æ‹“æ‰‘ç´¢å¼•</strong>: å§‹ç»ˆåˆ†é… <code>gang.scheduling.koordinator.sh/network-topology-index</code> æ³¨è§£,ä»¥åœ¨æ•°æ®å¹¶è¡Œä½œä¸šä¸­å»ºç«‹æ¸…æ™°çš„é€šä¿¡æ¨¡å¼</p></li><li><p><strong>é€‰æ‹©é€‚å½“çš„æ‹“æ‰‘å±‚</strong>:</p><ul><li>å¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„æ¨ç†æœåŠ¡: <code>MustGather</code> + <code>BlockLayer</code></li><li>å¯¹äºå¤§è§„æ¨¡ LLM è®­ç»ƒ: <code>MustGather</code> + <code>SpineLayer</code></li><li>å¯¹äºä¸€èˆ¬åˆ†å¸ƒå¼è®­ç»ƒ: è·¨å¤šä¸ªå±‚çš„ <code>PreferGather</code> ç»„åˆ</li></ul></li><li><p><strong>ä¸ºå…³é”®å·¥ä½œè´Ÿè½½ç»“åˆä¼˜å…ˆçº§</strong>: ä¸ºç”Ÿäº§è®­ç»ƒä½œä¸šè®¾ç½®é«˜ä¼˜å…ˆçº§,ä»¥ç¡®ä¿å®ƒä»¬å¯ä»¥åœ¨ç»´æŠ¤æ‹“æ‰‘çº¦æŸçš„åŒæ—¶æŠ¢å ä½ä¼˜å…ˆçº§ä½œä¸š</p></li><li><p><strong>ç›‘æ§æ‹“æ‰‘åˆ†å¸ƒ</strong>: å®šæœŸæ£€æŸ¥ Pod æ”¾ç½®æ¨¡å¼,å¹¶æ ¹æ®å®é™…ç½‘ç»œæ€§èƒ½æŒ‡æ ‡è°ƒæ•´æ‹“æ‰‘ç­–ç•¥</p></li><li><p><strong>è§„åˆ’æŠ¢å åœºæ™¯</strong>: ä½¿ç”¨ <code>MustGather</code> æ—¶,ç¡®ä¿è‡³å°‘ä¸€ä¸ªæ‹“æ‰‘åŸŸä¸­æœ‰è¶³å¤Ÿçš„å®¹é‡,ä»¥é¿å…è°ƒåº¦å¤±è´¥</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a href="#å‚è€ƒèµ„æ–™" class="hash-link" aria-label="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><a href="/zh-Hans/docs/architecture/job">Job æ¶æ„</a></li><li><a href="/zh-Hans/docs/user-manuals/job-level-preemption">Job çº§åˆ«æŠ¢å </a></li><li><a href="/zh-Hans/docs/user-manuals/gang-scheduling">Gang è°ƒåº¦</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20250611-networktopology-aware-scheduling.md" target="_blank" rel="noopener noreferrer">ç½‘ç»œæ‹“æ‰‘ææ¡ˆ</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/koordinator-sh/koordinator.sh/edit/main/docs/user-manuals/network-topology-aware-scheduling.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">æœ€å<!-- -->ç”± <b>ä¹”æ™®</b> <!-- -->äº <b><time datetime="2025-10-31T06:33:09.000Z">2025å¹´10æœˆ31æ—¥</time></b> <!-- -->æ›´æ–°</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-Hans/docs/user-manuals/job-level-preemption"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Job çº§åˆ«æŠ¢å </div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-Hans/docs/user-manuals/capacity-scheduling"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">Capacity Scheduling - Elastic Quota Management</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç®€ä»‹" class="table-of-contents__link toc-highlight">ç®€ä»‹</a></li><li><a href="#å‰ç½®æ¡ä»¶" class="table-of-contents__link toc-highlight">å‰ç½®æ¡ä»¶</a></li><li><a href="#éªŒè¯ç½‘ç»œæ‹“æ‰‘æ”¯æŒæ˜¯å¦å¯ç”¨" class="table-of-contents__link toc-highlight">éªŒè¯ç½‘ç»œæ‹“æ‰‘æ”¯æŒæ˜¯å¦å¯ç”¨</a><ul><li><a href="#æ£€æŸ¥-koord-scheduler-å¯åŠ¨å‚æ•°" class="table-of-contents__link toc-highlight">æ£€æŸ¥ koord-scheduler å¯åŠ¨å‚æ•°</a></li><li><a href="#æ£€æŸ¥-coscheduling-æ’ä»¶é…ç½®" class="table-of-contents__link toc-highlight">æ£€æŸ¥ Coscheduling æ’ä»¶é…ç½®</a></li></ul></li><li><a href="#é…ç½®ç½‘ç»œæ‹“æ‰‘" class="table-of-contents__link toc-highlight">é…ç½®ç½‘ç»œæ‹“æ‰‘</a><ul><li><a href="#ä¸ºèŠ‚ç‚¹æ·»åŠ æ‹“æ‰‘ä¿¡æ¯æ ‡ç­¾" class="table-of-contents__link toc-highlight">ä¸ºèŠ‚ç‚¹æ·»åŠ æ‹“æ‰‘ä¿¡æ¯æ ‡ç­¾</a></li><li><a href="#åˆ›å»º-clusternetworktopology" class="table-of-contents__link toc-highlight">åˆ›å»º ClusterNetworkTopology</a></li><li><a href="#éªŒè¯æ‹“æ‰‘é…ç½®" class="table-of-contents__link toc-highlight">éªŒè¯æ‹“æ‰‘é…ç½®</a></li></ul></li><li><a href="#ä½¿ç”¨ç¤ºä¾‹" class="table-of-contents__link toc-highlight">ä½¿ç”¨ç¤ºä¾‹</a><ul><li><a href="#ç¯å¢ƒè®¾ç½®" class="table-of-contents__link toc-highlight">ç¯å¢ƒè®¾ç½®</a></li><li><a href="#ç¤ºä¾‹-1-ä½¿ç”¨-prefergather-å’Œ-binpack-çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦" class="table-of-contents__link toc-highlight">ç¤ºä¾‹ 1: ä½¿ç”¨ <code>PreferGather</code> å’Œ Binpack çš„æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦</a></li><li><a href="#ç¤ºä¾‹-2-mustgather-å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å " class="table-of-contents__link toc-highlight">ç¤ºä¾‹ 2ï¼š <code>MustGather</code> å’Œæ‹“æ‰‘æ„ŸçŸ¥æŠ¢å </a></li></ul></li><li><a href="#é«˜çº§é…ç½®" class="table-of-contents__link toc-highlight">é«˜çº§é…ç½®</a><ul><li><a href="#æ‹“æ‰‘å±‚å‘½åçº¦å®š" class="table-of-contents__link toc-highlight">æ‹“æ‰‘å±‚å‘½åçº¦å®š</a></li><li><a href="#æ‹“æ‰‘ç­–ç•¥é€‰æ‹©æŒ‡å—" class="table-of-contents__link toc-highlight">æ‹“æ‰‘ç­–ç•¥é€‰æ‹©æŒ‡å—</a></li><li><a href="#å¤š-podgroup-åè°ƒè°ƒåº¦" class="table-of-contents__link toc-highlight">å¤š PodGroup åè°ƒè°ƒåº¦</a></li></ul></li><li><a href="#æ•…éšœæ’æŸ¥" class="table-of-contents__link toc-highlight">æ•…éšœæ’æŸ¥</a><ul><li><a href="#pod-å¡åœ¨-pending-çŠ¶æ€" class="table-of-contents__link toc-highlight">Pod å¡åœ¨ Pending çŠ¶æ€</a></li><li><a href="#æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦æœªç”Ÿæ•ˆ" class="table-of-contents__link toc-highlight">æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦æœªç”Ÿæ•ˆ</a></li><li><a href="#æŠ¢å æœªæŒ‰é¢„æœŸå‘ç”Ÿ" class="table-of-contents__link toc-highlight">æŠ¢å æœªæŒ‰é¢„æœŸå‘ç”Ÿ</a></li></ul></li><li><a href="#æœ€ä½³å®è·µ" class="table-of-contents__link toc-highlight">æœ€ä½³å®è·µ</a></li><li><a href="#å‚è€ƒèµ„æ–™" class="table-of-contents__link toc-highlight">å‚è€ƒèµ„æ–™</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ–‡æ¡£</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/docs/user-manuals/docs/installation">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/docs/user-manuals/docs/user-manuals/colocation-profile">ç”¨æˆ·æ‰‹å†Œ</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/docs/user-manuals/docs/architecture/overview">æ¶æ„</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/koordinator-sh/shared_invite/zt-1756qoub4-Cn4~esfdlfAPsD7cwO2NzA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack ( #koordinator channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/docs/user-manuals/">DingTalk (GroupID: 33383887)</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/zh-Hans/docs/user-manuals/blog">åšå®¢</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <div style="font-size: 18px">
        <br>
        <strong>Koordinatoræ˜¯ <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a> æ²™ç®±é¡¹ç›® </strong>
        <br>
        </div>
        <br>
        <img src="img/cncf-color.svg" alt="CNCF" width="auto" height="100px">
        <br>
        <div style="font-size: 14px">
        LinuxåŸºé‡‘ä¼šÂ® (TLF) å·²æ³¨å†Œå¹¶ä½¿ç”¨å•†æ ‡ã€‚å¦‚éœ€äº†è§£LinuxåŸºé‡‘ä¼šçš„å•†æ ‡åˆ—è¡¨ï¼Œè¯·è®¿é—®<a href="https://www.linuxfoundation.org/trademark-usage/">å•†æ ‡ä½¿ç”¨</a>é¡µé¢ã€‚
        <br>
        Copyright Â© 2024 Koordinatoré¡¹ç›®ä½œè€…ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
        </div>
        </div></div></div></footer></div>
<script src="/zh-Hans/assets/js/runtime~main.edc04791.js"></script>
<script src="/zh-Hans/assets/js/main.f06d534c.js"></script>
</body>
</html>