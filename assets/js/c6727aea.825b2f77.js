"use strict";(self.webpackChunkkoordinator_sh=self.webpackChunkkoordinator_sh||[]).push([[9725],{3905:(e,n,o)=>{o.d(n,{Zo:()=>s,kt:()=>h});var r=o(7294);function a(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function i(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function t(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(n){a(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function u(e,n){if(null==e)return{};var o,r,a=function(e,n){if(null==e)return{};var o,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=r.createContext({}),p=function(e){var n=r.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):t(t({},n),e)),o},s=function(e){var n=p(e.components);return r.createElement(c.Provider,{value:n},e.children)},l="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var o=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),l=p(o),m=a,h=l["".concat(c,".").concat(m)]||l[m]||d[m]||i;return o?r.createElement(h,t(t({ref:n},s),{},{components:o})):r.createElement(h,t({ref:n},s))}));function h(e,n){var o=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=o.length,t=new Array(i);t[0]=m;var u={};for(var c in n)hasOwnProperty.call(n,c)&&(u[c]=n[c]);u.originalType=e,u[l]="string"==typeof e?e:a,t[1]=u;for(var p=2;p<i;p++)t[p]=o[p];return r.createElement.apply(null,t)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},3641:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>i,metadata:()=>u,toc:()=>p});var r=o(7462),a=(o(7294),o(3905));const i={},t="Device Scheduling - ascend-npu",u={unversionedId:"user-manuals/device-scheduling-ascend-npu",id:"user-manuals/device-scheduling-ascend-npu",title:"Device Scheduling - ascend-npu",description:"Background",source:"@site/docs/user-manuals/device-scheduling-ascend-npu.md",sourceDirName:"user-manuals",slug:"/user-manuals/device-scheduling-ascend-npu",permalink:"/docs/next/user-manuals/device-scheduling-ascend-npu",draft:!1,editUrl:"https://github.com/koordinator-sh/koordinator.sh/edit/main/docs/user-manuals/device-scheduling-ascend-npu.md",tags:[],version:"current",lastUpdatedBy:"ZhuZhezz",lastUpdatedAt:1761225441,formattedLastUpdatedAt:"Oct 23, 2025",frontMatter:{},sidebar:"docs",previous:{title:"GPU & RDMA Joint Allocation",permalink:"/docs/next/user-manuals/gpu-and-rdma-joint-allocation"},next:{title:"Device Scheduling - cambricon-mlu",permalink:"/docs/next/user-manuals/device-scheduling-cambricon-mlu"}},c={},p=[{value:"Background",id:"background",level:2},{value:"Usage",id:"usage",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps to Use",id:"steps-to-use",level:3},{value:"Ascend Card Virtual Specification",id:"ascend-card-virtual-specification",level:3}],s={toc:p},l="wrapper";function d(e){let{components:n,...o}=e;return(0,a.kt)(l,(0,r.Z)({},s,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"device-scheduling---ascend-npu"},"Device Scheduling - ascend-npu"),(0,a.kt)("h2",{id:"background"},"Background"),(0,a.kt)("p",null,"Currently, Koordinator supports the use of Ascend cards in K8s. Based on the ",(0,a.kt)("inlineCode",{parentName:"p"},"koord-device-daemon")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"koordlet")," components, heterogeneous GPU resources are reported, and heterogeneous card information is aggregated into the ",(0,a.kt)("inlineCode",{parentName:"p"},"Device")," object for topology scheduling by the scheduler. It currently supports both Ascend virtualization templates and full cards."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"The use of Ascend cards requires prior installation and configuration of the following components:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Ascend Driver"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gitcode.com/Ascend/mind-cluster/releases"},"Ascend Docker Runtime")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gitcode.com/Ascend/mind-cluster/releases"},"Ascend Device Plugin (enable virtualization parameter configuration)"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-startup",metastring:"parameters",parameters:!0},"args:\n  - --volcanoType=true\n  - --presetVirtualDevice=false\n  - --useAscendDocker=true\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Koordinator related components (koordinator >= v1.7.0)")),(0,a.kt)("h3",{id:"steps-to-use"},"Steps to Use"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Confirm that the Ascend card has been successfully recognized by the ",(0,a.kt)("inlineCode",{parentName:"li"},"Device"),". An example is shown below. You can view the ",(0,a.kt)("inlineCode",{parentName:"li"},"Device")," resource using: ",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl get device -o yaml"),".")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Note"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"node.koordinator.sh/gpu-vendor")," label value should be ",(0,a.kt)("inlineCode",{parentName:"li"},"huawei"),"."),(0,a.kt)("li",{parentName:"ul"},"The value of ",(0,a.kt)("inlineCode",{parentName:"li"},"scheduling.koordinator.sh/gpu-partitions")," means: on this node, cards 0, 1, 2, and 3 form a single partition with HCCS affinity, cards 4,5,6,7 from another partition. Multi-cards scheduling must respect this affinity; crossing partitions can lead to inter-cards communication errors.")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: scheduling.koordinator.sh/v1alpha1\nkind: Device\nmetadata:\n  labels:\n    node.koordinator.sh/gpu-partition-policy: "Honor" # Enforce partition policy during scheduling.\n    node.koordinator.sh/gpu-model: Ascend-910B3 # Model of the Ascend card.\n    node.koordinator.sh/gpu-vendor: huawei # Vendor of the card.\n  annotations:\n    scheduling.koordinator.sh/gpu-partitions: |\n      {\n        "4": [\n                {\n                    "minors": [\n                       0,1,2,3  # Minor numbers of cards in this partition\n                    ],\n                    "gpuLinkType": "HCCS", # Indicate the type of inter-card link within the partition.\n                    "allocationScore": "1" # Indicate the overall allocation quality for the node after the partition has been assigned away.\n                }\n        ],\n        "4": [\n                {\n                    "minors": [\n                       4,5,6,7 \n                    ],\n                    "gpuLinkType": "HCCS",\n                    "allocationScore": "1"\n                }\n        ]\n      }\n  name: node-1\nspec:\n  devices:\n    - health: true\n      id: GPU-fd971b33-4891-fd2e-ed42-ce6adf324615 # The UUID of the Ascend card (mocked value).\n      minor: 0 # Every card has a unique minor number. Card 0.\n      resources:\n        huawei.com/npu-core: "20" # Number of aicore on the Ascend card.\n        huawei.com/npu-cpu: "7"  # Number of aicpu on the Ascend card.\n        huawei.com/npu-dvpp: "100" # There exists dvpp on the Ascend card.\n        koordinator.sh/gpu-core: "100" # The total compute capacity of the Ascend card in percentage.\n        koordinator.sh/gpu-memory: 64Gi # The total memory capacity of the Ascend card.\n        koordinator.sh/gpu-memory-ratio: "100" # The total memory capacity of the Ascend card in percentage.\n      topology:\n        busID: 0000:3b:00.0 # PCI bus ID.\n        nodeID: 0 # NUMA node ID.\n        pcieID: pci0000:3a # PCIe root ID.\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-ab123c45-6789-d001-e234-f567890abcde\n      minor: 1 # Card 1.\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.1\n        nodeID: 1\n        pcieID: pci0000:3a\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-bc234d56-7890-e112-f345-678901bcdefa\n      minor: 2\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.2\n        nodeID: 2\n        pcieID: pci0000:3a\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-cd345e67-8901-f223-4567-890123cdefab\n      minor: 3\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.3\n        nodeID: 3\n        pcieID: pci0000:3a\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-de456f78-9012-f334-5678-901234defabc\n      minor: 4\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.4\n        nodeID: 4\n        pcieID: pci0000:3b\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-ef567g89-0123-f445-6789-012345efabcd\n      minor: 5\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.5\n        nodeID: 5\n        pcieID: pci0000:3b\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-fg678h90-1234-f556-7890-123456fgabce\n      minor: 6\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.6\n        nodeID: 6\n        pcieID: pci0000:3b\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\n    - health: true\n      id: GPU-gh789i01-2345-f667-8901-234567ghabcd\n      minor: 7\n      resources:\n        huawei.com/npu-core: "20"\n        huawei.com/npu-cpu: "7"\n        huawei.com/npu-dvpp: "100"\n        koordinator.sh/gpu-core: "100"\n        koordinator.sh/gpu-memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n      topology:\n        busID: 0000:3b:00.7\n        nodeID: 7\n        pcieID: pci0000:3b\n        socketID: -1\n      type: gpu\n      conditions:\n        - lastTransitionTime: "2025-04-25T10:00:00Z"\n          message: device is healthy\n          reason: DeviceHealthy\n          status: "True"\n          type: Healthy\nstatus: {}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Verify that the Ascend card resource information has been correctly registered on the Ascend node. For example, you can run ",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl get node <node-name> -o yaml")," to check the node.status.allocatable and node.status.capacity resources.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: Node\nmetadata:\n  name: node-1\n  ...\nstatus:\n    allocatable:\n      ...\n      koordinator.sh/gpu.shared: "800" # Reported by koordinator\n      koordinator.sh/gpu-core: "800" # Reported by koordinator\n      koordinator.sh/gpu-memory: 512Gi # Reported by koordinator\n      koordinator.sh/gpu-memory-ratio: "800" # Reported by koordinator\n      huawei.com/npu-core: "160" # Reported by ascend device plugin\n      huawei.com/npu-cpu: "56" # Reported by Koordinator\n      huawei.com/npu-dvpp: "800" #  Reported Koordinator\n    capacity:\n      ...\n      koordinator.sh/gpu.shared: "800" # Reported by koordinator\n      koordinator.sh/gpu-core: "800" # Reported by koordinator\n      koordinator.sh/gpu-memory: 512Gi # Reported by koordinator\n      koordinator.sh/gpu-memory-ratio: "800" # Reported by koordinator\n      huawei.com/npu-core: "160" # Reported by ascend device plugin\n      huawei.com/npu-cpu: "56" # Reported by Koordinator\n      huawei.com/npu-dvpp: "800" # Reported Koordinator\n\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Create a Pod to request the use of Ascend cards. Examples below demonstrate both full-card and virtual-card scenarios.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Note"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"The image used here is the official Ascend-provided inference base image. Users can choose a suitable image according to their needs."),(0,a.kt)("li",{parentName:"ul"},"Both ",(0,a.kt)("inlineCode",{parentName:"li"},"resources.limits")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"resources.requests")," must be explicitly configured with additional resources:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Full-card scenario"),": Taking 910B3's full-card specs as an example, Ascend supports multi-card full-card scenarios.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"huawei.com/npu-core"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"A single card contains 20 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucore"),"; applying for 1 card requires 20 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucore"),".",(0,a.kt)("br",{parentName:"li"}),"Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = card_count * npucore_per_card")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"koordinator.sh/gpu-memory-ratio"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"For the full-card scenario, 1 card corresponds to a ",(0,a.kt)("inlineCode",{parentName:"li"},"gpu-memory-ratio")," of 100.",(0,a.kt)("br",{parentName:"li"}),"Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = card_count * 100")))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Virtual-card scenario"),": Taking 910B3's virtual spec ",(0,a.kt)("inlineCode",{parentName:"li"},"virt10_3c_32g")," as an example (see ",(0,a.kt)("a",{parentName:"li",href:"#ascend-card-virtual-specification"},"Ascend Virtual Specification"),"), which means 10 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucore"),", 3 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucpu"),", and 32GB VRAM. ",(0,a.kt)("strong",{parentName:"li"},"Ascend does not support multi-card virtualization"),".",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"koordinator.sh/gpu.shared"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Applying for virtual card \u2192 fill in 1."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"koordinator.sh/gpu-memory"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Applying for 1 virtual card \u2192 request 32GB ",(0,a.kt)("inlineCode",{parentName:"li"},"gpu-memory"),". Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = gpu-memory_in_spec")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"huawei.com/npu-core"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Applying for 1 virtual card \u2192 request 10 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucore"),". Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = npucore_in_spec")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"huawei.com/npu-cpu"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Applying for 1 virtual card \u2192 request 3 ",(0,a.kt)("inlineCode",{parentName:"li"},"npucpu"),". Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = npucpu_in_spec")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"huawei.com/npu-dvpp"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Applying for 1 virtual card \u2192 request 0 ",(0,a.kt)("inlineCode",{parentName:"li"},"dvpp")," according to spec (0 in this example). Formula: ",(0,a.kt)("inlineCode",{parentName:"li"},"number_to_fill = dvpp_in_spec"))))))))))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"full-card","full-card":!0},'apiVersion: v1\nkind: Pod\nmetadata:\n  labels:\n    app: demo-sleep\n  name: test-ascend-full-1\n  namespace: default\nspec:\n  containers:\n  - command:\n    - sleep\n    - infinity\n    image: swr.cn-south-1.myhuaweicloud.com/ascendhub/ascend-infer:24.0.0-ubuntu20.04\n    imagePullPolicy: IfNotPresent\n    name: demo-sleep\n    resources:\n      limits:\n        cpu: "32"\n        memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100" # card_count * 100\n        huawei.com/npu-core: "20" # card_count * npucore_per_card\n      requests:\n        cpu: "32"\n        memory: 64Gi\n        koordinator.sh/gpu-memory-ratio: "100"\n        huawei.com/npu-core: "20"\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"partial-card","partial-card":!0},'apiVersion: v1\nkind: Pod\nmetadata:\n  labels:\n    app: demo-sleep\n  name: test-ascend-partial-1\n  namespace: default\nspec:\n  containers:\n  - command:\n    - sleep\n    - infinity\n    image: swr.cn-south-1.myhuaweicloud.com/ascendhub/ascend-infer:24.0.0-ubuntu20.04\n    imagePullPolicy: IfNotPresent\n    name: demo-sleep\n    resources:\n      limits:\n        cpu: "32"\n        memory: 64Gi\n        koordinator.sh/gpu.shared: "1"\n        koordinator.sh/gpu-memory: "32Gi"\n        huawei.com/npu-core: "10"\n        huawei.com/npu-cpu: "3"\n      requests:\n        cpu: "32"\n        memory: 64Gi\n        koordinator.sh/gpu.shared: "1"\n        koordinator.sh/gpu-memory: "32Gi"\n        huawei.com/npu-core: "10"\n        huawei.com/npu-cpu: "3"\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Enter the container (",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl exec -it {pod-name} -- bash"),"), and run ",(0,a.kt)("inlineCode",{parentName:"li"},"npu-smi")," inside to check card usage. If the data is displayed correctly, the card has been successfully allocated to the Pod.")),(0,a.kt)("h3",{id:"ascend-card-virtual-specification"},"Ascend Card Virtual Specification"),(0,a.kt)("p",null,"The table below describes the virtual specifications for Ascend cards. Users can choose the appropriate virtual spec according to their actual needs."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"ascend-virtual-spec","ascend-virtual-spec":!0},'huawei-Ascend-310P:\nvir01:\n  huawei.com/npu-core: "1"\n  huawei.com/npu-cpu: "1"\n  huawei.com/npu-dvpp: "12"\n  koordinator.sh/gpu-memory: 3Gi\nvir02:\n  huawei.com/npu-core: "2"\n  huawei.com/npu-cpu: "2"\n  huawei.com/npu-dvpp: "25"\n  koordinator.sh/gpu-memory: 6Gi\nvir02_1c:\n  huawei.com/npu-core: "2"\n  huawei.com/npu-cpu: "1"\n  huawei.com/npu-dvpp: "25"\n  koordinator.sh/gpu-memory: 6Gi\nvir04:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "4"\n  huawei.com/npu-dvpp: "50"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_3c:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "3"\n  huawei.com/npu-dvpp: "50"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_3c_ndvpp:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_4c_dvpp:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "4"\n  huawei.com/npu-dvpp: "100"\n  koordinator.sh/gpu-memory: 12Gi\nhuawei-Ascend-310P3:\nvir01:\n  huawei.com/npu-core: "1"\n  huawei.com/npu-cpu: "1"\n  huawei.com/npu-dvpp: "12"\n  koordinator.sh/gpu-memory: 3Gi\nvir02:\n  huawei.com/npu-core: "2"\n  huawei.com/npu-cpu: "2"\n  huawei.com/npu-dvpp: "25"\n  koordinator.sh/gpu-memory: 6Gi\nvir02_1c:\n  huawei.com/npu-core: "2"\n  huawei.com/npu-cpu: "1"\n  huawei.com/npu-dvpp: "25"\n  koordinator.sh/gpu-memory: 6Gi\nvir04:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "4"\n  huawei.com/npu-dvpp: "50"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_3c:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "3"\n  huawei.com/npu-dvpp: "50"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_3c_ndvpp:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 12Gi\nvir04_4c_dvpp:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "4"\n  huawei.com/npu-dvpp: "100"\n  koordinator.sh/gpu-memory: 12Gi\nhuawei-Ascend-910:\nvir02:\n  huawei.com/npu-core: "2"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 2Gi\nvir04:\n  huawei.com/npu-core: "4"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 4Gi\nvir08:\n  huawei.com/npu-core: "8"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 8Gi\nvir16:\n  huawei.com/npu-core: "16"\n  huawei.com/npu-cpu: "7"\n  koordinator.sh/gpu-memory: 16Gi\nhuawei-Ascend-910B1:\nvir03_1c_8g:\n  huawei.com/npu-core: "3"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 8Gi\nvir06_1c_16g:\n  huawei.com/npu-core: "6"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 16Gi\nvir12_3c_32g:\n  huawei.com/npu-core: "12"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 32Gi\nhuawei-Ascend-910B2:\nvir03_1c_8g:\n  huawei.com/npu-core: "3"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 8Gi\nvir06_1c_16g:\n  huawei.com/npu-core: "6"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 16Gi\nvir12_3c_32g:\n  huawei.com/npu-core: "12"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 32Gi\nhuawei-Ascend-910B2C:\nvir03_1c_8g:\n  huawei.com/npu-core: "3"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 8Gi\nvir06_1c_16g:\n  huawei.com/npu-core: "6"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 16Gi\nvir12_3c_32g:\n  huawei.com/npu-core: "12"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 32Gi\nhuawei-Ascend-910B3:\nvir05_1c_16g:\n  huawei.com/npu-core: "5"\n  huawei.com/npu-cpu: "1"\n  koordinator.sh/gpu-memory: 16Gi\nvir10_3c_32g:\n  huawei.com/npu-core: "10"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 32Gi\nhuawei-Ascend-910B4:\nvir05_1c_8g:\n  huawei.com/npu-core: "5"\n  huawei.com/npu-cpu: "1"\n  huawei.com/npu-dvpp: "25"\n  koordinator.sh/gpu-memory: 8Gi\nvir10_3c_16g:\n  huawei.com/npu-core: "10"\n  huawei.com/npu-cpu: "3"\n  huawei.com/npu-dvpp: "50"\n  koordinator.sh/gpu-memory: 16Gi\nvir10_3c_16g_nm:\n  huawei.com/npu-core: "10"\n  huawei.com/npu-cpu: "3"\n  koordinator.sh/gpu-memory: 16Gi\nvir10_4c_16g_m:\n  huawei.com/npu-core: "10"\n  huawei.com/npu-cpu: "4"\n  huawei.com/npu-dvpp: "100"\n  koordinator.sh/gpu-memory: 16Gi\n')))}d.isMDXComponent=!0}}]);