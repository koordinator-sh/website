<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">12 posts tagged with &quot;release&quot; | Koordinator</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://koordinator.sh/blog/tags/release"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="12 posts tagged with &quot;release&quot; | Koordinator"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://koordinator.sh/blog/tags/release"><link data-rh="true" rel="alternate" href="https://koordinator.sh/blog/tags/release" hreflang="en"><link data-rh="true" rel="alternate" href="https://koordinator.sh/zh-Hans/blog/tags/release" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://koordinator.sh/blog/tags/release" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKASWWQYOP-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Koordinator RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Koordinator Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Koordinator" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d55f2266.css">
<link rel="preload" href="/assets/js/runtime~main.75f70c36.js" as="script">
<link rel="preload" href="/assets/js/main.07456b1b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like Koordinator, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/koordinator-sh/koordinator">GitHub</a>! ‚≠êÔ∏è</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Koordinator" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Koordinator</b></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">v1.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">v1.5 üöß</a></li><li><a class="dropdown__link" href="/docs/">v1.4</a></li><li><a class="dropdown__link" href="/docs/v1.3/">v1.3</a></li><li><a class="dropdown__link" href="/docs/v1.2/">v1.2</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/blog/tags/release" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hans/blog/tags/release" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.4.0">Koordinator v1.4: more types of computing workloads and more flexible resource management mechanisms</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.3.0">Koordinator v1.3: Â¢ûÂº∫ËµÑÊ∫êÈ¢ÑÁïôÔºåÊîØÊåÅ NRIÔºåÊèê‰æõËäÇÁÇπÁîªÂÉèÁöÑ Mid ËµÑÊ∫êË∂ÖÂçñ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.2.0">Koordinator v1.2: ÊîØÊåÅËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÔºåÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/anolis-CPU-Co-location">ÈæôËú• plugsched Á•ûÂô®Âä©Âäõ Koordinator ‰∫ëÂéüÁîüÂçïÊú∫Ê∑∑ÈÉ®‚Äî‚Äî ÂÜÖÊ†∏ CPU QoS Êè≠Áßò</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.1.0">Koordinator v1.1: ËÆ©Ë∞ÉÂ∫¶ÊÑüÁü•Ë¥üËΩΩ‰∏éÂπ≤Êâ∞Ê£ÄÊµãÈááÈõÜ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v1.0.0">Koordinator v1.0: Ê≠£ÂºèÂèëÂ∏É</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.7.0">Koordinator v0.7: ‰∏∫‰ªªÂä°Ë∞ÉÂ∫¶È¢ÜÂüüÊ≥®ÂÖ•Êñ∞Ê¥ªÂäõ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.6.0">Koordinator v0.6: Complete fine-grained CPU orchestration, Resource Reservation and Descheduling</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.5.0">Koordinator v0.5: Now With Node Resource Topology And More</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.4.0">What&#x27;s New in Koordinator v0.4.0?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.3.0">What&#x27;s New in Koordinator v0.3.0?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.2.0">Koordinator v0.2.0 - Enhanced node-side scheduling capabilities</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/release-v0.1.0">Koordinator v0.1.0 - QoS based scheduling system</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>12 posts tagged with &quot;release&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v1.4.0">Koordinator v1.4: more types of computing workloads and more flexible resource management mechanisms</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-15T00:00:00.000Z" itemprop="datePublished">January 15, 2024</time> ¬∑ <!-- -->20 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ZiMengSheng" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ZiMengSheng.png" alt="Jianyu Wang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ZiMengSheng" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jianyu Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator member</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">‚Äã</a></h2><p>As an actively developing open source project, Koordinator has undergo multiple version iterations since the release of v0.1.0 in April 2022, continuously bringing innovations and enhancements to the Kubernetes ecosystem. The core objective of the project is to provide comprehensive solutions for orchestrating collocated workloads, scheduling resources, ensuring resource isolation, and tuning performance to help users optimize container performance and improve cluster resource utilization.</p><p>In past version iterations, the Koordinator community has continued to grow, receiving active participation and contributions from engineers at well-known companies. These include Alibaba, Ant Technology Group, Intel, Xiaomi, Xiaohongshu, iQIYI, Qihoo 360, Youzan, Quwan, Meiya Pico, PITS, among others. Each version has advanced through the collective efforts of the community, demonstrating the project&#x27;s capability to address challenges in actual production environments.</p><p>Today, we are pleased to announce that Koordinator v1.4.0 is officially released. This version introduces several new features, including Kubernetes and YARN workload co-location, a NUMA topology alignment strategy, CPU normalization, and cold memory reporting. It also enhances features in key areas such as elastic quota management, QoS management for non-containerized applications on hosts, and descheduling protection strategies. These innovations and improvements aim to better support enterprise-level Kubernetes cluster environments, particularly in complex and diverse application scenarios.</p><p>The release of version v1.4.0 will bring users support for more types of computing workloads and more flexible resource management mechanisms. We look forward to these improvements helping users to address a broader range of enterprise resource management challenges. In the v1.4.0 release, a total of 11 new developers have joined the development of the Koordinator community. They are @shaloulcy, @baowj-678, @zqzten, @tan90github, @pheianox, @zxh326, @qinfustu, @ikaven1024, @peiqiaoWang, @bogo-y, and @xujihui1985.  We thank all community members for their active participation and contributions during this period and for their ongoing commitment to the community.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interpretation-of-version-features">Interpretation of Version Features<a href="#interpretation-of-version-features" class="hash-link" aria-label="Direct link to Interpretation of Version Features" title="Direct link to Interpretation of Version Features">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-support-kubernetes-and-yarn-workload-co-location">1. Support Kubernetes and YARN workload co-location<a href="#1-support-kubernetes-and-yarn-workload-co-location" class="hash-link" aria-label="Direct link to 1. Support Kubernetes and YARN workload co-location" title="Direct link to 1. Support Kubernetes and YARN workload co-location">‚Äã</a></h3><p>Koordinator already supports the co-location of online and offline workloads within the Kubernetes ecosystem. However, outside the Kubernetes ecosystem, a considerable number of big data workloads still run on traditional Hadoop YARN.</p><p>In response, the Koordinator community, together with developers from Alibaba Cloud, Xiaohongshu, and Ant Financial, has jointly launched the Hadoop YARN and Kubernetes co-location project, Koordinator YARN Copilot. This initiative enables the running of Hadoop NodeManager within Kubernetes clusters, fully leveraging the technical value of peak-shaving and resource reuse for different types of workloads. Koordinator YARN Copilot has the following features:</p><ul><li>Embracing the open-source ecosystem: Built upon the open-source version of Hadoop YARN without any intrusive modifications to YARN.</li><li>Unified resource priority and QoS policy: YARN NodeManager utilizes Koordinator‚Äôs Batch priority resources and adheres to Koordinator&#x27;s QoS management policies.</li><li>Node-level resource sharing: The co-location resources provided by Koordinator can be used by both Kubernetes pod and YARN tasks. Different types of offline applications can run on the same node.</li></ul><p><img loading="lazy" alt="img" src="/assets/images/hadoop-k8s-a092bf3c9bc72245fec2b31b173a8792.svg" width="396" height="451" class="img_ev3q"></p><p>For the detailed design of Koordinator YARN Copilot and its use in the Xiaohongshu production environment, please refer to <a href="https://mp.weixin.qq.com/s/N0QEJYyOhoDZoVQ6hGhnmg" target="_blank" rel="noopener noreferrer">Previous Articles</a> and <a href="https://koordinator.sh/zh-Hans/docs/next/designs/koordinator-yarn" target="_blank" rel="noopener noreferrer">Official Community Documents</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-introducing-numa-topology-alignment-strategy">2. Introducing NUMA topology alignment strategy<a href="#2-introducing-numa-topology-alignment-strategy" class="hash-link" aria-label="Direct link to 2. Introducing NUMA topology alignment strategy" title="Direct link to 2. Introducing NUMA topology alignment strategy">‚Äã</a></h3><p>The workloads running in Kubernetes clusters are increasingly diverse, particularly in fields such as machine learning, where the demand for high-performance computing resources is on the rise. In these fields, a significant amount of CPU resources is required, as well as other high-speed computing resources like GPUs and RDMA. Moreover, to achieve optimal performance, these resources often need to be located on the same NUMA node or even the same PCIe bus.</p><p>Kubernetes&#x27; kubelet includes a topology manager that manages the NUMA topology of resource allocation. It attempts to align the topologies of multiple resources at the node level during the admission phase. However, because the node component lacks a global view of the scheduler and the timing of node selection for pods, pods may be scheduled on nodes that are unable to meet the topology alignment policy. This can result in pods failing to start due to <code>topology affinity</code> errors.</p><p>To solve this problem, Koordinator moves NUMA topology selection and alignment to the central scheduler, optimizing resource NUMA topology at the cluster level. In this release, Koordinator introduces NUMA-aware scheduling of CPU resources (including Batch resources) and NUMA-aware scheduling of GPU devices as alpha features. The entire suite of NUMA-aware scheduling features is rapidly evolving.</p><p>Koordinator enables users to configure the NUMA topology alignment strategy for multiple resources on a node through the node&#x27;s labels. The configurable strategies are as follows:</p><ul><li><code>None</code>, the default strategy, does not perform any topological alignment.</li><li><code>BestEffort</code> indicates that the node does not strictly allocate resources according to NUMA topology alignment. The scheduler can always allocate such nodes to pods as long as the remaining resources meet the pods&#x27; needs.</li><li><code>Restricted</code> means that nodes allocate resources in strict accordance with NUMA topology alignment. In other words, the scheduler must select the same one or more NUMA nodes when allocating multiple resources, otherwise, the node should not be considered. For instance, if a pod requests 33 CPU cores and each NUMA node has 32 cores, it can be allocated to use two NUMA nodes. Moreover, if the pod also requests GPUs or RDMA, these must be on the same NUMA node as the CPU.</li><li><code>SingleNUMANode</code> is similar to <code>Restricted</code>, adhering strictly to NUMA topology alignment, but it differs in that <code>Restricted</code> permits the use of multiple NUMA nodes, whereas <code>SingleNUMANode</code> restricts allocation to a single NUMA node.</li></ul><p>For example, to set the <code>SingleNUMANode</code> policy for node-0, you would do the following:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">node.koordinator.sh/numa-topology-policy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SingleNUMANode&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In a production environment, users may have enabled kubelet&#x27;s topology alignment policy, which will be reflected by the koordlet in the TopologyPolicies field of the NodeResourceTopology CR object. When kubelet&#x27;s policy conflicts with the policy set by the user on the node, the kubelet policy shall take precedence. The koord-scheduler essentially adopts the same NUMA alignment policy semantics as the kubelet topology manager. The kubelet policies SingleNUMANodePodLevel and SingleNUMANodeContainerLevel are both mapped to SingleNUMANode.</p><p>After configuring the NUMA alignment strategy for the node, the scheduler can identify many suitable NUMA node allocation results for each pod. Koordinator currently provides the NodeNUMAResource plugin, which allows for configuring the NUMA node allocation result scoring strategy for CPU and memory resources. This includes <code>LeastAllocated</code> and <code>MostAllocated</code> strategies, with <code>LeastAllocated</code> being the default. Each resource can also be assigned a configurable weight. The scheduler will ultimately select the NUMA node allocation with the highest score. For instance, we can configure the NUMA node allocation result scoring strategy to <code>MostAllocated</code>, as shown in the following example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KubeSchedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">pluginConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeNUMAResource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubescheduler.config.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodeNUMAResourceArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">scoringStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Here configure Node level scoring strategy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MostAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/batch-cpu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/batch-memory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">numaScoringStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Here configure NUMA-Node level scoring strategy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MostAllocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/batch-cpu&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/batch-memory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-elasticquota-evolves-again">3. ElasticQuota evolves again<a href="#3-elasticquota-evolves-again" class="hash-link" aria-label="Direct link to 3. ElasticQuota evolves again" title="Direct link to 3. ElasticQuota evolves again">‚Äã</a></h3><p>In order to fully utilize cluster resources and reduce management system costs, users often deploy workloads from multiple tenants in the same cluster. When cluster resources are limited, competition for these resources is inevitable between different tenants. As a result, the workloads of some tenants may always be satisfied, while others may never be executed, leading to demands for fairness. The quota mechanism is a very natural way to ensure fairness among tenants, where each tenant is allocated a specific quota, and they can use resources within that quota. Tasks exceeding the quota will not be scheduled or executed. However, simple quota management cannot fulfill tenants&#x27; expectations for elasticity in the cloud. Users hope that in addition to satisfying resource requests within the quota, requests for resources beyond the quota can also be met on demand.</p><p>In previous versions, Koordinator leveraged the upstream ElasticQuota protocol, which allowed tenants to set a &#x27;Min&#x27; value to express their resource requests that must be satisfied, and a &#x27;Max&#x27; value to limit the maximum resources they can use. &#x27;Max&#x27; was also used to represent the shared weight of the remaining resources of the cluster when they were insufficient.</p><p>In addition to offering a flexible quota mechanism that accommodates tenants&#x27; on-demand resource requests, Koordinator enhances ElasticQuota with annotations to organize it into a tree structure, thereby simplifying the expression of hierarchical organizational structures for users.</p><p><img loading="lazy" alt="img" src="/assets/images/quotatree1-b68ec769c15547410ee4e5bd6eec1b27.jpg" width="1216" height="792" class="img_ev3q"></p><p>The figure above depicts a common quota tree in a cluster utilizing Koordinator&#x27;s elastic quota. The root quota serves as the link between the quota system and the actual resources within the cluster. In previous iterations, the root quota existed only within the scheduler&#x27;s logic. In this release, we have made the root quota accessible to users in the form of a Custom Resource (CR). Users can now view information about the root quota through the ElasticQuota CR named <code>koordinator-root-quota</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-introducing-multi-quotatree">3.1 Introducing Multi QuotaTree<a href="#31-introducing-multi-quotatree" class="hash-link" aria-label="Direct link to 3.1 Introducing Multi QuotaTree" title="Direct link to 3.1 Introducing Multi QuotaTree">‚Äã</a></h4><p>In large clusters, there are various types of nodes. For example, VMs provided by cloud vendors will have different architectures. The most common ones are amd64 and arm64. There are also different models with the same architecture. In addition, nodes generally have location attributes such as availability zone. When nodes of different types are managed in the same quota tree, their unique attributes will be lost. When users want to manage the unique attributes of machines in a refined manner, the current ElasticQuota appears not to be accurate enough. In order to meet users&#x27; requirements for flexible resource management or resource isolation, Koordinator supports users to divide the resources in the cluster into multiple parts, each part is managed by a quota tree, as shown in the following figure:</p><p><img loading="lazy" alt="img" src="/assets/images/multiquotatree-9680fdd40b65082d7f63092f830c8995.png" width="1502" height="634" class="img_ev3q"></p><p>Additionally, to help users simplify management complexity, Koordinator introduced the ElasticQuotaProfile mechanism in version 1.4.0. Users can quickly associate nodes with different quota trees through the nodeSelector, as shown in the following example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> quota.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ElasticQuotaProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/arch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> amd64</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/arch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> amd64 // amd64 node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">quotaName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> amd64</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">root</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quota   // the name of root quota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> quota.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ElasticQuotaProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/arch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arm64   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arm64</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/arch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arm64  // arm64 node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">quotaName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arm64</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">root</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quota    // the name of root quota</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After associating nodes with the quota tree, the user utilizes the ElasticQuota in each quota tree as before. When a user submits a pod to the corresponding quota, they currently still need to configure the pod&#x27;s NodeAffinity to ensure that the pod runs on the correct node. In the future, we plan to add a feature that will help users automatically manage the mapping relationship from quota to node.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-support-non-preemptible">3.2 Support non-preemptible<a href="#32-support-non-preemptible" class="hash-link" aria-label="Direct link to 3.2 Support non-preemptible" title="Direct link to 3.2 Support non-preemptible">‚Äã</a></h4><p>Koordinator ElasticQuota supports sharing the unused part of &#x27;Min&#x27; in ElasticQuota with other ElasticQuotas to improve resource utilization. However, when resources are tight, the pod that borrows the quota will be preempted and evicted through the preemption mechanism to get the resources back.</p><p>In actual production environments, if some critical online services borrow this part of the quota from other ElasticQuotas and preemption subsequently occurs, the quality of service may be adversely affected. Such workloads should not be subject to preemption.</p><p>To implement this safeguard, Koordinator v1.4.0 introduced a new API. Users can simply annotate a pod with <code>quota.scheduling.koordinator.sh/preemptible: false</code> to indicate that the pod should not be preempted.</p><p>When the scheduler detects that a pod is declared non-preemptible, it ensures that the available quota for such a pod does not exceed its &#x27;Min&#x27;. Thus, it is important to note that when enabling this feature, the &#x27;Min&#x27; of an ElasticQuota should be set judiciously, and the cluster must have appropriate resource guarantees in place. This feature maintains compatibility with the original behavior of Koordinator.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;quota-example&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/preemptible</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="33-other-improvements">3.3 Other improvements<a href="#33-other-improvements" class="hash-link" aria-label="Direct link to 3.3 Other improvements" title="Direct link to 3.3 Other improvements">‚Äã</a></h4><ol><li>The koord-scheduler previously supported the use of a single ElasticQuota object across multiple namespaces. However, in some cases, it is desirable for the same object to be shared by only a select few namespaces. To accommodate this need, users can now annotate the ElasticQuota CR with <code>quota.scheduling.koordinator.sh/namespaces</code>, assigning a JSON string array as the value.</li><li>Performance optimization: Previously, whenever an ElasticQuota was modified, the ElasticQuota plugin would rebuild the entire quota tree. This process has been optimized in version 1.4.0.</li><li>Support ignoring overhead: When a pod utilizes secure containers, an overhead declaration is typically added to the pod specification to account for the resource consumption of the secure container itself. However, whether these additional resource costs should be passed on to the end user depends on the resource pricing strategy. If it is expected that users should not be responsible for these costs, the ElasticQuota can be configured to disregard overhead. With version 1.4.0, this can be achieved by enabling the feature gate <code>ElasticQuotaIgnorePodOverhead</code>.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-cpu-normalization">4. CPU normalization<a href="#4-cpu-normalization" class="hash-link" aria-label="Direct link to 4. CPU normalization" title="Direct link to 4. CPU normalization">‚Äã</a></h3><p>With the diversification of node hardware in Kubernetes clusters, significant performance differences exist between CPUs of various architectures and generations. Therefore, even if a pod&#x27;s CPU request is identical, the actual computing power it receives can vary greatly, potentially leading to resource waste or diminished application performance. The objective of CPU normalization is to ensure that each CPU unit in Kubernetes provides consistent computing power across heterogeneous nodes by standardizing the performance of allocatable CPUs.</p><p>To address this issue, Koordinator has implemented a CPU normalization mechanism in version 1.4.0. This mechanism adjusts the amount of CPU resources that can be allocated on a node according to the node&#x27;s resource amplification strategy, ensuring that each allocatable CPU in the cluster delivers a consistent level of computing power. The overall architecture is depicted in the figure below:</p><p><img loading="lazy" alt="img" src="/assets/images/cpu-normalization-42902e00c064a6a32c368a92720dca8e.svg" width="917" height="481" class="img_ev3q"></p><p>CPU normalization consists of two steps</p><ol><li>CPU performance evaluation: To calculate the performance benchmarks of different CPUs, you can refer to the industrial performance evaluation standard, <a href="https://www.spec.org/cpu2017/" target="_blank" rel="noopener noreferrer">SPEC CPU</a>. This part is not provided by the Koordinator project.</li><li>Configuration of the CPU normalization ratio in Koordinator: The scheduling system schedules resources based on the normalization ratio, which is provided by Koordinator.</li></ol><p>Configure the CPU normalization ratio information into <code>slo-controller-config</code> of koord-manager. The configuration example is as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu-normalization-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;ratioModel&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">         &quot;Intel(R) Xeon(R) Platinum 8269CY CPU @ 2.50GHz&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;baseRatio&quot;: 1.29,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;hyperThreadEnabledRatio&quot;: 0.82,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;turboEnabledRatio&quot;: 1.52,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;hyperThreadTurboEnabledRatio&quot;: 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">         &quot;Intel Xeon Platinum 8369B CPU @ 2.90GHz&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;baseRatio&quot;: 1.69,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;hyperThreadEnabledRatio&quot;: 1.06,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;turboEnabledRatio&quot;: 1.91,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">           &quot;hyperThreadTurboEnabledRatio&quot;: 1.20</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For nodes configured with CPU normalization, Koordinator intercepts updates to Node.Status.Allocatable by kubelet through a webhook to achieve the amplification of CPU resources. This results in the display of the normalized amount of CPU resources available for allocation on the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-improved-descheduling-protection-strategies">5. Improved descheduling protection strategies<a href="#5-improved-descheduling-protection-strategies" class="hash-link" aria-label="Direct link to 5. Improved descheduling protection strategies" title="Direct link to 5. Improved descheduling protection strategies">‚Äã</a></h3><p>Pod migration is a complex process that involves steps such as auditing, resource allocation, and application startup. It is often intertwined with application upgrades, scaling scenarios, and the resource operations and maintenance performed by cluster administrators. Consequently, if a large number of pods are migrated simultaneously, the system&#x27;s stability may be compromised. Furthermore, migrating many pods from the same workload at once can also affect the application&#x27;s stability. Additionally, simultaneous migrations of pods from multiple jobs may lead to a &#x27;thundering herd&#x27; effect. Therefore, it is preferable to process the pods in each job sequentially.</p><p>To address these issues, Koordinator previously provided the PodMigrationJob function with some protection strategies. In version v1.4.0, Koordinator has enhanced these protection strategies into an arbitration mechanism. When there is a large number of executable PodMigrationJobs, the arbiter decides which ones can proceed by employing sorting and filtering techniques.</p><p>The sorting process is as follows:</p><ul><li>The time interval between the start of migration and the current, the smaller the interval, the higher the ranking.</li><li>The pod priority of PodMigrationJob, the lower the priority, the higher the ranking.</li><li>Disperse Jobs by workload, make PodMigrationJobs close in the same job.</li><li>If some pods in the job containing PodMigrationJob&#x27;s pod is being migrated, the PodMigrationJob&#x27;s ranking is higher.</li></ul><p>The filtering process is as follows:</p><ul><li>Group and filter PodMigrationJobs based on workload, node, namespace, etc.</li><li>Check the number of running podMigrationJobs in each workload, and those that reach a certain threshold will be excluded.</li><li>Check whether the number of unavailable replicas in each workload exceeds the maximum number of unavailable replicas, and those that exceed the number will be excluded.</li><li>Check whether the number of pods being migrated on the node where the target pod is located exceeds the maximum migration amount of a single node, and those that exceed will be excluded.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-cold-memory-reporting">6. Cold Memory reporting<a href="#6-cold-memory-reporting" class="hash-link" aria-label="Direct link to 6. Cold Memory reporting" title="Direct link to 6. Cold Memory reporting">‚Äã</a></h3><p>To improve system performance, the kernel generally tries not to free the page cache requested by an application but allocates as much as possible to the application. Although allocated by the kernel, this memory may no longer be accessed by applications and is referred to as cold memory.</p><p>Koordinator introduced the cold memory reporting function in version 1.4, primarily to lay the groundwork for future cold memory recycling capabilities. Cold memory recycling is designed to address two scenarios:</p><ol><li>In standard Kubernetes clusters, when the node memory level is too high, sudden memory requests can lead to direct memory recycling of the system. This can affect the performance of running containers and, in extreme cases, may result in out-of-memory (OOM) events if recycling is not timely. Therefore, maintaining a relatively free pool of node memory resources is crucial for runtime stability.</li><li>In co-location scenarios, high-priority applications&#x27; unused requested resources can be recycled by lower-priority applications. Since memory not reclaimed by the operating system is invisible to the Koordinator scheduling system, reclaiming unused memory pages of a container is beneficial for improving resource utilization.</li></ol><p>Koordlet has added a cold page collector to its collector plugins for reading the cgroup file <code>memory.idle_stat</code>, which is exported by kidled (Anolis kernel), kstaled (Google), or DAMON (Amazon). This file contains information about cold pages in the page cache and is present at every hierarchy level of memory. Koordlet already supports the kidled cold page collector and provides interfaces for other cold page collectors.</p><p>After collecting cold page information, the cold page collector stores the metrics, such as hot page usage and cold page size for nodes, pods, and containers, into metriccache. This data is then reported to the NodeMetric Custom Resource (CR).</p><p>Users can enable cold memory recycling and configure cold memory collection strategies through NodeMetric. Currently, three strategies are offered: <code>usageWithHotPageCache</code>, <code>usageWithoutPageCache</code> and <code>usageWithPageCache</code>. For more details, please see the community <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/koordlet/20230728-support-cold-memory-compute.md" target="_blank" rel="noopener noreferrer">Design Document</a>„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-qos-management-for-non-containerized-applications">7. QoS management for non-containerized applications<a href="#7-qos-management-for-non-containerized-applications" class="hash-link" aria-label="Direct link to 7. QoS management for non-containerized applications" title="Direct link to 7. QoS management for non-containerized applications">‚Äã</a></h3><p>In the process of enterprise containerization, there may be non-containerized applications running on the host alongside those already running on Kubernetes. In order to be better compatible with enterprises in the containerization process, Koordinator has developed a node resource reservation mechanism. This mechanism can reserve resources and assign specific QoS (Quality of Service) levels to applications that have not yet been containerized. Unlike the resource reservation configuration provided by kubelet, Koordinator&#x27;s primary goal is to address QoS issues that arise during the runtime of both non-containerized and containerized applications. The overall solution is depicted in the figure below:</p><p><img loading="lazy" alt="img" src="/assets/images/host-application-101f6caa7664a1a2cc38c6d8cf01a6a1.svg" width="406" height="241" class="img_ev3q"></p><p>Currently, applications need to start processes into the corresponding cgroup according to specifications, and Koordinator does not provide an automatic cgroup relocation tool. For host non-containerized applications, QoS is supported as follows:</p><ul><li><p>LS (Latency Sensitive)</p></li><li><ul><li>CPU QoS (Group Identity): The application runs the process in the CPU subsystem of the cgroup according to the specification, and the koordlet sets the Group Identity parameter for it according to the CPU QoS configuration;</li></ul></li><li><ul><li>CPUSet Allocation: The application runs the process in the CPU subsystem of the cgroup according to the specification, and the koordlet will set all CPU cores in the CPU share pool for it.</li></ul></li><li><p>BE (Best-effort)</p></li><li><ul><li>CPU QoS (Group Identity): The application runs the process in the CPU subsystem of the cgroup according to the specification, and the koordlet sets the Group Identity parameter for it according to the configuration of CPU QoS.</li></ul></li></ul><p>For detailed design of QoS management of non-containerized applications on the host, please refer to <a href="https://koordinator.sh/zh-Hans/docs/next/user-manuals/host-application-qos" target="_blank" rel="noopener noreferrer">Community Documentation</a>. In the future, we will gradually add support for other QoS strategies for host non-containerized applications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-other-features">8. Other features<a href="#8-other-features" class="hash-link" aria-label="Direct link to 8. Other features" title="Direct link to 8. Other features">‚Äã</a></h3><p>In addition to the new features and functional enhancements mentioned above, Koordinator has also implemented the following bug fixes and optimizations in version 1.4.0:</p><ol><li>RequiredCPUBindPolicy: Fine-grained CPU orchestration now supports the configuration of the required CPU binding policy, which means that CPUs are allocated strictly in accordance with the specified CPU binding policy; otherwise, scheduling will fail.</li><li>CICD: The Koordinator community provides a set of e2e testing Pipeline in v1.4.0; an ARM64 image is provided.</li><li>Batch resource calculation strategy optimization: There is support for the <code>maxUsageRequest</code> calculation strategy, which conservatively reclaims high-priority resources. This update also optimizes the underestimate of Batch allocatable when a large number of pods start and stop on a node in a short period of time and improves considerations for special circumstances such as host non-containerized application, third-party allocatable, and dangling pod usage.</li><li>Others: Optimizations include using libpfm4 and perf groups to improve CPI collection, allowing SystemResourceCollector to support customized expiration time configuration, enabling BE pods to calculate CPU satisfaction based on the evictByAllocatable policy, repairing koordlet&#x27;s CPUSetAllocator filtering logic for pods with LS and None QoS, and enhancing RDT resource control to retrieve the task IDs of sandbox containers.</li></ol><p>For a comprehensive list of new features in version 1.4.0, please visit the <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v1.4.0" target="_blank" rel="noopener noreferrer">v1.4.0 Release</a> page.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plan">Future plan<a href="#future-plan" class="hash-link" aria-label="Direct link to Future plan" title="Direct link to Future plan">‚Äã</a></h2><p>In upcoming versions, Koordinator has planned the following features:</p><ul><li>Core Scheduling: On the runtime side, Koordinator has begun exploring the next generation of CPU QoS capabilities. By leveraging kernel mechanisms such as Linux Core Scheduling, it aims to enhance resource isolation at the physical core level and reduce the security risks associated with co-location. For more details on this work, see <a href="https://github.com/koordinator-sh/koordinator/issues/1728" target="_blank" rel="noopener noreferrer">Issue #1728</a>.</li><li>Joint Allocation of Devices: In scenarios involving AI large model distributed training, GPUs from different machines often need to communicate through high-performance network cards. Performance is improved when GPUs and high-performance network cards are allocated in close proximity. Koordinator is advancing the joint allocation of multiple heterogeneous resources. Currently, it supports joint allocation in terms of protocol and scheduler logic; the reporting logic for network card resources on the node side is being explored.</li></ul><p>For more information, please pay attention to <a href="https://github.com/koordinator-sh/koordinator/milestone/14" target="_blank" rel="noopener noreferrer">Milestone v1.5.0</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2><p>Finally, we are immensely grateful to all the contributors and users of the Koordinator community. Your active participation and valuable advice have enabled Koordinator to continue improving. We eagerly look forward to your ongoing feedback and warmly welcome new contributors to join our ranks.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v1.3.0">Koordinator v1.3: Â¢ûÂº∫ËµÑÊ∫êÈ¢ÑÁïôÔºåÊîØÊåÅ NRIÔºåÊèê‰æõËäÇÁÇπÁîªÂÉèÁöÑ Mid ËµÑÊ∫êË∂ÖÂçñ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-16T00:00:00.000Z" itemprop="datePublished">August 16, 2023</time> ¬∑ <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/saintube" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/saintube.png" alt="Rougang Han"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/saintube" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Rougang Han</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator member</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ËÉåÊôØ">ËÉåÊôØ<a href="#ËÉåÊôØ" class="hash-link" aria-label="Direct link to ËÉåÊôØ" title="Direct link to ËÉåÊôØ">‚Äã</a></h2><p>Koordinator ÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÈ°πÁõÆÔºåÊó®Âú®Âü∫‰∫éÈòøÈáåÂ∑¥Â∑¥Âú®ÂÆπÂô®Ë∞ÉÂ∫¶È¢ÜÂüüÁöÑÂ§öÂπ¥ÁªèÈ™åÔºåÊèê‰æõ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊ∑∑ÈÉ®Ëß£ÂÜ≥ÊñπÊ°àÔºåÂåÖÂê´Ê∑∑ÈÉ®Â∑•‰ΩúË¥üËΩΩÁºñÊéí„ÄÅËµÑÊ∫êË∞ÉÂ∫¶„ÄÅËµÑÊ∫êÈöîÁ¶ªÂèäÊÄßËÉΩË∞É‰ºòÁ≠âÂ§öÊñπÈù¢ËÉΩÂäõÔºåÊù•Â∏ÆÂä©Áî®Êà∑‰ºòÂåñÂÆπÂô®ÊÄßËÉΩÔºåÂÖÖÂàÜÂèëÊéòÁ©∫Èó≤Áâ©ÁêÜËµÑÊ∫êÔºåÊèêÂçáËµÑÊ∫êÊïàÁéáÔºåÂ¢ûÂº∫Âª∂ËøüÊïèÊÑüÂûãÂ∑•‰ΩúË¥üËΩΩÂíåÊâπÂ§ÑÁêÜ‰Ωú‰∏öÁöÑËøêË°åÊïàÁéáÂíåÂèØÈù†ÊÄß„ÄÇ</p><p>Âú®Ê≠§ÔºåÊàë‰ª¨ÂæàÈ´òÂÖ¥Âú∞ÂêëÂêÑ‰ΩçÂÆ£Â∏É Koordinator v1.3.0 ÁâàÊú¨ÁöÑÂèëÂ∏É„ÄÇËá™ 2022 Âπ¥ 4 ÊúàÂèëÂ∏É v0.1.0 ÁâàÊú¨‰ª•Êù•ÔºåKoordinator ËøÑ‰ªäËø≠‰ª£ÂèëÂ∏É‰∫ÜÂÖ± 11 ‰∏™ÁâàÊú¨ÔºåÂê∏Âºï‰∫Ü‰∫ÜÂåÖÊã¨ÈòøÈáåÂ∑¥Â∑¥„ÄÅIntel„ÄÅÂ∞èÁ±≥„ÄÅÂ∞èÁ∫¢‰π¶„ÄÅÁà±Â•áËâ∫„ÄÅ360„ÄÅÊúâËµûÁ≠â‰ºÅ‰∏öÂú®ÂÜÖÁöÑÂ§ßÈáè‰ºòÁßÄÂ∑•Á®ãÂ∏àÂèÇ‰∏éË¥°ÁåÆ„ÄÇÂú® v1.3.0 ÁâàÊú¨‰∏≠ÔºåKoordinator Â∏¶Êù•‰∫Ü NRI (Node Resource Interface) ÊîØÊåÅ„ÄÅMid ËµÑÊ∫êË∂ÖÂçñÁ≠âÊñ∞ÁâπÊÄßÔºåÂπ∂Âú®ËµÑÊ∫êÈ¢ÑÁïô„ÄÅË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶„ÄÅDeviceShare Ë∞ÉÂ∫¶„ÄÅË¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶„ÄÅË∞ÉÂ∫¶Âô®Ê°ÜÊû∂„ÄÅÂçïÊú∫ÊåáÊ†áÈááÈõÜÂíåËµÑÊ∫êË∂ÖÂçñÊ°ÜÊû∂Á≠âÁâπÊÄß‰∏äËøõË°å‰∫ÜÁ®≥ÂÆöÊÄß‰øÆÂ§ç„ÄÅÊÄßËÉΩ‰ºòÂåñ‰∏éÂäüËÉΩÂ¢ûÂº∫„ÄÇ</p><p>Âú® v1.3.0 ÁâàÊú¨‰∏≠ÔºåÂÖ±Êúâ 12 ‰ΩçÊñ∞Âä†ÂÖ•ÁöÑÂºÄÂèëËÄÖÂèÇ‰∏éÂà∞‰∫Ü Koordinator Á§æÂå∫ÁöÑÂª∫ËÆæÔºå‰ªñ‰ª¨ÊòØ @bowen-intelÔºå@BUPT-wxqÔºå@Gala-RÔºå@haoyannÔºå@kangclzjcÔºå@SolomonwisdomÔºå@stulzqÔºå@TheBeatles1994Ôºå@Tiana2018Ôºå@VinceCuiÔºå@wenchezhaoÔºå@zhouzijiangÔºåÊÑüË∞¢ÊúüÈó¥ÂêÑ‰ΩçÁ§æÂå∫ÂêåÂ≠¶ÁöÑÁßØÊûÅÂèÇ‰∏éÂíåË¥°ÁåÆÔºå‰πüÊÑüË∞¢ÊâÄÊúâÂêåÂ≠¶Âú®Á§æÂå∫ÁöÑÊåÅÁª≠ÊäïÂÖ•„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª">ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª<a href="#ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª" class="hash-link" aria-label="Direct link to ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª" title="Direct link to ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ËµÑÊ∫êÈ¢ÑÁïôÂ¢ûÂº∫">ËµÑÊ∫êÈ¢ÑÁïôÂ¢ûÂº∫<a href="#ËµÑÊ∫êÈ¢ÑÁïôÂ¢ûÂº∫" class="hash-link" aria-label="Direct link to ËµÑÊ∫êÈ¢ÑÁïôÂ¢ûÂº∫" title="Direct link to ËµÑÊ∫êÈ¢ÑÁïôÂ¢ûÂº∫">‚Äã</a></h3><p>ËµÑÊ∫êÈ¢ÑÁïôÔºàReservationÔºâËÉΩÂäõËá™ v0.5.0 ÁâàÊú¨ÊèêÂá∫ÂêéÔºåÁªèÂéÜ‰∫Ü‰∏ÄÂπ¥ÁöÑÊâìÁ£®ÂíåËø≠‰ª£ÔºåÂú® v1.3.0 ÁâàÊú¨‰∏≠ÈíàÂØπÊä¢Âç†„ÄÅËÆæÂ§áÈ¢ÑÁïô„ÄÅCoscheduling Á≠âÂú∫ÊôØÂ¢ûÂº∫‰∫ÜÈ¢ÑÁïôÊú∫Âà∂ÔºåÊñ∞Â¢û allocatePolicy Â≠óÊÆµÁî®‰∫éÂÆö‰πâ‰∏çÂêåÁöÑÈ¢ÑÁïôËµÑÊ∫êÂàÜÈÖçÁ≠ñÁï•„ÄÇÊúÄÊñ∞ÁöÑËµÑÊ∫êÈ¢ÑÁïô API Â¶Ç‰∏ãÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Reservation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> reservation</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># templateÂ≠óÊÆµÂ°´ÂÜôreservationÂØπË±°ÁöÑËµÑÊ∫êÈúÄÊ±ÇÂíåaffinity‰ø°ÊÅØÔºåÂ∞±ÂÉèË∞ÉÂ∫¶pod‰∏ÄÊ†∑.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;-c&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> polinux/stress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 500m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nodeAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requiredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">nodeSelectorTerms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology.kubernetes.io/zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler </span><span class="token comment" style="color:#999988;font-style:italic"># ÊåáÂÆökoord-schedulerÊù•Ë¥üË¥£reservationÂØπË±°ÁöÑË∞ÉÂ∫¶.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ÊåáÂÆöÂèØÂàÜÈÖçÈ¢ÑÁïôËµÑÊ∫êÁöÑowners.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">owners</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">labelSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ttl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ÊåáÂÆöÈ¢ÑÁïôËµÑÊ∫êÊòØÂê¶‰ªÖÊîØÊåÅ‰∏ÄÊ¨°ÊÄßÁöÑÂàÜÈÖç.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allocateOnce</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ÊåáÂÆöÈ¢ÑÁïôËµÑÊ∫êÁöÑÂàÜÈÖçÁ≠ñÁï•,ÂΩìÂâçÊîØÊåÅ‰ª•‰∏ãÁ≠ñÁï•:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># - Default: Áº∫ÁúÅÈÖçÁΩÆÔºå‰∏çÈôêÂà∂ÂØπÈ¢ÑÁïôËµÑÊ∫êÁöÑÂàÜÈÖçÔºåpod‰ºòÂÖàÂàÜÈÖçËá™ËäÇÁÇπ‰∏äÁöÑÈ¢ÑÁïôËµÑÊ∫êÔºõÂ¶ÇÊûúÈ¢ÑÁïôËµÑÊ∫ê‰∏çË∂≥ÔºåÂàôÁªßÁª≠ÂàÜÈÖçËäÇÁÇπÁ©∫Èó≤ËµÑÊ∫ê„ÄÇ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># - Aligned: pod‰ºòÂÖàÂàÜÈÖçËá™ËäÇÁÇπ‰∏äÁöÑÈ¢ÑÁïôËµÑÊ∫êÔºõÂ¶ÇÊûúÈ¢ÑÁïôËµÑÊ∫ê‰∏çË∂≥ÔºåÂàôÁªßÁª≠ÂàÜÈÖçËäÇÁÇπÁ©∫Èó≤ËµÑÊ∫êÔºå‰ΩÜË¶ÅÊ±ÇËøôÈÉ®ÂàÜËµÑÊ∫êÊª°Ë∂≥PodÈúÄÊ±Ç„ÄÇËØ•Á≠ñÁï•ÂèØÁî®‰∫éËßÑÈÅøpodÂêåÊó∂ÂàÜÈÖçÂ§ö‰∏™reservationÁöÑËµÑÊ∫ê„ÄÇ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># - Restricted: ÂØπ‰∫éÈ¢ÑÁïôËµÑÊ∫êÂåÖÂê´ÁöÑÂêÑ‰∏™ËµÑÊ∫êÁª¥Â∫¶ÔºåpodÂøÖÈ°ªÂàÜÈÖçËá™È¢ÑÁïôËµÑÊ∫êÔºõÂÖ∂‰ΩôËµÑÊ∫êÁª¥Â∫¶ÂèØ‰ª•ÂàÜÈÖçËäÇÁÇπÁ©∫Èó≤ËµÑÊ∫ê„ÄÇÂåÖÂê´‰∫ÜAlignedÁ≠ñÁï•ÁöÑËØ≠‰πâ„ÄÇ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Âêå‰∏ÄËäÇÁÇπÂ∞ö‰∏çÊîØÊåÅDefaultÁ≠ñÁï•ÂíåAlignedÁ≠ñÁï•ÊàñRestrictedÁ≠ñÁï•ÂÖ±Â≠ò„ÄÇ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allocatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Aligned&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ÊéßÂà∂È¢ÑÁïôËµÑÊ∫êÊòØÂê¶ÂèØ‰ª•‰ΩøÁî®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">unschedulable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ê≠§Â§ñÔºåËµÑÊ∫êÈ¢ÑÁïôÂú® v1.3.0 ‰∏≠ËøòÂåÖÂê´‰∫ÜÂ¶Ç‰∏ãÂÖºÂÆπÊÄßÂíåÊÄßËÉΩ‰ºòÂåñÔºö</p><ol><li>Â¢ûÂº∫ Reservation ÁöÑÊä¢Âç†ÔºåÂÖÅËÆ∏ Reservation ÂÜÖÁöÑ Pod Èó¥Êä¢Âç†ÔºåÊãíÁªù Reservation Â§ñÁöÑ Pod Êä¢Âç† Reservation ÂÜÖÁöÑ Pod„ÄÇ</li><li>Â¢ûÂº∫ËÆæÂ§áÈ¢ÑÁïôÂú∫ÊôØÔºåÂ¶ÇÊûúËäÇÁÇπ‰∏äËÆæÂ§áËµÑÊ∫êË¢´ÈÉ®ÂàÜÈ¢ÑÁïôÂπ∂Ë¢´ pod ‰ΩøÁî®ÔºåÊîØÊåÅÂâ©‰ΩôËµÑÊ∫êÁöÑÂàÜÈÖç„ÄÇ</li><li>ÊîØÊåÅ Reservation ‰ΩøÁî® Coscheduling„ÄÇ</li><li>Êñ∞Â¢û Reservation AffinityÂçèËÆÆÔºåÂÖÅËÆ∏Áî®Êà∑‰∏ÄÂÆö‰ªéReservationÂÜÖÂàÜÈÖçËµÑÊ∫ê„ÄÇ</li><li>‰ºòÂåñ Reservation ÂÖºÂÆπÊÄßÔºå‰øÆÂ§çÂõ† Reservation ÂØºËá¥ÂéüÁîüÊâìÂàÜÊèí‰ª∂Â§±ÊïàÁöÑÈóÆÈ¢ò„ÄÇ </li><li>‰ºòÂåñÂõ†ÂºïÂÖ• Reservation ÂØºËá¥ÁöÑË∞ÉÂ∫¶ÊÄßËÉΩÂõûÂΩíÈóÆÈ¢ò„ÄÇ</li><li>‰øÆÂ§ç Reservation È¢ÑÁïôÁ´ØÂè£ËØØÂà†Èô§ÁöÑÈóÆÈ¢ò„ÄÇ</li></ol><p>ÂÖ≥‰∫éËµÑÊ∫êÈ¢ÑÁïôÁöÑËÆæËÆ°ÔºåËØ¶ËßÅ<a href="/docs/designs/resource-reservation">Designs - Resource Reservation</a>„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ∂‰ªñË∞ÉÂ∫¶Â¢ûÂº∫">ÂÖ∂‰ªñË∞ÉÂ∫¶Â¢ûÂº∫<a href="#ÂÖ∂‰ªñË∞ÉÂ∫¶Â¢ûÂº∫" class="hash-link" aria-label="Direct link to ÂÖ∂‰ªñË∞ÉÂ∫¶Â¢ûÂº∫" title="Direct link to ÂÖ∂‰ªñË∞ÉÂ∫¶Â¢ûÂº∫">‚Äã</a></h3><p>Âú® v1.3.0 ‰∏≠Ôºåkoordinator Âú®Ë∞ÉÂ∫¶ÂíåÈáçË∞ÉÂ∫¶ÊñπÈù¢ËøòÂåÖÂê´Â¶Ç‰∏ãÂ¢ûÂº∫Ôºö</p><ol><li><p>DeviceShare Ë∞ÉÂ∫¶</p><ul><li>Êõ¥Êîπ GPU ËµÑÊ∫ê‰ΩøÁî®ÊñπÂºèÔºå‰ΩøÁî® GPU Share API Êó∂ÔºåÂøÖÈ°ªÂ£∞Êòé<code>koordinator.sh/gpu-memory</code>Êàñ<code>koordinator.sh/gpu-memory-ratio</code>ÔºåÂÖÅËÆ∏‰∏çÂ£∞Êòé<code>koordinator.sh/gpu-core</code>„ÄÇ</li><li>ÊîØÊåÅÊâìÂàÜÔºåÂèØÁî®‰∫éÂÆûÁé∞ GPU Share Âú∫ÊôØÂíåÊï¥Âç°ÂàÜÈÖçÂú∫ÊôØÁöÑ bin-packing Êàñ spreadÔºåÂπ∂ÊîØÊåÅÂç°Á≤íÂ∫¶ binpacking Êàñ spread„ÄÇ</li><li>‰øÆÂ§çÁî®Êà∑ËØØÂà†Èô§ Device CRD ÂØºËá¥Ë∞ÉÂ∫¶Âô®ÂÜÖÈÉ®Áä∂ÊÄÅÂºÇÂ∏∏ÈáçÂ§çÂàÜÈÖçËÆæÂ§áÁöÑÈóÆÈ¢ò„ÄÇ</li></ul></li><li><p>Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶Ôºö‰øÆÂ§çÂØπ‰ªÖÂ°´ÂÜô Request ÁöÑ Pod ÁöÑË∞ÉÂ∫¶ÈÄªËæë„ÄÇ</p></li><li><p>Ë∞ÉÂ∫¶Âô®Ê°ÜÊû∂Ôºö‰ºòÂåñ PreBind Èò∂ÊÆµÁöÑ Patch Êìç‰ΩúÔºåÂ∞ÜÂ§ö‰∏™Êèí‰ª∂ÁöÑ Patch Êìç‰ΩúÂêàÂπ∂‰∏∫‰∏ÄÊ¨°Êèê‰∫§ÔºåÊèêÂçáÊìç‰ΩúÊïàÁéáÔºåÈôç‰Ωé APIServer ÂéãÂäõ„ÄÇ</p></li><li><p>ÈáçË∞ÉÂ∫¶</p><ul><li>LowNodeLoad ÊîØÊåÅÊåâËäÇÁÇπÊ±†ËÆæÁΩÆ‰∏çÂêåÁöÑË¥üËΩΩÊ∞¥‰ΩçÂíåÂèÇÊï∞Á≠â„ÄÇËá™Âä®ÂÖºÂÆπÂéüÊúâÈÖçÁΩÆ„ÄÇ</li><li>Ë∑≥Ëøá schedulerName ‰∏çÊòØ koord-scheduler ÁöÑPodÔºåÊîØÊåÅÈÖçÁΩÆ‰∏çÂêåÁöÑ schedulerName„ÄÇ</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nri-ËµÑÊ∫êÁÆ°ÁêÜÊ®°Âºè">NRI ËµÑÊ∫êÁÆ°ÁêÜÊ®°Âºè<a href="#nri-ËµÑÊ∫êÁÆ°ÁêÜÊ®°Âºè" class="hash-link" aria-label="Direct link to NRI ËµÑÊ∫êÁÆ°ÁêÜÊ®°Âºè" title="Direct link to NRI ËµÑÊ∫êÁÆ°ÁêÜÊ®°Âºè">‚Äã</a></h3><p>Koordinator ÁöÑ runtime hooks ÊîØÊåÅ‰∏§ÁßçÊ®°ÂºèÔºåstandalone Âíå CRI proxyÔºåÁÑ∂ËÄåËøô‰∏§ÁßçÊ®°ÂºèÂêÑËá™ÊúâÁùÄ‰∏Ä‰∫õÈôêÂà∂„ÄÇÂΩìÂâçÔºåÂ∞ΩÁÆ°Âú® standalone Ê®°ÂºèÂÅö‰∫ÜÂæàÂ§ö‰ºòÂåñÔºå‰ΩÜÂΩìÊÉ≥Ëé∑ÂæóÊõ¥Âä†ÂèäÊó∂ÁöÑ Pod ÊàñÂÆπÂô®ÁöÑ‰∫ã‰ª∂ÊàñËÄÖÁéØÂ¢ÉÂèòÈáèÁöÑÊ≥®ÂÖ•Êó∂ËøòÊòØÈúÄË¶Å‰æùËµñ proxy Ê®°Âºè„ÄÇÁÑ∂ËÄåÔºå proxy Ê®°ÂºèË¶ÅÊ±ÇÂçïÁã¨ÈÉ®ÁΩ≤ koord-runtime-proxy ÁªÑ‰ª∂Êù•‰ª£ÁêÜ CRI (Container Runtime Interface) ËØ∑Ê±Ç, ÂêåÊó∂ÈúÄË¶ÅÊõ¥Êîπ Kubelet ÁöÑÂêØÂä®ÂèÇÊï∞Âπ∂ÈáçÂêØ Kubelet„ÄÇ</p><p>NRIÔºàNode Resource InterfaceÔºâÔºåÂç≥ËäÇÁÇπËµÑÊ∫êÊé•Âè£ÔºåÊòØ CRI ÂÖºÂÆπÁöÑÂÆπÂô®ËøêË°åÊó∂Êèí‰ª∂Êâ©Â±ïÁöÑÈÄöÁî®Ê°ÜÊû∂ÔºåÁã¨Á´ã‰∫éÂÖ∑‰ΩìÁöÑÂÆπÂô®ËøêË°åÊó∂Ôºàe.g. containerd, cri-oÔºâ, Êèê‰æõ‰∏çÂêåÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ÁöÑÊé•Âè£ÔºåÂÖÅËÆ∏Áî®Êà∑Âú®‰∏ç‰øÆÊîπÂÆπÂô®ËøêË°åÊó∂Ê∫ê‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÊ∑ªÂä†Ëá™ÂÆö‰πâÈÄªËæë„ÄÇÁâπÂà´ÁöÑÊòØÔºå2.0 ÁâàÊú¨ NRI Âè™ÈúÄË¶ÅËøêË°å‰∏Ä‰∏™Êèí‰ª∂ÂÆû‰æãÁî®‰∫éÂ§ÑÁêÜÊâÄÊúâ NRI ‰∫ã‰ª∂ÂíåËØ∑Ê±ÇÔºåÂÆπÂô®ËøêË°åÊó∂ÈÄöËøá Unix-Domain Socket ‰∏éÊèí‰ª∂ÈÄö‰ø°Ôºå‰ΩøÁî®Âü∫‰∫é Protobuf ÁöÑÂçèËÆÆÊï∞ÊçÆÔºåÂíå 1.0 ÁâàÊú¨ NRI Áõ∏ÊØîÊã•ÊúâÊõ¥È´òÁöÑÊÄßËÉΩÔºåËÉΩÂ§üÂÆûÁé∞ÊúâÁä∂ÊÄÅÁöÑ NRI Êèí‰ª∂„ÄÇ</p><p>ÈÄöËøá NRI ÁöÑÂºïÂÖ•ÔºåÊó¢ËÉΩÂèäÊó∂ÁöÑËÆ¢ÈòÖ Pod ÊàñËÄÖÂÆπÂô®ÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ÔºåÂèàÈÅøÂÖç‰∫ÜÂØπ Kubelet ÁöÑ‰æµÂÖ•‰øÆÊîπ„ÄÇÂú® Koordinator v1.3.0 ‰∏≠ÔºåÊàë‰ª¨ÂºïÂÖ• NRI ËøôÁßçÁ§æÂå∫Êé®ËçêÁöÑÊñπÂºèÊù•ÁÆ°ÁêÜ runtime hooks Êù•Ëß£ÂÜ≥‰πãÂâçÁâàÊú¨ÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºåÂ§ßÂ§ßÊèêÂçá‰∫Ü Koordinator ÈÉ®ÁΩ≤ÁöÑÁÅµÊ¥ªÊÄßÂíåÂ§ÑÁêÜÁöÑÊó∂ÊïàÊÄßÔºåÊèê‰æõ‰∫Ü‰∏ÄÁßç‰ºòÈõÖÁöÑ‰∫ëÂéüÁîüÁ≥ªÁªüÁöÑËµÑÊ∫êÁÆ°ÁêÜÊ†áÂáÜÂåñÊ®°Âºè„ÄÇ</p><p><img loading="lazy" alt="nri" src="/assets/images/nri-proposal-472f1a1bde8c4bce268e6fce9c94b8b0.png" width="825" height="628" class="img_ev3q"></p><blockquote><p>Ê≥®ÔºöNRI Ê®°Âºè‰∏çÊîØÊåÅ docker ÁöÑÂÆπÂô®ËøêË°åÊó∂Ôºå‰ΩøÁî® docker ÁöÑÁî®Êà∑ËØ∑ÁªßÁª≠‰ΩøÁî® standalone Ê®°ÂºèÊàñ proxy Ê®°Âºè„ÄÇ</p></blockquote><p>ÂÖ≥‰∫é Koordinator ÂêØÁî® NRI ÁöÑÈÉ®ÁΩ≤ÊñπÂºèÔºåËØ∑ËßÅ<a href="/docs/installation#enable-nri-mode-resource-management">Installation - Enable NRI Mode Resource Management</a>„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ËäÇÁÇπÁîªÂÉèÂíå-mid-ËµÑÊ∫êË∂ÖÂçñ">ËäÇÁÇπÁîªÂÉèÂíå Mid ËµÑÊ∫êË∂ÖÂçñ<a href="#ËäÇÁÇπÁîªÂÉèÂíå-mid-ËµÑÊ∫êË∂ÖÂçñ" class="hash-link" aria-label="Direct link to ËäÇÁÇπÁîªÂÉèÂíå Mid ËµÑÊ∫êË∂ÖÂçñ" title="Direct link to ËäÇÁÇπÁîªÂÉèÂíå Mid ËµÑÊ∫êË∂ÖÂçñ">‚Äã</a></h3><p>Koordinator ‰∏≠Â∞ÜËäÇÁÇπËµÑÊ∫êÂàÜ‰∏∫4ÁßçËµÑÊ∫ê‰ºòÂÖàÁ∫ßÊ®°Âûã Prod„ÄÅMid„ÄÅBatch Âíå FreeÔºå‰Ωé‰ºòÂÖàÁ∫ßËµÑÊ∫êÂèØ‰ª•Â§çÁî®È´ò‰ºòÂÖàÁ∫ßÂ∑≤ÂàÜÈÖç‰ΩÜÊú™‰ΩøÁî®ÁöÑÁâ©ÁêÜËµÑÊ∫êÔºå‰ª•ÊèêÂçáÁâ©ÁêÜËµÑÊ∫êÂà©Áî®ÁéáÔºõÂêåÊó∂ÔºåËµÑÊ∫ê‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÊèê‰æõÁöÑËµÑÊ∫ê‰πüË∂äÁ®≥ÂÆöÔºå‰æãÂ¶Ç Batch ËµÑÊ∫êÈááÁî®È´ò‰ºòÂÖàÁ∫ßËµÑÊ∫êÁü≠ÊúüÔºàshort-termÔºâÂ∑≤ÂàÜÈÖç‰ΩÜÊú™‰ΩøÁî®ÁöÑË∂ÖÂçñËµÑÊ∫êÔºåËÄå Mid ËµÑÊ∫êÈááÁî®È´ò‰ºòÂÖàÁ∫ßËµÑÊ∫êÈïøÂë®ÊúüÔºàlong-termÔºâÂ∑≤ÂàÜÈÖç‰ΩÜÊú™‰ΩøÁî®ÁöÑË∂ÖÂçñËµÑÊ∫ê„ÄÇ‰∏çÂêåËµÑÊ∫ê‰ºòÂÖàÁ∫ßÊ®°ÂûãÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p><p><img loading="lazy" alt="resource-priority-model" src="/assets/images/resource-model-0f6ca53f0a140a2be9705e75758caf22.png" width="1058" height="353" class="img_ev3q"></p><p>Koordinator v1.3.0 Êñ∞Â¢û‰∫ÜËäÇÁÇπÁîªÂÉèËÉΩÂäõÔºåÂü∫‰∫é Prod ÁöÑÂéÜÂè≤ËµÑÊ∫êÁî®ÈáèËøõË°åÂ≥∞ÂÄºÈ¢ÑÊµãÔºå‰ª•ÊîØÊåÅ Mid-tier ÁöÑËµÑÊ∫êË∂ÖÂçñË∞ÉÂ∫¶„ÄÇMid ËµÑÊ∫êÁöÑË∂ÖÂçñËÆ°ÁÆóÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MidAllocatable := min(ProdReclaimable, NodeAllocatable * thresholdRatio)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProdReclaimable := max(0, ProdAllocated - ProdPeak * (1 + safeMargin))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>ProdPeak</code>ÔºöÈÄöËøáËäÇÁÇπÁîªÂÉèÔºåÈ¢Ñ‰º∞ÁöÑËäÇÁÇπ‰∏äÂ∑≤Ë∞ÉÂ∫¶ Prod Pod Âú®‰∏≠ÈïøÂë®ÊúüÂÜÖÔºàe.g. 12hÔºâÁöÑÁî®ÈáèÂ≥∞ÂÄº„ÄÇ</li><li><code>ProdReclaimable</code>ÔºöÂü∫‰∫éËäÇÁÇπÁîªÂÉèÁªìÊûúÔºåÈ¢Ñ‰º∞Âú®‰∏≠ÈïøÂë®ÊúüÂÜÖÂèØÂ§çÁî®ÁöÑ Prod ËµÑÊ∫ê„ÄÇ</li><li><code>MidAllocatable</code>ÔºöËäÇÁÇπ‰∏äÂèØÂàÜÈÖçÁöÑ Mid ËµÑÊ∫ê„ÄÇ</li></ul><p>Ê≠§Â§ñÔºåMid ËµÑÊ∫êÁöÑÂçïÊú∫ÈöîÁ¶ª‰øùÈöúÂ∞ÜÂú®‰∏ã‰∏™ÁâàÊú¨ÂæóÂà∞ÂÆåÂñÑÔºåÁõ∏ÂÖ≥Âä®ÊÄÅÊï¨ËØ∑ÂÖ≥Ê≥®<a href="https://github.com/koordinator-sh/koordinator/issues/1442" target="_blank" rel="noopener noreferrer">Issue #1442</a>„ÄÇ
Âú® v1.3.0 ÁâàÊú¨‰∏≠ÔºåÁî®Êà∑ÂèØ‰ª•Êü•ÁúãÂíåÊèê‰∫§ Mid-tier ÁöÑË∂ÖÂçñËµÑÊ∫êÔºå‰πüÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã Prometheus metrics Êù•ËßÇÊµãËäÇÁÇπÁîªÂÉèÁöÑË∂ãÂäøÂèòÂåñ„ÄÇ</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Êü•ÁúãËäÇÁÇπÁöÑCPUËµÑÊ∫êÁîªÂÉèÔºåreclaimableÊåáÊ†áË°®Á§∫È¢ÑÊµãÁöÑÂèØÂõûÊî∂ËµÑÊ∫êÈáèÔºåpredictorÂØπÂ∫î‰∏çÂêåÁöÑÈ¢ÑÊµãÊ®°Âûã</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">koordlet_node_predicted_resource_reclaimable</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;test-node&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">predictor</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;minPredictor&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">resource</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;cpu&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">unit</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;core&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Êü•ÁúãËäÇÁÇπÁöÑÂÜÖÂ≠òËµÑÊ∫êÁîªÂÉèÔºåreclaimableÊåáÊ†áË°®Á§∫È¢ÑÊµãÁöÑÂèØÂõûÊî∂ËµÑÊ∫êÈáèÔºåpredictorÂØπÂ∫î‰∏çÂêåÁöÑÈ¢ÑÊµãÊ®°Âûã</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">koordlet_node_predicted_resource_reclaimable</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;test-node&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">predictor</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;minPredictor&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">resource</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;memory&quot;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">unit</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;byte&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> test-node -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: test-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allocatable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu: </span><span class="token string" style="color:#e3116c">&#x27;32&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory: 129636240Ki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pods: </span><span class="token string" style="color:#e3116c">&#x27;110&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/mid-cpu: </span><span class="token string" style="color:#e3116c">&#x27;16000&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># allocatable cpu milli-cores for Mid-tier pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/mid-memory: 64818120Ki </span><span class="token comment" style="color:#999988;font-style:italic"># allocatable memory bytes for Mid-tier pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capacity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu: </span><span class="token string" style="color:#e3116c">&#x27;32&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory: 129636240Ki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pods: </span><span class="token string" style="color:#e3116c">&#x27;110&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/mid-cpu: </span><span class="token string" style="color:#e3116c">&#x27;16000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/mid-memory: 64818120Ki</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÂÖ≥‰∫é Koordinator ËäÇÁÇπÁîªÂÉèÁöÑËÆæËÆ°ÔºåËØ¶ËßÅ<a href="/docs/designs/node-prediction">Design - Node Prediction</a>„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ∂‰ªñÂäüËÉΩ">ÂÖ∂‰ªñÂäüËÉΩ<a href="#ÂÖ∂‰ªñÂäüËÉΩ" class="hash-link" aria-label="Direct link to ÂÖ∂‰ªñÂäüËÉΩ" title="Direct link to ÂÖ∂‰ªñÂäüËÉΩ">‚Äã</a></h3><p>ÈÄöËøá <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v1.3.0" target="_blank" rel="noopener noreferrer">v1.3.0 Release</a> È°µÈù¢ÔºåÂèØ‰ª•ÁúãÂà∞Êõ¥Â§öÂåÖÂê´Âú® v1.3.0 ÁâàÊú¨ÁöÑÊñ∞Â¢ûÂäüËÉΩ„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Êú™Êù•ËÆ°Âàí">Êú™Êù•ËÆ°Âàí<a href="#Êú™Êù•ËÆ°Âàí" class="hash-link" aria-label="Direct link to Êú™Êù•ËÆ°Âàí" title="Direct link to Êú™Êù•ËÆ°Âàí">‚Äã</a></h2><p>Âú®Êé•‰∏ãÊù•ÁöÑÁâàÊú¨‰∏≠ÔºåKoordinator ÁõÆÂâçËßÑÂàí‰∫Ü‰ª•‰∏ãÂäüËÉΩÔºö</p><ul><li>Á°¨‰ª∂ÊãìÊâëÊÑüÁü•Ë∞ÉÂ∫¶ÔºåÁªºÂêàËÄÉËôëËäÇÁÇπ CPU„ÄÅÂÜÖÂ≠ò„ÄÅGPU Á≠âÂ§ö‰∏™ËµÑÊ∫êÁª¥Â∫¶ÁöÑÊãìÊâëÂÖ≥Á≥ªÔºåÂú®ÈõÜÁæ§ËåÉÂõ¥ÂÜÖËøõË°åË∞ÉÂ∫¶‰ºòÂåñ„ÄÇ</li><li>Êèê‰æõËäÇÁÇπÂèØÂàÜÈÖçËµÑÊ∫êÁöÑÊîæÂ§ßÊú∫Âà∂„ÄÇ</li><li>NRI ËµÑÊ∫êÁÆ°ÁêÜÊ®°ÂºèÁöÑÂÆåÂñÑÂíåÂ¢ûÂº∫„ÄÇ</li></ul><p>Êõ¥Â§ö‰ø°ÊÅØÔºåÊï¨ËØ∑ÂÖ≥Ê≥® <a href="https://github.com/koordinator-sh/koordinator/milestone/12" target="_blank" rel="noopener noreferrer">Milestone v1.4.0</a>„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ÁªìËØ≠">ÁªìËØ≠<a href="#ÁªìËØ≠" class="hash-link" aria-label="Direct link to ÁªìËØ≠" title="Direct link to ÁªìËØ≠">‚Äã</a></h2><p>ÊúÄÂêéÔºåKoordinator ÊòØ‰∏Ä‰∏™ÂºÄÊîæÁöÑÁ§æÂå∫ÔºåÊ¨¢ËøéÂπøÂ§ß‰∫ëÂéüÁîüÁà±Â•ΩËÄÖ‰ª¨ÈöèÊó∂ÈÄöËøáÂêÑÁßçÊñπÂºèÂèÇ‰∏éÂÖ±Âª∫ÔºåÊó†ËÆ∫ÊÇ®Âú®‰∫ëÂéüÁîüÈ¢ÜÂüüÊòØÂàùÂ≠¶‰πçÂà∞ËøòÊòØÈ©æËΩªÂ∞±ÁÜüÔºåÊàë‰ª¨ÈÉΩÈùûÂ∏∏ÊúüÂæÖÂê¨Âà∞ÊÇ®ÁöÑÂ£∞Èü≥ÔºÅ</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v1.2.0">Koordinator v1.2: ÊîØÊåÅËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÔºåÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-07T00:00:00.000Z" itemprop="datePublished">April 7, 2023</time> ¬∑ <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/zwzhang0107" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/zwzhang0107.png" alt="Zuowei Zhang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/zwzhang0107" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Zuowei Zhang</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ËÉåÊôØ">ËÉåÊôØ<a href="#ËÉåÊôØ" class="hash-link" aria-label="Direct link to ËÉåÊôØ" title="Direct link to ËÉåÊôØ">‚Äã</a></h2><p>Koordinator ÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÈ°πÁõÆÔºåÂü∫‰∫éÈòøÈáåÂ∑¥Â∑¥Âú®ÂÆπÂô®Ë∞ÉÂ∫¶È¢ÜÂüüÂ§öÂπ¥Á¥ØÁßØÁöÑÁªèÈ™åÂ≠µÂåñËØûÁîüÔºåÂèØ‰ª•ÊèêÂçáÂÆπÂô®ÊÄßËÉΩÔºåÈôç‰ΩéÈõÜÁæ§ËµÑÊ∫êÊàêÊú¨„ÄÇÈÄöËøáÊ∑∑ÈÉ®„ÄÅËµÑÊ∫êÁîªÂÉè„ÄÅË∞ÉÂ∫¶‰ºòÂåñÁ≠âÊäÄÊúØËÉΩÂäõÔºå
ËÉΩÂ§üÊèêÈ´òÂª∂ËøüÊïèÊÑüÁöÑÂ∑•‰ΩúË¥üËΩΩÂíåÊâπÂ§ÑÁêÜ‰Ωú‰∏öÁöÑËøêË°åÊïàÁéáÂíåÂèØÈù†ÊÄßÔºå‰ºòÂåñÈõÜÁæ§ËµÑÊ∫ê‰ΩøÁî®ÊïàÁéá„ÄÇ</p><p>‰ªé 2022 Âπ¥ 4 ÊúàÂèëÂ∏É‰ª•Êù•ÔºåKoordinator ËøÑ‰ªä‰∏ÄÂÖ±Ëø≠‰ª£ÂèëÂ∏É‰∫Ü 10 ‰∏™ÁâàÊú¨ÔºåÂê∏Âºï‰∫Ü‰∫ÜÂåÖÊã¨ÈòøÈáåÂ∑¥Â∑¥„ÄÅÂ∞èÁ±≥„ÄÅÂ∞èÁ∫¢‰π¶„ÄÅÁà±Â•áËâ∫„ÄÅ360„ÄÅÊúâËµû Á≠âÂú®ÂÜÖÁöÑÂ§ßÈáè‰ºòÁßÄÂ∑•Á®ãÂ∏àÂèÇ‰∏éË¥°ÁåÆ„ÄÇ
ÈöèÁùÄ2023Âπ¥Êò•Â§©ÁöÑÊù•‰∏¥ÔºåKoordinator‰πüËøéÊù•‰∫ÜÂÆÉÁöÑ‰∏ÄÂë®Âπ¥ËØûËæ∞ÔºåÂú®Ê≠§Êàë‰ª¨ÂæàÈ´òÂÖ¥ÁöÑÂêëÂ§ßÂÆ∂ÂÆ£Â∏ÉÔºåKoordinator v1.2ÁâàÊú¨Ê≠£ÂºèÂèëÂ∏É„ÄÇÊñ∞ÁâàÊú¨‰∏≠KoordinatorÊîØÊåÅ‰∫ÜËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂäüËÉΩÔºå
Âπ∂ÂÖºÂÆπ‰∫ÜK8sÁ§æÂå∫ÁöÑÈáçË∞ÉÂ∫¶Á≠ñÁï•ÔºåÂêåÊó∂Âú®ÂçïÊú∫‰æßÂ¢ûÂä†‰∫ÜÂØπAMDÁéØÂ¢ÉL3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªÁöÑÊîØÊåÅ„ÄÇ</p><p>Âú®Êñ∞ÁâàÊú¨‰∏≠ÔºåÂÖ±Êúâ12‰ΩçÊñ∞Âä†ÂÖ•ÁöÑÂºÄÂèëËÄÖÂèÇ‰∏éÂà∞‰∫ÜKoordiantorÁ§æÂå∫ÁöÑÂª∫ËÆæÔºå‰ªñ‰ª¨ÊòØ@Re-GrhÔºå@chengweiv5Ôºå@kingeasternsunÔºå@shelwinnnÔºå@yuexian1234Ôºå@Syulin7Ôºå@tzzcfrank
@DengerweiÔºå@comploneÔºå@AlbeeSoÔºå@xigangÔºå@leason00ÔºåÊÑüË∞¢‰ª•‰∏äÂºÄÂèëËÄÖÁöÑË¥°ÁåÆÂíåÂèÇ‰∏é„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª">ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª<a href="#ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª" class="hash-link" aria-label="Direct link to ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª" title="Direct link to ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïô">ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïô<a href="#ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïô" class="hash-link" aria-label="Direct link to ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïô" title="Direct link to ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïô">‚Äã</a></h3><p>Ê∑∑ÈÉ®Âú∫ÊôØ‰∏≠ÂåÖÂê´ÁöÑÂ∫îÁî®ÂΩ¢ÊÄÅÂ§öÁßçÂ§öÊ†∑ÔºåÈô§‰∫ÜÂ∑≤ÁªèÂÆåÊàê‰∫ëÂéüÁîüÂåñÁöÑÂÆπÂô®ÔºåËøòÂåÖÂê´ÂæàÂ§öÂ∞öÊú™ÂÆåÊàêÂÆπÂô®ÂåñÁöÑÂ∫îÁî®ÔºåËøôÈÉ®ÂàÜÂ∫îÁî®‰ºö‰ª•ËøõÁ®ãÁöÑÂΩ¢ÂºèÂú®ÂÆø‰∏ªÊú∫‰∏ä‰∏éK8sÂÆπÂô®ÂÖ±ÂêåËøêË°å„ÄÇ
‰∏∫‰∫ÜÂáèÂ∞ëK8sÂ∫îÁî®ÂíåÂÖ∂‰ªñÁ±ªÂûãÂ∫îÁî®Âú®ËäÇÁÇπ‰æßÁöÑËµÑÊ∫êÁ´û‰∫âÔºåKoordinator ÊîØÊåÅÂ∞Ü‰∏ÄÈÉ®ÂàÜËµÑÊ∫êÈ¢ÑÁïôÔºå‰ΩøÂÖ∂Êó¢‰∏çÂèÇ‰∏éË∞ÉÂ∫¶Âô®ÁöÑËµÑÊ∫êË∞ÉÂ∫¶Ôºå‰πü‰∏çÂèÇ‰∏éËäÇÁÇπ‰æßÁöÑËµÑÊ∫êÂàÜÈÖçÔºåËææÂà∞ËµÑÊ∫êÂàÜÈöî‰ΩøÁî®ÁöÑÊïàÊûú„ÄÇ
Âú®v1.2ÁâàÊú¨‰∏≠ÔºåKoordiantorÂ∑≤ÁªèÊîØÊåÅCPUÂíåÂÜÖÂ≠òËµÑÊ∫êÁª¥Â∫¶ÁöÑÈ¢ÑÁïôÔºåÂπ∂ÂÖÅËÆ∏Áõ¥Êé•ÊåáÂÆöÈ¢ÑÁïôÁöÑCPUÁºñÂè∑ÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ã„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂ£∞Êòé">ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂ£∞Êòé<a href="#ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂ£∞Êòé" class="hash-link" aria-label="Direct link to ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂ£∞Êòé" title="Direct link to ËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂ£∞Êòé">‚Äã</a></h4><p>Âú®Node‰∏äÂèØ‰ª•ÈÖçÁΩÆÈúÄË¶ÅÈ¢ÑÁïôÁöÑËµÑÊ∫êÈáèÊàñÂÖ∑‰ΩìÁöÑCPUÁºñÂè∑Ôºå‰∏æ‰æãÂ¶Ç‰∏ãÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fake</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># specific 5 cores will be calculated, e.g. 0, 1, 2, 3, 4, and then those core will be reserved.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">node.koordinator.sh/reservation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;resources&quot;:{&quot;cpu&quot;:&quot;5&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fake</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># the cores 0, 1, 2, 3 will be reserved.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">node.koordinator.sh/reservation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;reservedCPUs&quot;:&quot;0-3&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÂçïÊú∫ÁªÑ‰ª∂KoordletÂú®‰∏äÊä•ËäÇÁÇπËµÑÊ∫êÊãìÊâë‰ø°ÊÅØÊó∂Ôºå‰ºöÂ∞ÜÂÖ∑‰ΩìÈ¢ÑÁïôÁöÑCPUÁºñÂè∑Êõ¥Êñ∞Âà∞NodeResourceTopologyÂØπË±°ÁöÑAnnotation‰∏≠„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Ë∞ÉÂ∫¶ÂèäÈáçË∞ÉÂ∫¶Âú∫ÊôØÈÄÇÈÖç">Ë∞ÉÂ∫¶ÂèäÈáçË∞ÉÂ∫¶Âú∫ÊôØÈÄÇÈÖç<a href="#Ë∞ÉÂ∫¶ÂèäÈáçË∞ÉÂ∫¶Âú∫ÊôØÈÄÇÈÖç" class="hash-link" aria-label="Direct link to Ë∞ÉÂ∫¶ÂèäÈáçË∞ÉÂ∫¶Âú∫ÊôØÈÄÇÈÖç" title="Direct link to Ë∞ÉÂ∫¶ÂèäÈáçË∞ÉÂ∫¶Âú∫ÊôØÈÄÇÈÖç">‚Äã</a></h4><p>Ë∞ÉÂ∫¶Âô®Âú®ÂàÜÈÖçËµÑÊ∫êÁöÑËøáÁ®ã‰∏≠ÔºåÊ∂âÂèä‰∫ÜÂ§öÁßçÊÉÖÂÜµÁöÑËµÑÊ∫êÊ†°È™åÔºåÂåÖÊã¨QuotaÁÆ°ÁêÜÔºåËäÇÁÇπÂÆπÈáèÊ†°È™åÔºåCPUÊãìÊâëÊ†°È™åÁ≠âÁ≠âÔºåËøô‰∫õÂú∫ÊôØÈÉΩÈúÄË¶ÅÂ¢ûÂä†ÂØπËäÇÁÇπÈ¢ÑÁïôËµÑÊ∫êÁöÑËÄÉËôëÔºå‰æãÂ¶ÇÔºåË∞ÉÂ∫¶Âô®Âú®ËÆ°ÁÆóËäÇÁÇπCPUÂÆπÈáèÊó∂ÔºåÈúÄË¶ÅÂ∞ÜËäÇÁÇπÈ¢ÑÁïôÁöÑËµÑÊ∫êËøõË°åÊâ£Èô§„ÄÇ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cpus(alloc) = cpus(total) - cpus(allocated) - cpus(kubeletReserved) - cpus(nodeAnnoReserved)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ê≠§Â§ñÔºåÂØπ‰∫éBatchÊ∑∑ÈÉ®Ë∂ÖÂçñËµÑÊ∫êÁöÑËÆ°ÁÆóÂêåÊ†∑ÈúÄË¶ÅÂ∞ÜËøôÈÉ®ÂàÜËµÑÊ∫êÊâ£Èô§ÔºåËÄåËÄÉËôëÂà∞ËäÇÁÇπ‰∏≠ËøòÂåÖÊã¨‰∏ÄÈÉ®ÂàÜÁ≥ªÁªüËøõÁ®ãÁöÑËµÑÊ∫êÊ∂àËÄóÔºåKoord-ManagerÂú®ËÆ°ÁÆóÊó∂‰ºöÂèñËäÇÁÇπÈ¢ÑÁïôÂíåÁ≥ªÁªüÁî®ÈáèÁöÑÊúÄÂ§ßÂÄºÔºåÂÖ∑‰Ωì‰∏∫Ôºö</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">reserveRatio = (100-thresholdPercent) / 100.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node.reserved = node.alloc * reserveRatio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">system.used = max(node.used - pod.used, node.anno.reserved)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node(BE).Alloc = Node.Alloc - Node.Reserved - System.Used - Pod(LS).Used</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÂØπ‰∫éÈáçË∞ÉÂ∫¶ÔºåÂêÑÊèí‰ª∂Á≠ñÁï•ÈúÄË¶ÅÂú®ËäÇÁÇπÂÆπÈáè„ÄÅÂà©Áî®ÁéáËÆ°ÁÆóÁ≠âÂú∫ÊôØÊÑüÁü•ËäÇÁÇπÈ¢ÑÁïôËµÑÊ∫êÈáèÔºåÊ≠§Â§ñÔºåËã•Â∑≤ÁªèÊúâÂÆπÂô®Âç†Áî®‰∫ÜËäÇÁÇπÁöÑÈ¢ÑÁïôËµÑÊ∫êÔºåÈáçË∞ÉÂ∫¶ÈúÄË¶ÅËÄÉËôëÂ∞ÜÂÖ∂ËøõË°åÈ©±ÈÄêÔºåÁ°Æ‰øùËäÇÁÇπÂÆπÈáèÂæóÂà∞Ê≠£Á°ÆÁÆ°ÁêÜÔºå
ÈÅøÂÖçËµÑÊ∫êÁ´û‰∫â„ÄÇËøôÈÉ®ÂàÜÈáçË∞ÉÂ∫¶Áõ∏ÂÖ≥ÁöÑÂäüËÉΩÔºåÊàë‰ª¨Â∞ÜÂú®ÂêéÁª≠ÁâàÊú¨ËøõË°åÊîØÊåÅÔºå‰πüÊ¨¢ËøéÂπøÂ§ßÁà±Â•ΩËÄÖ‰ª¨‰∏ÄËµ∑ÂèÇ‰∏éÂÖ±Âª∫„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÂçïÊú∫ËµÑÊ∫êÁÆ°ÁêÜ">ÂçïÊú∫ËµÑÊ∫êÁÆ°ÁêÜ<a href="#ÂçïÊú∫ËµÑÊ∫êÁÆ°ÁêÜ" class="hash-link" aria-label="Direct link to ÂçïÊú∫ËµÑÊ∫êÁÆ°ÁêÜ" title="Direct link to ÂçïÊú∫ËµÑÊ∫êÁÆ°ÁêÜ">‚Äã</a></h4><p>ÂØπ‰∫éLSÁ±ªÂûãÁöÑPodÔºåÂçïÊú∫KoordletÁªÑ‰ª∂‰ºöÊ†πÊçÆCPUÂàÜÈÖçÊÉÖÂÜµÂä®ÊÄÅËÆ°ÁÆóÂÖ±‰∫´CPUÊ±†ÔºåÂØπ‰∫éËäÇÁÇπÈ¢ÑÁïôÁöÑCPUÊ†∏ÂøÉ‰ºöÂ∞ÜÂÖ∂ÊéíÈô§Âú®Â§ñÔºåÁ°Æ‰øùLSÁ±ªÂûãpodÂíåÂÖ∂‰ªñÈùûÂÆπÂô®ÂåñÁöÑËøõÁ®ãËµÑÊ∫êÈöîÁ¶ª„ÄÇ
ÂêåÊó∂ÔºåÂØπ‰∫éÂçïÊú∫Áõ∏ÂÖ≥ÁöÑQoSÁ≠ñÁï•Ôºå‰æãÂ¶ÇCPUSuppressÂéãÂà∂Á≠ñÁï•Âú®ËÆ°ÁÆóËäÇÁÇπÂà©Áî®ÁéáÊó∂Ôºå‰ºöÂ∞ÜÈ¢ÑÁïôËµÑÊ∫êÈáèËÄÉËôëÂú®ÂÜÖ„ÄÇ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">suppress(BE) := node.Total * SLOPercent - pod(LS).Used - max(system.Used, node.anno.reserved)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÂÖ≥‰∫éËäÇÁÇπËµÑÊ∫êÈ¢ÑÁïôÂäüËÉΩÁöÑËØ¶ÁªÜËØ¥ÊòéÔºåÂèØ‰ª•ÂèÇËÄÉ <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20221227-node-resource-reservation.md" target="_blank" rel="noopener noreferrer">ËÆæËÆ°ÊñáÊ°£</a> ‰∏≠ÁöÑ‰ªãÁªç„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•">ÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•<a href="#ÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•" class="hash-link" aria-label="Direct link to ÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•" title="Direct link to ÂÖºÂÆπÁ§æÂå∫ÈáçË∞ÉÂ∫¶Á≠ñÁï•">‚Äã</a></h3><p>ÂæóÁõä‰∫é Koordinator Descheduler ÁöÑÊ°ÜÊû∂Êó•ÁõäÊàêÁÜüÔºåÂú® Koordinator v1.2 ÁâàÊú¨‰∏≠ÔºåÈÄöËøáÂºïÂÖ•‰∏ÄÁßçÊé•Âè£ÈÄÇÈÖçÊú∫Âà∂ÔºåÂèØ‰ª•Êó†ÁºùÁöÑÂØπ Kubernetes Desceheduler Â∑≤ÊúâÊèí‰ª∂ËøõË°åÂÖºÂÆπÔºåÂú®‰ΩøÁî®Êó∂ÊÇ®Âè™ÈúÄÈÉ®ÁΩ≤ Koordinator Descheduler Âç≥ÂèØ‰ΩøÁî®Âà∞‰∏äÊ∏∏ÁöÑÂÖ®ÈÉ®ÂäüËÉΩ„ÄÇ</p><p>Âú®ÂÆûÁé∞‰∏äÔºåKoordinator Descheduler ÈÄöËøá import ‰∏äÊ∏∏‰ª£Á†Å‰∏çÂÅö‰ªª‰Ωï‰æµÂÖ•ÂºèÁöÑÊîπÂä®Ôºå‰øùËØÅÂÆåÂÖ®ÂÖºÂÆπ‰∏äÊ∏∏ÊâÄÊúâÁöÑÊèí‰ª∂„ÄÅÂèÇÊï∞ÈÖçÁΩÆ‰ª•ÂèäÂÖ∂ËøêË°åÁ≠ñÁï•„ÄÇÂêåÊó∂ÔºåKoordinator ÂÖÅËÆ∏Áî®Êà∑‰∏∫‰∏äÊ∏∏Êèí‰ª∂ÊåáÂÆöÂ¢ûÂº∫ÁöÑ evictorÔºå‰ªéËÄåÂ§çÁî® Koordinator Êèê‰æõÁöÑËµÑÊ∫êÈ¢ÑÁïô„ÄÅÂ∑•‰ΩúË¥üËΩΩÂèØÁî®ÊÄß‰øùÈöú‰ª•ÂèäÂÖ®Â±ÄÊµÅÊéßÁ≠âÂÆâÂÖ®ÊÄßÁ≠ñÁï•„ÄÇ</p><p>ÂÖºÂÆπÁöÑÊèí‰ª∂ÂàóË°®ÂåÖÊã¨Ôºö</p><ul><li>HighNodeUtilization</li><li>LowNodeUtilization</li><li>PodLifeTime</li><li>RemoveFailedPods</li><li>RemoveDuplicates</li><li>RemovePodsHavingTooManyRestarts</li><li>RemovePodsViolatingInterPodAntiAffinity</li><li>RemovePodsViolatingNodeAffinity</li><li>RemovePodsViolatingNodeTaints</li><li>RemovePodsViolatingTopologySpreadConstraint</li><li>DefaultEvictor</li></ul><p>Âú®‰ΩøÁî®Êó∂ÔºåÂèØ‰ª•ÂèÇËÄÉÂ¶Ç‰∏ãÁöÑÊñπÂºèÈÖçÁΩÆÔºå‰ª• RemovePodsHavingTooManyRestarts ‰∏∫‰æãÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> descheduler/v1alpha2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DeschedulerConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">clientConnection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kubeconfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/Users/joseph/asi/koord-2/admin.kubeconfig&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">leaderElection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">leaderElect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">descheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceNamespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">deschedulingInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dryRun</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">profiles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koord</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">descheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">plugins</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">evict</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MigrationController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">deschedule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RemovePodsHavingTooManyRestarts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pluginConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RemovePodsHavingTooManyRestarts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> descheduler/v1alpha2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RemovePodsHavingTooManyRestartsArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">podRestartThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ËµÑÊ∫êÈ¢ÑÁïôË∞ÉÂ∫¶ËÉΩÂäõÂ¢ûÂº∫">ËµÑÊ∫êÈ¢ÑÁïôË∞ÉÂ∫¶ËÉΩÂäõÂ¢ûÂº∫<a href="#ËµÑÊ∫êÈ¢ÑÁïôË∞ÉÂ∫¶ËÉΩÂäõÂ¢ûÂº∫" class="hash-link" aria-label="Direct link to ËµÑÊ∫êÈ¢ÑÁïôË∞ÉÂ∫¶ËÉΩÂäõÂ¢ûÂº∫" title="Direct link to ËµÑÊ∫êÈ¢ÑÁïôË∞ÉÂ∫¶ËÉΩÂäõÂ¢ûÂº∫">‚Äã</a></h3><p>Koordinator Âú®ÊØîËæÉÊó©ÊúüÁöÑÁâàÊú¨‰∏≠ÂºïÂÖ•‰∫Ü Reservation Êú∫Âà∂ÔºåÈÄöËøáÈ¢ÑÁïôËµÑÊ∫êÂπ∂Â§çÁî®ÁªôÊåáÂÆöÁâπÂæÅÁöÑ Pod ‰ΩøÁî®ÔºåÁî®‰∫éÂ∏ÆÂä©Ëß£ÂÜ≥ËµÑÊ∫ê‰∫§‰ªòÁ°ÆÂÆöÊÄßÈóÆÈ¢ò„ÄÇ
‰æãÂ¶ÇÈáçË∞ÉÂ∫¶Âú∫ÊôØ‰∏≠ÊúüÊúõË¢´È©±ÈÄêÁöÑ Pod ‰∏ÄÂÆöÊúâËµÑÊ∫êÂèØ‰ª•‰ΩøÁî®ÔºåËÄå‰∏çÊòØË¢´È©±ÈÄêÂêéÊó†ËµÑÊ∫êÂèØÁî®ÂØºËá¥ÂºïËµ∑Á®≥ÂÆöÊÄßÈóÆÈ¢òÔºõÂèàÊàñËÄÖÈúÄË¶ÅÊâ©ÂÆπÊó∂Ôºå
‰∏Ä‰∫õ PaaS Âπ≥Âè∞Â∏åÊúõËÉΩÂ§üÂÖàÁ°ÆÂÆöÊòØÂê¶Êª°Ë∂≥Â∫îÁî®Ë∞ÉÂ∫¶ÁºñÊéíÁöÑËµÑÊ∫êÔºåÂÜçÂÜ≥ÂÆöÊòØÂê¶Êâ©ÂÆπÔºåÊàñËÄÖÊèêÂâçÂÅö‰∏Ä‰∫õÈ¢ÑÂ§áÂ∑•‰ΩúÁ≠â„ÄÇ</p><p>Koordinator Reservation ÈÄöËøá CRD ÂÆö‰πâÔºåÊØè‰∏™ Reservation ÂØπË±°‰ºöÂú® koord-scheduler ÂÜÖ‰º™ÈÄ†Êàê‰∏Ä‰∏™ Pod ËøõË°åË∞ÉÂ∫¶Ôºå
ËøôÊ†∑ÁöÑ Pod Êàë‰ª¨Áß∞‰∏∫ Reserve PodReserve Pod Â∞±ÂèØ‰ª•Â§çÁî®Â∑≤ÊúâÁöÑË∞ÉÂ∫¶Êèí‰ª∂ÂíåÊâìÂàÜÊèí‰ª∂ÊâæÂà∞ÂêàÈÄÇÁöÑËäÇÁÇπÔºåÂπ∂ÊúÄÁªàÂú®Ë∞ÉÂ∫¶Âô®ÂÜÖÈÉ®Áä∂ÊÄÅ‰∏≠Âç†ÊçÆÂØπÂ∫îÁöÑËµÑÊ∫ê„ÄÇ
Reservation Âú®ÂàõÂª∫Êó∂ÈÉΩ‰ºöÊåáÂÆöÈ¢ÑÁïôÁöÑËµÑÊ∫êÂ∞ÜÊù•Ë¶ÅÁªôÂì™‰∫õ Pod ‰ΩøÁî®ÔºåÂèØ‰ª•ÊåáÂÆöÂÖ∑‰ΩìÊüê‰∏™ PodÔºå‰πüÂèØ‰ª•ÊåáÂÆöÊüê‰∫õ workload ÂØπË±°ÔºåÊàñËÄÖÂÖ∑Â§áÊüê‰∫õÊ†áÁ≠æÁöÑ Pod ‰ΩøÁî®„ÄÇ
ÂΩìËøô‰∫õ Pod ÈÄöËøá koord-scheduler Ë∞ÉÂ∫¶Êó∂ÔºåË∞ÉÂ∫¶Âô®‰ºöÊâæÂà∞ÂèØ‰ª•Ë¢´ËØ• Pod ‰ΩøÁî®ÁöÑ Reservation ÂØπË±°ÔºåÂπ∂‰∏î‰ºòÂÖà‰ΩøÁî® Reservation ÁöÑËµÑÊ∫ê„ÄÇ
Âπ∂‰∏î Reservation Status ‰∏≠‰ºöËÆ∞ÂΩïË¢´Âì™‰∏™ Pod ‰ΩøÁî®Ôºå‰ª•Âèä Pod Annotations ‰∏≠‰πü‰ºöËÆ∞ÂΩï‰ΩøÁî®‰∫ÜÂì™‰∏™ Reservation„ÄÇ
Reservation Ë¢´‰ΩøÁî®ÂêéÔºå‰ºöËá™Âä®ÁöÑÊ∏ÖÁêÜÂÜÖÈÉ®Áä∂ÊÄÅÔºåÁ°Æ‰øùÂÖ∂‰ªñ Pod ‰∏ç‰ºöÂõ†‰∏∫ Reservation ÂØºËá¥Êó†Ê≥ïË∞ÉÂ∫¶„ÄÇ</p><p>Âú® Koordinator v1.2 ‰∏≠ÔºåÊàë‰ª¨ÂÅö‰∫ÜÂ§ßÂπÖÂ∫¶ÁöÑ‰ºòÂåñ„ÄÇÈ¶ñÂÖàÊàë‰ª¨ÊîæÂºÄ‰∫ÜÂè™ËÉΩ‰ΩøÁî® Reservation ÊåÅÊúâÁöÑËµÑÊ∫êÁöÑÈôêÂà∂ÔºåÂÖÅËÆ∏Ë∑®Âá∫ Reservation ÁöÑËµÑÊ∫êËæπÁïåÔºå
Êó¢ÂèØ‰ª•‰ΩøÁî® Reservation È¢ÑÁïôÁöÑËµÑÊ∫êÔºå‰πüÂèØ‰ª•‰ΩøÁî®ËäÇÁÇπ‰∏äÂâ©‰ΩôÁöÑËµÑÊ∫ê„ÄÇËÄå‰∏îÊàë‰ª¨ÈÄöËøáÈùû‰æµÂÖ•ÂºèÁöÑÊñπÂºèÊâ©Â±ï‰∫Ü Kubernetes Scheduler FrameworkÔºå
ÊîØÊåÅÈ¢ÑÁïôÁ≤æÁªÜÂåñËµÑÊ∫êÔºåÂç≥ÂèØ‰ª•È¢ÑÁïô CPU Ê†∏Âíå GPU ËÆæÂ§áÁ≠â„ÄÇÊàë‰ª¨‰πü‰øÆÊîπ‰∫Ü Reservation ÂèØ‰ª•Ë¢´ÈáçÂ§ç‰ΩøÁî®ÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÊîπ‰∏∫ AllocateOnceÔºå
Âç≥ Reservation ‰∏ÄÊó¶Ë¢´Êüê‰∏™ Pod ‰ΩøÁî®ÔºåËØ• Reservation ‰ºöË¢´Â∫üÂºÉ„ÄÇËøôÊ†∑ÁöÑÊîπÂä®ÊòØËÄÉËôëÂà∞ÔºåAllocateOnce Êõ¥ËÉΩË¶ÜÁõñÂ§ßÈÉ®ÂàÜÂú∫ÊôØÔºåËøôÊ†∑‰Ωú‰∏∫ÈªòËÆ§Ë°å‰∏∫ÔºåÂ§ßÂÆ∂Âú®‰ΩøÁî®Êó∂‰ºöÊõ¥ÁÆÄÂçï„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅamdÁéØÂ¢É‰∏ãÁöÑl3-cacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ª">ÊîØÊåÅAMDÁéØÂ¢É‰∏ãÁöÑL3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ª<a href="#ÊîØÊåÅamdÁéØÂ¢É‰∏ãÁöÑl3-cacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ª" class="hash-link" aria-label="Direct link to ÊîØÊåÅAMDÁéØÂ¢É‰∏ãÁöÑL3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ª" title="Direct link to ÊîØÊåÅAMDÁéØÂ¢É‰∏ãÁöÑL3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ª">‚Äã</a></h3><p>Âú®v0.3.0ÁâàÊú¨‰∏≠ÔºåKoordiantorÂ∑≤ÁªèÊîØÊåÅ‰∫ÜIntelÁéØÂ¢ÉÁöÑL3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªÔºåÂú®ÊúÄÊñ∞ÁöÑ1.2.0ÁâàÊú¨‰∏≠Êàë‰ª¨Êñ∞Â¢û‰∫ÜÂØπAMDÁéØÂ¢ÉÁöÑÊîØÊåÅ„ÄÇ
LinuxÂÜÖÊ†∏L3 CacheÂíåÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªËÉΩÂäõÊèê‰æõ‰∫ÜÁªü‰∏ÄÁöÑresctrlÊé•Âè£ÔºåÂêåÊó∂ÊîØÊåÅIntelÂíåAMDÁéØÂ¢ÉÔºå‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºåIntelÊèê‰æõÁöÑÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªÊé•Âè£‰∏∫ÁôæÂàÜÊØîÊ†ºÂºèÔºå
ËÄåAMDÊèê‰æõÁöÑÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªÊé•Âè£‰∏∫ÁªùÂØπÂÄºÊ†ºÂºèÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ã„ÄÇ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Intel Format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># resctrl schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L3:0=3ff;1=3ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MB:0=100;1=100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># AMD Format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># resctrl schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L3:0=ffff;1=ffff;2=ffff;3=ffff;4=ffff;5=ffff;6=ffff;7=ffff;8=ffff;9=ffff;10=ffff;11=ffff;12=ffff;13=ffff;14=ffff;15=ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MB:0=2048;1=2048;2=2048;3=2048;4=2048;5=2048;6=2048;7=2048;8=2048;9=2048;10=2048;11=2048;12=2048;13=2048;14=2048;15=2048</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Êé•Âè£Ê†ºÂºèÂåÖÂê´‰∏§ÈÉ®ÂàÜÔºåL3Ë°®Á§∫ÂØπÂ∫îÁöÑsocketÊàñCCDÂèØÁî®ÁöÑ‚ÄúË∑ØÊï∞‚ÄùÔºàwayÔºâÔºå‰ª•16ËøõÂà∂ÁöÑÊï∞ÊçÆÊ†ºÂºèË°®Á§∫ÔºåÊØè‰∏™ÊØîÁâπ‰ΩçË°®Á§∫‰∏ÄË∑Ø
MBË°®Á§∫ÂØπÂ∫îÁöÑsocketÊàñCCDÂèØ‰ª•‰ΩøÁî®ÁöÑÂÜÖÂ≠òÂ∏¶ÂÆΩËåÉÂõ¥ÔºåIntelÂèØÈÄâËåÉÂõ¥‰∏∫0~100ÁöÑÁôæÂàÜÊØîÊ†ºÂºèÔºåAMDÂØπÂ∫îÁöÑ‰∏∫ÁªùÂØπÂÄºÊ†ºÂºèÔºåÂçï‰Ωç‰∏∫Gb/sÔºå2048Ë°®Á§∫‰∏çÈôêÂà∂„ÄÇ
KoordiantorÁªü‰∏ÄÊèê‰æõ‰∫ÜÁôæÂàÜÊØîÊ†ºÂºèÁöÑÊé•Âè£ÔºåÂπ∂Ëá™Âä®ÊÑüÁü•ËäÇÁÇπÁéØÂ¢ÉÊòØÂê¶‰∏∫AMDÔºåÂÜ≥ÂÆöresctrlÊé•Âè£‰∏≠Â°´ÂÜôÁöÑÊ†ºÂºè„ÄÇ</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-qos-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">&quot;clusterStrategy&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;lsClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;resctrlQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeStartPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeEndPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;MBAPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;beClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;resctrlQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeStartPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeEndPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;MBAPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ∂‰ªñÂäüËÉΩ">ÂÖ∂‰ªñÂäüËÉΩ<a href="#ÂÖ∂‰ªñÂäüËÉΩ" class="hash-link" aria-label="Direct link to ÂÖ∂‰ªñÂäüËÉΩ" title="Direct link to ÂÖ∂‰ªñÂäüËÉΩ">‚Äã</a></h3><p>ÈÄöËøá <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v1.2.0" target="_blank" rel="noopener noreferrer">v1.2 release</a> È°µÈù¢ÔºåÂèØ‰ª•ÁúãÂà∞Êõ¥Â§öÁâàÊú¨ÊâÄÂåÖÂê´ÁöÑÊñ∞Â¢ûÂäüËÉΩ„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Êú™Êù•ËÆ°Âàí">Êú™Êù•ËÆ°Âàí<a href="#Êú™Êù•ËÆ°Âàí" class="hash-link" aria-label="Direct link to Êú™Êù•ËÆ°Âàí" title="Direct link to Êú™Êù•ËÆ°Âàí">‚Äã</a></h2><p>Âú®Êé•‰∏ãÊù•ÁöÑÁâàÊú¨‰∏≠ÔºåKoordiantorÈáçÁÇπËßÑÂàí‰∫Ü‰ª•‰∏ãÂäüËÉΩÔºåÂÖ∑‰ΩìÂåÖÊã¨Ôºö</p><ul><li>Á°¨‰ª∂ÊãìÊâëÊÑüÁü•Ë∞ÉÂ∫¶ÔºåÁªºÂêàËÄÉËôëËäÇÁÇπCPU„ÄÅÂÜÖÂ≠ò„ÄÅGPUÁ≠âÂ§ö‰∏™ËµÑÊ∫êÁª¥Â∫¶ÁöÑÊãìÊâëÂÖ≥Á≥ªÔºåÂú®ÈõÜÁæ§ËåÉÂõ¥ÂÜÖËøõË°åË∞ÉÂ∫¶‰ºòÂåñ„ÄÇ</li><li>ÂØπÈáçË∞ÉÂ∫¶Âô®ÁöÑÂèØËßÇÊµãÊÄßÂíåÂèØËøΩÊ∫ØÊÄßËøõË°åÂ¢ûÂº∫„ÄÇ</li><li>GPUËµÑÊ∫êË∞ÉÂ∫¶ËÉΩÂäõÁöÑÂ¢ûÂº∫„ÄÇ</li></ul><p>Koordinator ÊòØ‰∏Ä‰∏™ÂºÄÊîæÁöÑÁ§æÂå∫ÔºåÈùûÂ∏∏Ê¨¢ËøéÂπøÂ§ß‰∫ëÂéüÁîüÁà±Â•ΩËÄÖ‰ª¨ÈÄöËøáÂêÑÁßçÊñπÂºè‰∏ÄËµ∑ÂèÇ‰∏éÂÖ±Âª∫ÔºåÊó†ËÆ∫ÊÇ®Âú®‰∫ëÂéüÁîüÈ¢ÜÂüüÊòØÂàùÂ≠¶‰πçÁªÉËøòÊòØÈ©æËΩªÂ∞±ÁÜüÔºåÊàë‰ª¨ÈÉΩÈùûÂ∏∏ÊúüÂæÖÂê¨Âà∞ÊÇ®ÁöÑÂ£∞Èü≥ÔºÅ</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v1.1.0">Koordinator v1.1: ËÆ©Ë∞ÉÂ∫¶ÊÑüÁü•Ë¥üËΩΩ‰∏éÂπ≤Êâ∞Ê£ÄÊµãÈááÈõÜ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-03T00:00:00.000Z" itemprop="datePublished">January 3, 2023</time> ¬∑ <!-- -->17 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/FillZpp.png" alt="Siyu Wang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Siyu Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ËÉåÊôØ">ËÉåÊôØ<a href="#ËÉåÊôØ" class="hash-link" aria-label="Direct link to ËÉåÊôØ" title="Direct link to ËÉåÊôØ">‚Äã</a></h2><p>Koordinator Êó®Âú®‰∏∫Áî®Êà∑Êèê‰æõÂÆåÊï¥ÁöÑÊ∑∑ÈÉ®Â∑•‰ΩúË¥üËΩΩÁºñÊéí„ÄÅÊ∑∑ÈÉ®ËµÑÊ∫êË∞ÉÂ∫¶„ÄÅÊ∑∑ÈÉ®ËµÑÊ∫êÈöîÁ¶ªÂèäÊÄßËÉΩË∞É‰ºòËß£ÂÜ≥ÊñπÊ°àÔºåÂ∏ÆÂä©Áî®Êà∑ÊèêÈ´òÂª∂ËøüÊïèÊÑüÊúçÂä°ÁöÑËøêË°åÊÄßËÉΩÔºåÊåñÊéòÁ©∫Èó≤ËäÇÁÇπËµÑÊ∫êÂπ∂ÂàÜÈÖçÁªôÁúüÊ≠£ÊúâÈúÄË¶ÅÁöÑËÆ°ÁÆó‰ªªÂä°Ôºå‰ªéËÄåÊèêÈ´òÂÖ®Â±ÄÁöÑËµÑÊ∫êÂà©Áî®ÊïàÁéá„ÄÇ</p><p>‰ªé 2022 Âπ¥ 4 ÊúàÂèëÂ∏É‰ª•Êù•ÔºåKoordinator ËøÑ‰ªä‰∏ÄÂÖ±Ëø≠‰ª£ÂèëÂ∏É‰∫Ü 9 ‰∏™ÁâàÊú¨„ÄÇÈ°πÁõÆÁªèÂéÜÁöÑÂ§ßÂçäÂπ¥ÂèëÂ±ïËøáÁ®ã‰∏≠ÔºåÁ§æÂå∫Âê∏Á∫≥‰∫ÜÂåÖÊã¨ÈòøÈáåÂ∑¥Â∑¥„ÄÅÂ∞èÁ±≥„ÄÅÂ∞èÁ∫¢‰π¶„ÄÅÁà±Â•áËâ∫„ÄÅ360„ÄÅÊúâËµû Á≠âÂú®ÂÜÖÁöÑÂ§ßÈáè‰ºòÁßÄÂ∑•Á®ãÂ∏àÔºåË¥°ÁåÆ‰∫Ü‰ºóÂ§öÁöÑÊÉ≥Ê≥ï„ÄÅ‰ª£Á†ÅÂíåÂú∫ÊôØÔºå‰∏ÄËµ∑Êé®Âä® Koordinator È°πÁõÆÁöÑÊàêÁÜü„ÄÇ</p><p>‰ªäÂ§©ÔºåÂæàÈ´òÂÖ¥ÁöÑÂÆ£Â∏É Koordinator v1.1 Ê≠£ÂºèÂèëÂ∏ÉÔºåÂÆÉÂåÖÂê´‰∫ÜË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶/ÈáçË∞ÉÂ∫¶„ÄÅcgroup v2 ÊîØÊåÅ„ÄÅÂπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜÔºå‰ª•ÂèäÂÖ∂‰ªñ‰∏ÄÁ≥ªÂàó‰ºòÂåñÁÇπ„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨Â∞±ÈíàÂØπËøô‰∫õÊñ∞Â¢ûÁâπÊÄßÂÅöÊ∑±ÂÖ•Ëß£ËØª‰∏éËØ¥Êòé„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ÁâàÊú¨ÁâπÊÄßÊ∑±ÂÖ•Ëß£ËØª">ÁâàÊú¨ÁâπÊÄßÊ∑±ÂÖ•Ëß£ËØª<a href="#ÁâàÊú¨ÁâπÊÄßÊ∑±ÂÖ•Ëß£ËØª" class="hash-link" aria-label="Direct link to ÁâàÊú¨ÁâπÊÄßÊ∑±ÂÖ•Ëß£ËØª" title="Direct link to ÁâàÊú¨ÁâπÊÄßÊ∑±ÂÖ•Ëß£ËØª">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶">Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶<a href="#Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶" title="Direct link to Ë¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅÊåâÂ∑•‰ΩúË¥üËΩΩÁ±ªÂûãÁªüËÆ°ÂíåÂùáË°°Ë¥üËΩΩÊ∞¥‰Ωç">ÊîØÊåÅÊåâÂ∑•‰ΩúË¥üËΩΩÁ±ªÂûãÁªüËÆ°ÂíåÂùáË°°Ë¥üËΩΩÊ∞¥‰Ωç<a href="#ÊîØÊåÅÊåâÂ∑•‰ΩúË¥üËΩΩÁ±ªÂûãÁªüËÆ°ÂíåÂùáË°°Ë¥üËΩΩÊ∞¥‰Ωç" class="hash-link" aria-label="Direct link to ÊîØÊåÅÊåâÂ∑•‰ΩúË¥üËΩΩÁ±ªÂûãÁªüËÆ°ÂíåÂùáË°°Ë¥üËΩΩÊ∞¥‰Ωç" title="Direct link to ÊîØÊåÅÊåâÂ∑•‰ΩúË¥üËΩΩÁ±ªÂûãÁªüËÆ°ÂíåÂùáË°°Ë¥üËΩΩÊ∞¥‰Ωç">‚Äã</a></h4><p>Koordinator v1.0 Âèä‰πãÂâçÁöÑÁâàÊú¨ÔºåÊèê‰æõ‰∫ÜË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶Êèê‰æõÂü∫Êú¨ÁöÑÂà©Áî®ÁéáÈòàÂÄºËøáÊª§‰øùÊä§È´òË¥üËΩΩÊ∞¥‰ΩçÁöÑËäÇÁÇπÁªßÁª≠ÊÅ∂ÂåñÂΩ±ÂìçÂ∑•‰ΩúË¥üËΩΩÁöÑËøêË°åÊó∂Ë¥®ÈáèÔºå‰ª•ÂèäÈÄöËøáÈ¢Ñ‰º∞Êú∫Âà∂Ëß£ÂÜ≥Ëß£ÂÜ≥ÂÜ∑ËäÇÁÇπËøáËΩΩÁöÑÊÉÖÂÜµ„ÄÇÂ∑≤ÊúâÁöÑË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶ËÉΩËß£ÂÜ≥ÂæàÂ§öÂ∏∏ËßÅÂú∫ÊôØÁöÑÈóÆÈ¢ò„ÄÇ‰ΩÜË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶‰Ωú‰∏∫‰∏ÄÁßç‰ºòÂåñÊâãÊÆµÔºåËøòÊúâÊØîËæÉÂ§öÁöÑÂú∫ÊôØÊòØÈúÄË¶ÅÂÆåÂñÑÁöÑ„ÄÇ</p><p>ÁõÆÂâçÁöÑË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶‰∏ªË¶ÅËß£ÂÜ≥‰∫ÜÈõÜÁæ§ÂÜÖÊï¥Êú∫Áª¥Â∫¶ÁöÑË¥üËΩΩÂùáË°°ÊïàÊûúÔºå‰ΩÜÊúâÂèØËÉΩÂá∫Áé∞‰∏Ä‰∫õÁâπÊÆäÁöÑÊÉÖÂÜµÔºöËäÇÁÇπÈÉ®ÁΩ≤‰∫Ü‰∏çÂ∞ëÁ¶ªÁ∫øPodËøêË°åÔºåÊãâÈ´ò‰∫ÜÊï¥Êú∫ÁöÑÂà©Áî®ÁéáÔºå‰ΩÜÂú®Á∫øÂ∫îÁî®Â∑•‰ΩúË¥üËΩΩÁöÑÊï¥‰ΩìÂà©Áî®ÁéáÂÅè‰Ωé„ÄÇËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊúâÊñ∞ÁöÑÂú®Á∫øPodÔºå‰∏îÊï¥‰∏™ÈõÜÁæ§ÂÜÖÁöÑËµÑÊ∫êÊØîËæÉÁ¥ßÂº†Êó∂Ôºå‰ºöÊúâÂ¶Ç‰∏ãÁöÑÈóÆÈ¢òÔºö</p><ol><li>ÊúâÂèØËÉΩÂõ†‰∏∫Êï¥Êú∫Âà©Áî®ÁéáË∂ÖËøáÊï¥Êú∫ÂÆâÂÖ®ÈòàÂÄºÂØºËá¥Êó†Ê≥ïË∞ÉÂ∫¶Âà∞Ëøô‰∏™ËäÇÁÇπ‰∏äÁöÑÔºõ</li><li>ËøòÂèØËÉΩÂá∫Áé∞‰∏Ä‰∏™ËäÇÁÇπÁöÑÂà©Áî®ÁéáËôΩÁÑ∂Áõ∏ÂØπÊØîËæÉ‰ΩéÔºå‰ΩÜ‰∏äÈù¢Ë∑ëÁöÑÂÖ®ÊòØÂú®Á∫øÂ∫îÁî®ÁéáÔºå‰ªéÂú®Á∫øÂ∫îÁî®ËßíÂ∫¶ÁúãÔºåÂà©Áî®ÁéáÂ∑≤ÁªèÂÅèÈ´ò‰∫ÜÔºå‰ΩÜÊåâÁÖßÂΩìÂâçÁöÑË∞ÉÂ∫¶Á≠ñÁï•ÔºåËøò‰ºöÁªßÁª≠Ë∞ÉÂ∫¶Ëøô‰∏™Pod‰∏äÊù•ÔºåÂØºËá¥ËØ•ËäÇÁÇπÂ†ÜÁßØ‰∫ÜÂ§ßÈáèÁöÑÂú®Á∫øÂ∫îÁî®ÔºåÊï¥‰ΩìÁöÑËøêË°åÊïàÊûúÂπ∂‰∏çÂ•Ω„ÄÇ</li></ol><p>Âú® Koordinator v1.1 ‰∏≠Ôºåkoord-scheduler ÊîØÊåÅÊÑüÁü•Â∑•‰ΩúË¥üËΩΩÁ±ªÂûãÔºåÂå∫ÂàÜ‰∏çÂêåÁöÑÊ∞¥‰ΩçÂíåÁ≠ñÁï•ËøõË°åË∞ÉÂ∫¶„ÄÇ</p><p>Âú® Filter Èò∂ÊÆµÔºåÊñ∞Â¢û threshold ÈÖçÁΩÆ <code>prodUsageThresholds</code>ÔºåË°®Á§∫Âú®Á∫øÂ∫îÁî®ÁöÑÂÆâÂÖ®ÈòàÂÄºÔºåÈªòËÆ§‰∏∫Á©∫„ÄÇÂ¶ÇÊûúÂΩìÂâçË∞ÉÂ∫¶ÁöÑ Pod ÊòØ Prod Á±ªÂûãÔºåkoord-scheduler ‰ºö‰ªéÂΩìÂâçËäÇÁÇπÁöÑ NodeMetric ‰∏≠ÁªüËÆ°ÊâÄÊúâÂú®Á∫øÂ∫îÁî®ÁöÑÂà©Áî®Áéá‰πãÂíåÔºåÂ¶ÇÊûúË∂ÖËøá‰∫Ü <code>prodUsageThresholds</code> Â∞±ËøáÊª§ÊéâËØ•ËäÇÁÇπÔºõÂ¶ÇÊûúÊòØÁ¶ªÁ∫ø PodÔºåÊàñËÄÖÊ≤°ÊúâÈÖçÁΩÆ <code>prodUsageThresholds</code>Ôºå‰øùÊåÅÂéüÊúâÁöÑÈÄªËæëÔºåÊåâÊï¥Êú∫Âà©Áî®ÁéáÂ§ÑÁêÜ„ÄÇ</p><p>Âú® Score Èò∂ÊÆµÔºåÊñ∞Â¢ûÂºÄÂÖ≥ <code>scoreAccordingProdUsage</code> Ë°®Á§∫ÊòØÂê¶Êåâ Prod Á±ªÂûãÁöÑÂà©Áî®ÁéáÊâìÂàÜÂùáË°°„ÄÇÈªòËÆ§‰∏çÂêØÁî®„ÄÇÂΩìÂºÄÂêØÂêéÔºå‰∏îÂΩìÂâç Pod ÊòØ Prod Á±ªÂûãÁöÑËØùÔºåkoord-scheduler Âú®È¢Ñ‰º∞ÁÆóÊ≥ï‰∏≠Âè™Â§ÑÁêÜ Prod Á±ªÂûãÁöÑ PodÔºåÂπ∂ÂØπ NodeMetrics ‰∏≠ËÆ∞ÂΩïÁöÑÂÖ∂‰ªñÁöÑÊú™‰ΩøÁî®È¢Ñ‰º∞Êú∫Âà∂Â§ÑÁêÜÁöÑÂú®Á∫øÂ∫îÁî®ÁöÑ Pod ÁöÑÂΩìÂâçÂà©Áî®ÁéáÂÄºËøõË°åÊ±ÇÂíåÔºåÊ±ÇÂíåÂêéÁöÑÂÄºÂèÇ‰∏éÊúÄÁªàÁöÑÊâìÂàÜ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂºÄÂêØ <code>scoreAccordingProdUsage</code>ÔºåÊàñËÄÖÊòØÁ¶ªÁ∫øPodÔºå‰øùÊåÅÂéüÊúâÈÄªËæëÔºåÊåâÊï¥Êú∫Âà©Áî®ÁéáÂ§ÑÁêÜ„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅÊåâÁôæÂàÜ‰ΩçÊï∞Âà©Áî®ÁéáÂùáË°°">ÊîØÊåÅÊåâÁôæÂàÜ‰ΩçÊï∞Âà©Áî®ÁéáÂùáË°°<a href="#ÊîØÊåÅÊåâÁôæÂàÜ‰ΩçÊï∞Âà©Áî®ÁéáÂùáË°°" class="hash-link" aria-label="Direct link to ÊîØÊåÅÊåâÁôæÂàÜ‰ΩçÊï∞Âà©Áî®ÁéáÂùáË°°" title="Direct link to ÊîØÊåÅÊåâÁôæÂàÜ‰ΩçÊï∞Âà©Áî®ÁéáÂùáË°°">‚Äã</a></h4><p>Koordinator v1.0Âèä‰ª•ÂâçÁöÑÁâàÊú¨ÈÉΩÊòØÊåâÁÖß koordlet ‰∏äÊä•ÁöÑÂπ≥ÂùáÂà©Áî®ÁéáÊï∞ÊçÆËøõË°åËøáÊª§ÂíåÊâìÂàÜ„ÄÇ‰ΩÜÂπ≥ÂùáÂÄºÈöêËóè‰∫ÜÊØîËæÉÂ§öÁöÑ‰ø°ÊÅØÔºåÂõ†Ê≠§Âú® Koordinator v1.1 ‰∏≠ koordlet Êñ∞Â¢û‰∫ÜÊ†πÊçÆÁôæÂàÜ‰ΩçÊï∞ÁªüËÆ°ÁöÑÂà©Áî®ÁéáËÅöÂêàÊï∞ÊçÆ„ÄÇË∞ÉÂ∫¶Âô®‰æß‰πüË∑üÁùÄÂÅö‰∫ÜÁõ∏Â∫îÁöÑÈÄÇÈÖç„ÄÇ</p><p>Êõ¥ÊîπË∞ÉÂ∫¶Âô®ÁöÑ LoadAware Êèí‰ª∂ÁöÑÈÖçÁΩÆÔºå<code>aggregated</code> Ë°®Á§∫ÊåâÁÖßÁôæÂàÜ‰ΩçÊï∞ËÅöÂêàÊï∞ÊçÆËøõË°åÊâìÂàÜÂíåËøáÊª§„ÄÇ<code>aggregated.usageThresholds</code> Ë°®Á§∫ËøáÊª§Êó∂ÁöÑÊ∞¥‰ΩçÈòàÂÄºÔºõ<code>aggregated.usageAggregationType</code> Ë°®Á§∫ËøáÊª§Èò∂ÊÆµË¶Å‰ΩøÁî®ÁöÑÁôæÂàÜ‰ΩçÊï∞Á±ªÂûãÔºåÊîØÊåÅ <code>avg</code>Ôºå<code>p99</code>, <code>p95</code>, <code>p90</code> Âíå <code>p50</code>Ôºõ<code>aggregated.usageAggregatedDuration</code> Ë°®Á§∫ËøáÊª§Èò∂ÊÆµÊúüÊúõ‰ΩøÁî®ÁöÑËÅöÂêàÂë®ÊúüÔºåÂ¶ÇÊûú‰∏çÈÖçÁΩÆÔºåË∞ÉÂ∫¶Âô®Â∞Ü‰ΩøÁî® NodeMetrics ‰∏≠‰∏äÊä•ÁöÑÊúÄÂ§ßÂë®ÊúüÁöÑÊï∞ÊçÆÔºõ<code>aggregated.scoreAggregationType</code> Ë°®Á§∫Âú®ÊâìÂàÜÈò∂ÊÆµÊúüÊúõ‰ΩøÁî®ÁöÑÁôæÂàÜ‰ΩçÊï∞Á±ªÂûãÔºõ<code>aggregated.scoreAggregatedDuration</code> Ë°®Á§∫ÊâìÂàÜÈò∂ÊÆµÊúüÊúõ‰ΩøÁî®ÁöÑËÅöÂêàÂë®ÊúüÔºåÂ¶ÇÊûú‰∏çÈÖçÁΩÆÔºåË∞ÉÂ∫¶Âô®Â∞Ü‰ΩøÁî® NodeMetrics ‰∏≠‰∏äÊä•ÁöÑÊúÄÂ§ßÂë®ÊúüÁöÑÊï∞ÊçÆ„ÄÇ</p><p>Âú® Filter Èò∂ÊÆµÔºåÂ¶ÇÊûúÈÖçÁΩÆ‰∫Ü <code>aggregated.usageThresholds</code> ‰ª•ÂèäÂØπÂ∫îÁöÑËÅöÂêàÁ±ªÂûãÔºåË∞ÉÂ∫¶Âô®Â∞ÜÊåâËØ•ÁôæÂàÜ‰ΩçÊï∞ÁªüËÆ°ÂÄºËøõË°åËøáÊª§Ôºõ</p><p>Âú® Score Èò∂ÊÆµÔºåÂ¶ÇÊûúÈÖçÁΩÆ‰∫Ü <code>aggregated.scoreAggregationType</code>ÔºåË∞ÉÂ∫¶Âô®Â∞Ü‰ºöÊåâËØ•ÁôæÂàÜ‰ΩçÊï∞ÁªüËÆ°ÂÄºÊâìÂàÜÔºõÁõÆÂâçÊöÇÊó∂‰∏çÊîØÊåÅ Prod Pod ‰ΩøÁî®ÁôæÂàÜ‰ΩçÊï∞ËøáÊª§„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ë¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶">Ë¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶<a href="#Ë¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to Ë¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶" title="Direct link to Ë¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶">‚Äã</a></h3><p>Koordinator Âú®ËøáÂéªÁöÑÂá†‰∏™ÁâàÊú¨‰∏≠ÔºåÊåÅÁª≠ÁöÑÊºîËøõÈáçË∞ÉÂ∫¶Âô®ÔºåÂÖàÂêé‰∫ÜÂºÄÊ∫êÂÆåÊï¥ÁöÑÊ°ÜÊû∂ÔºåÂä†Âº∫‰∫ÜÂÆâÂÖ®ÊÄßÔºåÈÅøÂÖçÂõ†ËøáÂ∫¶È©±ÈÄê Pod ÂΩ±ÂìçÂú®Á∫øÂ∫îÁî®ÁöÑÁ®≥ÂÆöÊÄß„ÄÇËøô‰πüÂΩ±Âìç‰∫ÜÈáçË∞ÉÂ∫¶ÂäüËÉΩÁöÑËøõÂ±ïÔºåËøáÂéª Koordinator ÊöÇÊó∂Ê≤°ÊúâÂ§™Â§öÂäõÈáèÂª∫ËÆæÈáçË∞ÉÂ∫¶ËÉΩÂäõ„ÄÇËøô‰∏ÄÊÉÖÂÜµÂ∞Ü‰ºöÂæóÂà∞ÊîπÂèò„ÄÇ</p><p>Koordinator v1.1 ‰∏≠Êàë‰ª¨Êñ∞Â¢û‰∫ÜË¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶ÂäüËÉΩ„ÄÇÊñ∞ÁöÑÊèí‰ª∂Áß∞‰∏∫ <code>LowNodeLoad</code>ÔºåËØ•Êèí‰ª∂ÈÖçÂêàÁùÄË∞ÉÂ∫¶Âô®ÁöÑË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶ËÉΩÂäõÔºåÂèØ‰ª•ÂΩ¢Êàê‰∏Ä‰∏™Èó≠ÁéØÔºåË∞ÉÂ∫¶Âô®ÁöÑË¥üËΩΩÊÑüÁü•Ë∞ÉÂ∫¶Âú®Ë∞ÉÂ∫¶Êó∂ÂàªÂÜ≥Á≠ñÈÄâÊã©ÊúÄ‰ºòËäÇÁÇπÔºå‰ΩÜÈöèÁùÄÊó∂Èó¥ÂíåÈõÜÁæ§ÁéØÂ¢É‰ª•ÂèäÂ∑•‰ΩúË¥üËΩΩÈù¢ÂØπÁöÑÊµÅÈáè/ËØ∑Ê±ÇÁöÑÂèòÂåñÊó∂ÔºåË¥üËΩΩÊÑüÁü•ÈáçË∞ÉÂ∫¶ÂèØ‰ª•‰ªãÂÖ•ËøõÊù•ÔºåÂ∏ÆÂä©‰ºòÂåñË¥üËΩΩÊ∞¥‰ΩçË∂ÖËøáÂÆâÂÖ®ÈòàÂÄºÁöÑËäÇÁÇπ„ÄÇ <code>LowNodeLoad</code> ‰∏é K8s descheduler ÁöÑÊèí‰ª∂ LowNodeUtilization ‰∏çÂêåÁöÑÊòØÔºåLowNodeLoadÊòØÊ†πÊçÆËäÇÁÇπÁúüÂÆûÂà©Áî®ÁéáÁöÑÊÉÖÂÜµÂÜ≥Á≠ñÈáçË∞ÉÂ∫¶ÔºåËÄå LowNodeUtilization ÊòØÊ†πÊçÆËµÑÊ∫êÂàÜÈÖçÁéáÂÜ≥Á≠ñÈáçË∞ÉÂ∫¶„ÄÇ</p><p><code>LowNodeLoad</code> Êèí‰ª∂Êúâ‰∏§‰∏™ÊúÄÈáçË¶ÅÁöÑÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ <code>highThresholds</code> Âíå <code>lowThresholds</code>Ôºö</p><ul><li><code>highThresholds</code> Ë°®Á§∫Ë¥üËΩΩÊ∞¥‰ΩçÁöÑË≠¶ÊàíÈòàÂÄºÔºåË∂ÖËøáËØ•ÈòàÂÄºÁöÑËäÇÁÇπ‰∏äÁöÑPodÂ∞ÜÂèÇ‰∏éÈáçË∞ÉÂ∫¶Ôºõ</li><li><code>lowThresholds</code> Ë°®Á§∫Ë¥üËΩΩÊ∞¥‰ΩçÁöÑÂÆâÂÖ®Ê∞¥‰Ωç„ÄÇ‰Ωé‰∫éËØ•ÈòàÂÄºÁöÑËäÇÁÇπ‰∏äÁöÑPod‰∏ç‰ºöË¢´ÈáçË∞ÉÂ∫¶„ÄÇ</li></ul><p>‰ª•‰∏ãÂõæ‰∏∫‰æãÔºålowThresholds ‰∏∫45%ÔºåhighThresholds ‰∏∫ 70%ÔºåÈÇ£‰πà‰Ωé‰∫é 45% ÁöÑËäÇÁÇπÊòØÂÆâÂÖ®ÁöÑÔºåÂõ†‰∏∫Ê∞¥‰ΩçÂ∑≤ÁªèÂæà‰Ωé‰∫ÜÔºõÈ´ò‰∫é45%Ôºå‰ΩÜÊòØ‰Ωé‰∫é 70%ÁöÑÊòØÂå∫Èó¥ÊòØÊàë‰ª¨ÊúüÊúõÁöÑË¥üËΩΩÊ∞¥‰ΩçËåÉÂõ¥ÔºõÈ´ò‰∫é70%ÁöÑËäÇÁÇπÂ∞±‰∏çÂÆâÂÖ®‰∫ÜÔºåÂ∫îËØ•ÊääË∂ÖËøá70%ÁöÑËøôÈÉ®ÂàÜÔºàÂÅáËÆæÂΩìÂâçËäÇÁÇπAÁöÑË¥üËΩΩÊ∞¥‰ΩçÊòØ85%ÔºâÔºåÈÇ£‰πà 85% - 70% = 15% ÁöÑË¥üËΩΩÈôç‰ΩéÔºåÁ≠õÈÄâ Pod ÂêéÊâßË°åËøÅÁßª„ÄÇ</p><p><img loading="lazy" alt="LowNodeLoad Á§∫‰æã" src="/assets/images/lownodeload-sample-53d42010721f0acac9ece644dfff4252.png" width="2288" height="760" class="img_ev3q"></p><p>ËøÅÁßªÊó∂ÔºåËøòË¶ÅËÄÉËôëÂà∞‰Ωé‰∫é 45% ÁöÑËøôÈÉ®ÂàÜËäÇÁÇπÊòØÊàë‰ª¨ÈáçË∞ÉÂ∫¶ÂêéË¶ÅÊâøËΩΩÊñ∞PodÁöÑËäÇÁÇπÔºåÊàë‰ª¨ÈúÄË¶ÅÁ°Æ‰øùËøÅÁßªÁöÑPodÁöÑË¥üËΩΩÊÄªÈáè‰∏ç‰ºöË∂ÖËøáËøô‰∫õ‰ΩéË¥üËΩΩËäÇÁÇπÁöÑÊâøËΩΩ‰∏äÈôê„ÄÇËøô‰∏™ÊâøËΩΩ‰∏äÈôêÂç≥ÊòØ highThresholds - ËäÇÁÇπÂΩìÂâçË¥üËΩΩÔºåÂÅáËÆæËäÇÁÇπBÁöÑË¥üËΩΩÊ∞¥‰ΩçÊòØ20%ÔºåÈÇ£‰πà 70%-20% = 50%ÔºåËøô50%Â∞±ÊòØÂèØ‰ª•ÊâøËΩΩÁöÑÂÆπÈáè‰∫Ü„ÄÇÂõ†Ê≠§ËøÅÁßªÊó∂ÊØèÈ©±ÈÄê‰∏Ä‰∏™ PodÔºåËøô‰∏™ÊâøËΩΩÂÆπÈáèÂ∞±Â∫îËØ•Êâ£ÊéâÂΩìÂâçÈáçË∞ÉÂ∫¶ Pod ÁöÑÂΩìÂâçË¥üËΩΩÊàñËÄÖÈ¢Ñ‰º∞Ë¥üËΩΩÊàñËÄÖÁîªÂÉèÂÄºÔºàËøôÈÉ®ÂàÜÂÄº‰∏éË¥üËΩΩË∞ÉÂ∫¶ÈáåÁöÑÂÄºÂØπÂ∫îÔºâ„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•Á°Æ‰øù‰∏ç‰ºöÂ§öËøÅÁßª„ÄÇ </p><p>Â¶ÇÊûú‰∏Ä‰∏™ÈõÜÁæ§ÊÄªÊòØÂèØËÉΩ‰ºöÂá∫Áé∞Êüê‰∫õËäÇÁÇπÁöÑË¥üËΩΩÂ∞±ÊòØÊØîËæÉÈ´òÔºåËÄå‰∏îÊï∞ÈáèÂπ∂‰∏çÂ§öÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÈ¢ëÁπÅÁöÑÈáçË∞ÉÂ∫¶Ëøô‰∫õËäÇÁÇπÔºå‰πü‰ºöÂ∏¶Êù•ÂÆâÂÖ®ÈöêÊÇ£ÔºåÂõ†Ê≠§ÂèØ‰ª•ËÆ©Áî®Êà∑ÊåâÈúÄËÆæÁΩÆ <code>numberOfNodes</code>„ÄÇ</p><p>Âè¶Â§ñÔºå<code>LowNodeLoad</code> ËØÜÂà´Âá∫Ë∂ÖËøáÈòàÂÄºÁöÑËäÇÁÇπÂêé‰ºöÁ≠õÈÄâ PodÔºåÂΩìÁ≠õÈÄâ Pod Êó∂ÔºåÂèØ‰ª•ÈÖçÁΩÆË¶ÅÊîØÊåÅÊàñËÄÖËøáÊª§ÁöÑ namespaceÔºåÊàñËÄÖÈÖçÁΩÆ pod selector Á≠õÈÄâÔºå‰πüÂèØ‰ª•ÈÖçÁΩÆ <code>nodeFit</code> Ê£ÄÊü•ÊØè‰∏™Â§áÈÄâ Pod ÂØπÂ∫îÁöÑ Node Affinity/Node Selector/Toleration ÊòØÂê¶Êúâ‰∏é‰πãÂåπÈÖçÁöÑ NodeÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÔºåËøôÁßçËäÇÁÇπ‰πü‰ºöË¢´ÂøΩÁï•„ÄÇÂΩìÁÑ∂ÂèØ‰ª•ËÄÉËôë‰∏çÂêØÁî®Ëøô‰∏™ËÉΩÂäõÔºåÈÄöËøáÈÖçÁΩÆ <code>nodeFit</code> ‰∏∫ false ÂêéÂç≥ÂèØÁ¶ÅÁî®ÔºåÊ≠§Êó∂ÂÆåÂÖ®Áî±Â∫ïÂ±ÇÁöÑ <code>MigrationController</code> ÈÄöËøá Koordinator Reservation È¢ÑÁïôËµÑÊ∫êÔºõ</p><p>ÂΩìÁ≠õÈÄâÂá∫ Pod ÂêéÔºå‰ºöÂØπËøô‰∫õ Pod ËøõË°åÊéíÂ∫è„ÄÇ‰ºö‰æùÈù†Koordinator QoSClass„ÄÅKubernetes QoSClass„ÄÅPriority„ÄÅÁî®ÈáèÂíåÂàõÂª∫Êó∂Èó¥Á≠âÂ§ö‰∏™Áª¥Â∫¶ÊéíÂ∫è„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cgroup-v2-ÊîØÊåÅ">cgroup v2 ÊîØÊåÅ<a href="#cgroup-v2-ÊîØÊåÅ" class="hash-link" aria-label="Direct link to cgroup v2 ÊîØÊåÅ" title="Direct link to cgroup v2 ÊîØÊåÅ">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ËÉåÊôØ-1">ËÉåÊôØ<a href="#ËÉåÊôØ-1" class="hash-link" aria-label="Direct link to ËÉåÊôØ" title="Direct link to ËÉåÊôØ">‚Äã</a></h4><p>Koordinator ‰∏≠‰ºóÂ§öÂçïÊú∫ QoS ËÉΩÂäõÂíåËµÑÊ∫êÂéãÂà∂/ÂºπÊÄßÁ≠ñÁï•ÊûÑÂª∫Âú® Linux Control Group (cgroups) Êú∫Âà∂‰∏äÔºåÊØîÂ¶Ç CPU QoS (cpu)„ÄÅMemory QoS (memory)„ÄÅCPU Burst (cpu)„ÄÅCPU Suppress (cpu, cpuset)Ôºåkoordlet ÁªÑ‰ª∂ÂèØ‰ª•ÈÄöËøá cgroups (v1) ÈôêÂà∂ÂÆπÂô®ÂèØÁî®ËµÑÊ∫êÁöÑÊó∂Èó¥Áâá„ÄÅÊùÉÈáç„ÄÅ‰ºòÂÖàÁ∫ß„ÄÅÊãìÊâëÁ≠âÂ±ûÊÄß„ÄÇLinux È´òÁâàÊú¨ÂÜÖÊ†∏‰πüÂú®ÊåÅÁª≠Â¢ûÂº∫ÂíåËø≠‰ª£‰∫Ü cgroups Êú∫Âà∂ÔºåÂ∏¶Êù•‰∫Ü cgroups v2 Êú∫Âà∂ÔºåÁªü‰∏Ä cgroups ÁõÆÂΩïÁªìÊûÑÔºåÊîπÂñÑ v1 ‰∏≠‰∏çÂêå subsystem/cgroup controller ‰πãÈó¥ÁöÑÂçè‰ΩúÔºåÂπ∂Ëøõ‰∏ÄÊ≠•Â¢ûÂº∫‰∫ÜÈÉ®ÂàÜÂ≠êÁ≥ªÁªüÁöÑËµÑÊ∫êÁÆ°ÁêÜÂíåÁõëÊéßËÉΩÂäõ„ÄÇKubernetes Ëá™ 1.25 Ëµ∑Â∞Ü cgroups v2 ‰Ωú‰∏∫ GA (general availability) ÁâπÊÄßÔºåÂú® Kubelet ‰∏≠ÂêØÁî®ËØ•ÁâπÊÄßËøõË°åÂÆπÂô®ÁöÑËµÑÊ∫êÁÆ°ÁêÜÔºåÂú®Áªü‰∏ÄÁöÑ cgroups Â±ÇÊ¨°‰∏ãËÆæÁΩÆÂÆπÂô®ÁöÑËµÑÊ∫êÈöîÁ¶ªÂèÇÊï∞ÔºåÊîØÊåÅ MemoryQoS ÁöÑÂ¢ûÂº∫ÁâπÊÄß„ÄÇ</p><p><img loading="lazy" alt="cgroup v1/v2 ÁªìÊûÑ" src="/assets/images/cgroup-v1-and-v2-94df02d090b7f7b4e7f3cc4c6accdaae.svg" width="691" height="171" class="img_ev3q"></p><p>Âú® Koordinator v1.1 ‰∏≠ÔºåÂçïÊú∫ÁªÑ‰ª∂ koordlet Êñ∞Â¢ûÂØπ cgroups v2 ÁöÑÊîØÊåÅÔºåÂåÖÊã¨Â¶Ç‰∏ãÂ∑•‰ΩúÔºö</p><ul><li>ÈáçÊûÑ‰∫Ü Resource Executor Ê®°ÂùóÔºå‰ª•Áªü‰∏ÄÁõ∏ÂêåÊàñËøë‰ººÁöÑ cgroup Êé•Âè£Âú® v1 Âíå v2 ‰∏çÂêåÁâàÊú¨‰∏äÁöÑÊñá‰ª∂Êìç‰ΩúÔºå‰æø‰∫é koordlet ÁâπÊÄßÂÖºÂÆπ cgroups v2 ÂíåÂêàÂπ∂ËØªÂÜôÂÜ≤Á™Å„ÄÇ</li><li>Âú®ÂΩìÂâçÂ∑≤ÂºÄÊîæÁöÑÂçïÊú∫ÁâπÊÄß‰∏≠ÈÄÇÈÖç cgroups v2ÔºåÈááÁî®Êñ∞ÁöÑ Resource Executor Ê®°ÂùóÊõøÊç¢ cgroup Êìç‰ΩúÔºå‰ºòÂåñ‰∏çÂêåÁ≥ªÁªüÁéØÂ¢É‰∏ãÁöÑÊä•ÈîôÊó•Âøó„ÄÇ</li></ul><p>Koordinator v1.1 ‰∏≠Â§ßÈÉ®ÂàÜ koordlet ÁâπÊÄßÂ∑≤ÁªèÂÖºÂÆπ cgroups v2ÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÔºö</p><ul><li>ËµÑÊ∫êÂà©Áî®ÁéáÈááÈõÜ</li><li>Âä®ÊÄÅËµÑÊ∫êË∂ÖÂçñ</li><li>Batch ËµÑÊ∫êÈöîÁ¶ªÔºàBatchResourceÔºåÂ∫üÂºÉBECgroupReconcileÔºâ</li><li>CPU QoSÔºàGroupIdentityÔºâ</li><li>Memory QoSÔºàCgroupReconcileÔºâ</li><li>CPU Âä®ÊÄÅÂéãÂà∂ÔºàBECPUSuppressÔºâ</li><li>ÂÜÖÂ≠òÈ©±ÈÄêÔºàBEMemoryEvictÔºâ</li><li>CPU BurstÔºàCPUBurstÔºâ</li><li>L3 Cache ÂèäÂÜÖÂ≠òÂ∏¶ÂÆΩÈöîÁ¶ªÔºàRdtResctrlÔºâ</li></ul><p>ÈÅóÁïôÁöÑÊú™ÂÖºÂÆπÁâπÊÄßÂ¶Ç PSICollector Â∞ÜÂú®Êé•‰∏ãÊù•ÁöÑ v1.2 ÁâàÊú¨‰∏≠ËøõË°åÈÄÇÈÖçÔºåÂèØ‰ª•Ë∑üËøõ issue#407 Ëé∑ÂèñÊúÄÊñ∞ËøõÂ±ï„ÄÇÊé•‰∏ãÊù•ÁöÑ Koordinator ÁâàÊú¨‰∏≠‰πüÂ∞ÜÈÄêÊ∏êÂºïÂÖ•Êõ¥Â§ö cgroups v2 ÁöÑÂ¢ûÂº∫ÂäüËÉΩÔºåÊï¨ËØ∑ÊúüÂæÖ„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="‰ΩøÁî®-cgroups-v2">‰ΩøÁî® cgroups v2<a href="#‰ΩøÁî®-cgroups-v2" class="hash-link" aria-label="Direct link to ‰ΩøÁî® cgroups v2" title="Direct link to ‰ΩøÁî® cgroups v2">‚Äã</a></h4><p>Âú® Koordinator v1.1 ‰∏≠Ôºåkoordlet ÂØπ cgroups v2 ÁöÑÈÄÇÈÖçÂØπ‰∏äÂ±ÇÂäüËÉΩÈÖçÁΩÆÈÄèÊòéÔºåÈô§‰∫ÜË¢´Â∫üÂºÉÁâπÊÄßÁöÑ feature-gate ‰ª•Â§ñÔºåÊÇ®Êó†ÈúÄÂèòÂä® ConfigMap <code>slo-controller-config</code> ÂíåÂÖ∂‰ªñ feature-gate ÈÖçÁΩÆ„ÄÇÂΩì koordlet ËøêË°åÂú®ÂêØÁî® cgroups v2 ÁöÑËäÇÁÇπ‰∏äÊó∂ÔºåÁõ∏Â∫îÂçïÊú∫ÁâπÊÄßÂ∞ÜËá™Âä®ÂàáÊç¢Âà∞ cgroups-v2 Á≥ªÁªüÊé•Âè£ËøõË°åÊìç‰Ωú„ÄÇ</p><p>Ê≠§Â§ñÔºåcgroups v2 ÊòØ Linux È´òÁâàÊú¨ÂÜÖÊ†∏ÔºàÂª∫ËÆÆ &gt;=5.8ÔºâÁöÑÁâπÊÄßÔºåÂØπÁ≥ªÁªüÂÜÖÊ†∏ÁâàÊú¨Âíå Kubernetes ÁâàÊú¨Êúâ‰∏ÄÂÆö‰æùËµñ„ÄÇÂª∫ËÆÆÈááÁî®ÈªòËÆ§ÂêØÁî® cgroups v2 ÁöÑ Linux ÂèëË°åÁâà‰ª•Âèä Kubernetes v1.24 ‰ª•‰∏äÁâàÊú¨„ÄÇ</p><p>Êõ¥Â§öÂÖ≥‰∫éÂ¶Ç‰ΩïÂêØÁî® cgroups v2 ÁöÑËØ¥ÊòéÔºåËØ∑ÂèÇÁÖß Kubernetes Á§æÂå∫<a href="https://kubernetes.io/docs/concepts/architecture/cgroups/#using-cgroupv2" target="_blank" rel="noopener noreferrer">ÊñáÊ°£</a>„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Âπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜ">Âπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜ<a href="#Âπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜ" class="hash-link" aria-label="Direct link to Âπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜ" title="Direct link to Âπ≤Êâ∞Ê£ÄÊµãÊåáÊ†áÈááÈõÜ">‚Äã</a></h3><p>Âú®ÁúüÂÆûÁöÑÁîü‰∫ßÁéØÂ¢É‰∏ãÔºåÂçïÊú∫ÁöÑËøêË°åÊó∂Áä∂ÊÄÅÊòØ‰∏Ä‰∏™‚ÄúÊ∑∑Ê≤åÁ≥ªÁªü‚ÄùÔºåËµÑÊ∫êÁ´û‰∫â‰∫ßÁîüÁöÑÂ∫îÁî®Âπ≤Êâ∞Êó†Ê≥ïÁªùÂØπÈÅøÂÖç„ÄÇKoordinator Ê≠£Âú®Âª∫Á´ãÂπ≤Êâ∞Ê£ÄÊµã‰∏é‰ºòÂåñÁöÑËÉΩÂäõÔºåÈÄöËøáÊèêÂèñÂ∫îÁî®ËøêË°åÁä∂ÊÄÅÁöÑÊåáÊ†áÔºåËøõË°åÂÆûÊó∂ÁöÑÂàÜÊûêÂíåÊ£ÄÊµãÔºåÂú®ÂèëÁé∞Âπ≤Êâ∞ÂêéÂØπÁõÆÊ†áÂ∫îÁî®ÂíåÂπ≤Êâ∞Ê∫êÈááÂèñÊõ¥ÂÖ∑ÈíàÂØπÊÄßÁöÑÁ≠ñÁï•„ÄÇ</p><p>ÂΩìÂâç Koordinator Â∑≤ÁªèÂÆûÁé∞‰∫Ü‰∏ÄÁ≥ªÂàó <code>Performance Collector</code>ÔºåÂú®ÂçïÊú∫‰æßÈááÈõÜ‰∏éÂ∫îÁî®ËøêË°åÁä∂ÊÄÅÈ´òÁõ∏ÂÖ≥ÊÄßÁöÑÂ∫ïÂ±ÇÊåáÊ†áÔºåÂπ∂ÈÄöËøá Prometheus Êö¥Èú≤Âá∫Êù•Ôºå‰∏∫Âπ≤Êâ∞Ê£ÄÊµãËÉΩÂäõÂíåÈõÜÁæ§Â∫îÁî®Ë∞ÉÂ∫¶Êèê‰æõÊîØÊåÅ„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊåáÊ†áÈááÈõÜ">ÊåáÊ†áÈááÈõÜ<a href="#ÊåáÊ†áÈááÈõÜ" class="hash-link" aria-label="Direct link to ÊåáÊ†áÈááÈõÜ" title="Direct link to ÊåáÊ†áÈááÈõÜ">‚Äã</a></h4><p>Performance Collector Áî±Â§ö‰∏™ feature-gate ËøõË°åÊéßÂà∂ÔºåKoordinator ÁõÆÂâçÊèê‰æõ‰ª•‰∏ãÂá†‰∏™ÊåáÊ†áÈááÈõÜÂô®Ôºö</p><ul><li><code>CPICollector</code>ÔºöÁî®‰∫éÊéßÂà∂ CPI ÊåáÊ†áÈááÈõÜÂô®„ÄÇCPIÔºöCycles Per Instruction„ÄÇÊåá‰ª§Âú®ËÆ°ÁÆóÊú∫‰∏≠ÊâßË°åÊâÄÈúÄË¶ÅÁöÑÂπ≥ÂùáÊó∂ÈíüÂë®ÊúüÊï∞„ÄÇCPI ÈááÈõÜÂô®Âü∫‰∫é Cycles Âíå Instructions Ëøô‰∏§‰∏™ Kernel PMUÔºàPerformance Monitoring UnitÔºâ‰∫ã‰ª∂‰ª•Âèä perf_event_open(2) Á≥ªÁªüË∞ÉÁî®ÂÆûÁé∞„ÄÇ</li><li><code>PSICollector</code>ÔºöÁî®‰∫éÊéßÂà∂ PSI ÊåáÊ†áÈááÈõÜÂô®„ÄÇPSIÔºöPressure Stall Information„ÄÇË°®Á§∫ÂÆπÂô®Âú®ÈááÈõÜÊó∂Èó¥Èó¥ÈöîÂÜÖÔºåÂõ†‰∏∫Á≠âÂæÖ cpu„ÄÅÂÜÖÂ≠ò„ÄÅIO ËµÑÊ∫êÂàÜÈÖçËÄåÈòªÂ°ûÁöÑ‰ªªÂä°Êï∞„ÄÇ‰ΩøÁî® PSI ÈááÈõÜÂô®ÂâçÔºåÈúÄË¶ÅÂú® Anolis OS ‰∏≠ÂºÄÂêØ PSI ÂäüËÉΩÔºåÊÇ®ÂèØ‰ª•ÂèÇËÄÉ<a href="https://help.aliyun.com/document_detail/155464.html" target="_blank" rel="noopener noreferrer">ÊñáÊ°£</a>Ëé∑ÂèñÂºÄÂêØÊñπÊ≥ï„ÄÇ</li></ul><p>Performance Collector ÁõÆÂâçÊòØÈªòËÆ§ÂÖ≥Èó≠ÁöÑ„ÄÇÊÇ®ÂèØ‰ª•ÈÄöËøá‰øÆÊîπ Koordlet ÁöÑ feature-gates È°πÊù•‰ΩøÁî®ÂÆÉÔºåÊ≠§È°π‰øÆÊîπ‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñ feature-gate</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit ds koordlet -n koordinator-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># modify here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># - -feature-gates=BECPUEvict=true,BEMemoryEvict=true,CgroupReconcile=true,Accelerators=true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">feature</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gates=BECPUEvict=true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">BEMemoryEvict=true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">CgroupReconcile=true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Accelerators=true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">CPICollector=true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PSICollector=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="servicemonitor">ServiceMonitor<a href="#servicemonitor" class="hash-link" aria-label="Direct link to ServiceMonitor" title="Direct link to ServiceMonitor">‚Äã</a></h4><p>v1.1.0 ÁâàÊú¨ÁöÑ Koordinator ‰∏∫ Koordlet Â¢ûÂä†‰∫Ü ServiceMonitor ÁöÑËÉΩÂäõÔºåÂ∞ÜÊâÄÈááÈõÜÊåáÊ†áÈÄöËøá Prometheus Êö¥Èú≤Âá∫Êù•ÔºåÁî®Êà∑ÂèØÂü∫‰∫éÊ≠§ËÉΩÂäõÈááÈõÜÁõ∏Â∫îÊåáÊ†áËøõË°åÂ∫îÁî®Á≥ªÁªüÁöÑÂàÜÊûê‰∏éÁÆ°ÁêÜ„ÄÇ</p><p>ServiceMonitor Áî± Prometheus ÂºïÂÖ•ÔºåÊïÖÂú® helm chart ‰∏≠ËÆæÁΩÆÈªòËÆ§‰∏çÂºÄÂêØÂÆâË£ÖÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§ÂÆâË£ÖServiceMonitorÔºö</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install koordinator https://... --set koordlet.enableServiceMonitor=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÈÉ®ÁΩ≤ÂêéÂèØÂú® Prometheus UI ÊâæÂà∞ËØ• Targets„ÄÇ</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># HELP koordlet_container_cpi Container cpi collected by koordlet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TYPE koordlet_container_cpi gauge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">koordlet_container_cpi{container_id=&quot;containerd://498de02ddd3ad7c901b3c80f96c57db5b3ed9a817dbfab9d16b18be7e7d2d047&quot;,container_name=&quot;koordlet&quot;,cpi_field=&quot;cycles&quot;,node=&quot;your-node-name&quot;,pod_name=&quot;koordlet-x8g2j&quot;,pod_namespace=&quot;koordinator-system&quot;,pod_uid=&quot;3440fb9c-423b-48e9-8850-06a6c50f633d&quot;} 2.228107503e+09</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">koordlet_container_cpi{container_id=&quot;containerd://498de02ddd3ad7c901b3c80f96c57db5b3ed9a817dbfab9d16b18be7e7d2d047&quot;,container_name=&quot;koordlet&quot;,cpi_field=&quot;instructions&quot;,node=&quot;your-node-name&quot;,pod_name=&quot;koordlet-x8g2j&quot;,pod_namespace=&quot;koordinator-system&quot;,pod_uid=&quot;3440fb9c-423b-48e9-8850-06a6c50f633d&quot;} 4.1456092e+09</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ÂèØ‰ª•ÊúüÂæÖÁöÑÊòØÔºåKoordinator Âπ≤Êâ∞Ê£ÄÊµãÁöÑËÉΩÂäõÂú®Êõ¥Â§çÊùÇÁöÑÁúüÂÆûÂú∫ÊôØ‰∏ãËøòÈúÄË¶ÅÊõ¥Â§öÊ£ÄÊµãÊåáÊ†áÁöÑË°•ÂÖÖÔºåÂêéÁª≠Â∞ÜÂú®Â¶ÇÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò IO Á≠âÂÖ∂‰ªñËØ∏Â§öËµÑÊ∫êÁöÑÊåáÊ†áÈááÈõÜÂª∫ËÆæÊñπÈù¢ÊåÅÁª≠ÂèëÂäõ„ÄÇ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ∂‰ªñÊõ¥Êñ∞ÁÇπ">ÂÖ∂‰ªñÊõ¥Êñ∞ÁÇπ<a href="#ÂÖ∂‰ªñÊõ¥Êñ∞ÁÇπ" class="hash-link" aria-label="Direct link to ÂÖ∂‰ªñÊõ¥Êñ∞ÁÇπ" title="Direct link to ÂÖ∂‰ªñÊõ¥Êñ∞ÁÇπ">‚Äã</a></h3><p>ÈÄöËøá <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v1.1.0" target="_blank" rel="noopener noreferrer">v1.1 release</a> È°µÈù¢ÔºåÂèØ‰ª•ÁúãÂà∞Êõ¥Â§öÁâàÊú¨ÊâÄÂåÖÂê´ÁöÑÊñ∞Â¢ûÂäüËÉΩ„ÄÇ</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v1.0.0">Koordinator v1.0: Ê≠£ÂºèÂèëÂ∏É</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-03T00:00:00.000Z" itemprop="datePublished">November 3, 2022</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/eahydra.png" alt="Joseph"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Joseph</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Koordinator ‰ªäÂπ¥3Êúà‰ªΩÂºÄÊ∫ê‰ª•Êù•ÔºåÂÖàÂêéÂèëÂ∏É‰∫Ü7‰∏™ÁâàÊú¨ÔºåÈÄêÊ≠•ÁöÑÊääÈòøÈáåÂ∑¥Â∑¥&amp;ÈòøÈáå‰∫ëÂÜÖÈÉ®ÁöÑÊ∑∑ÈÉ®Á≥ªÁªüÁöÑÊ†∏ÂøÉËÉΩÂäõËæìÂá∫Âà∞ÂºÄÊ∫êÁ§æÂå∫ÔºåÂπ∂Âú®‰∏≠Èó¥ËøáÁ®ã‰∏≠ÈÄêÊ∏êÁöÑË¢´ Kubernetes„ÄÅÂ§ßÊï∞ÊçÆ„ÄÅÈ´òÊÄßËÉΩËÆ°ÁÆó„ÄÅÊú∫Âô®Â≠¶‰π†È¢ÜÂüüÊàñËÄÖÁ§æÂå∫ÁöÑÂÖ≥Ê≥®ÔºåKoordinator Á§æÂå∫‰πüÈÄêÊ≠•Ëé∑Âæó‰∫Ü‰∏Ä‰∫õË¥°ÁåÆËÄÖÁöÑÊîØÊåÅÔºåÂπ∂Êúâ‰∏Ä‰∫õ‰ºÅ‰∏öÂºÄÂßãÈÄêÊ≠•ÁöÑÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠‰ΩøÁî® Koordinator Ëß£ÂÜ≥ÂÆûÈôÖÁîü‰∫ß‰∏≠ÈÅáÂà∞ÁöÑÊàêÊú¨ÈóÆÈ¢ò„ÄÅÊ∑∑ÈÉ®ÈóÆÈ¢òÁ≠â„ÄÇ ÁªèËøá Koordinator Á§æÂå∫ÁöÑÂä™ÂäõÔºåÊàë‰ª¨ÊÄÄÁùÄÂçÅÂàÜÊøÄÂä®ÁöÑÂøÉÊÉÖÂêëÂ§ßÂÆ∂ÂÆ£Â∏É Koordinator 1.0 ÁâàÊú¨Ê≠£ÂºèÂèëÂ∏É„ÄÇ</p><p>Koordinator È°πÁõÆÊó©ÊúüÁùÄÈáçÂª∫ËÆæÊ†∏ÂøÉÊ∑∑ÈÉ®ËÉΩÂäõ -- Â∑ÆÂºÇÂåñ SLOÔºåÂπ∂‰∏î‰∏∫‰∫ÜËÆ©Áî®Êà∑Êõ¥ÂÆπÊòìÁöÑ‰ΩøÁî® Koordinator ÁöÑÊ∑∑ÈÉ®ËÉΩÂäõÔºåKoordinator Êèê‰æõ‰∫Ü ClusterColocationProfile Êú∫Âà∂Â∏ÆÂä©Áî®Êà∑ÂèØ‰ª•‰∏çÁî®‰øÆÊîπÂ≠òÈáè‰ª£Á†ÅÂÆåÊàê‰∏çÂêåÂ∑•‰ΩúË¥üËΩΩÁöÑÊ∑∑ÈÉ®ÔºåËÆ©Áî®Êà∑ÈÄêÊ≠•ÁöÑÁÜüÊÇâÊ∑∑ÈÉ®ÊäÄÊúØ„ÄÇÈöèÂêé Koordinaor ÈÄêÊ≠•Âú®ËäÇÁÇπ‰æß QoS ‰øùÈöúÊú∫Âà∂‰∏äÂÅö‰∫ÜÂ¢ûÂº∫ÔºåÊèê‰æõ‰∫ÜÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫é CPU Suppress„ÄÅCPU Burst„ÄÅ Memory QoS„ÄÅL3 Cache/MBA ËµÑÊ∫êÈöîÁ¶ªÊú∫Âà∂ÂíåÂü∫‰∫éÊª°Ë∂≥Â∫¶È©±ÈÄêÊú∫Âà∂Á≠âÂ§öÁßçËÉΩÂäõÔºåËß£ÂÜ≥‰∫ÜÂ§ßÈÉ®ÂàÜËäÇÁÇπ‰æßÂ∑•‰ΩúË¥üËΩΩÁöÑÁ®≥ÂÆöÊÄßÈóÆÈ¢ò„ÄÇÈÖçÂêà‰ΩøÁî® Koordinator Runtime Proxy ÁªÑ‰ª∂ÔºåÂèØ‰ª•Êõ¥Â•ΩÁöÑÂÖºÂÆπ Kubernetes kubelet ÂéüÁîüÁÆ°ÁêÜÊú∫Âà∂„ÄÇ</p><p>Âπ∂‰∏î Koordinator Âú®‰ªªÂä°Ë∞ÉÂ∫¶Âíå QoS ÊÑüÁü•Ë∞ÉÂ∫¶‰ª•ÂèäÈáçË∞ÉÂ∫¶Á≠âÊñπÈù¢‰πüÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂàõÊñ∞ÊñπÊ°àÔºåÂª∫ËÆæ‰∫ÜÂÖ®Èù¢ÂÖºÂÆπ Kubernetes CPU ÁÆ°ÁêÜÊú∫Âà∂ÁöÑÁ≤æÁªÜÂåñ CPU Ë∞ÉÂ∫¶ËÉΩÂäõÔºåÈù¢ÂêëËäÇÁÇπÂÆûÈôÖË¥üËΩΩÁöÑÂùáË°°Ë∞ÉÂ∫¶ËÉΩÂäõ„ÄÇ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑËÆ©Áî®Êà∑ÁÆ°ÁêÜÂ•ΩËµÑÊ∫êÔºå Koordinator ËøòÊèê‰æõ‰∫ÜËµÑÊ∫êÈ¢ÑÁïôËÉΩÂäõÔºàReservation)ÔºåÂπ∂‰∏î Koordinator Âü∫‰∫é Kubernetes Á§æÂå∫Â∑≤ÊúâÁöÑCoscheduling„ÄÅElasticQuota Scheduling ËÉΩÂäõÂÅö‰∫ÜËøõ‰∏ÄÊ≠•ÁöÑÂ¢ûÂº∫Ôºå‰∏∫‰ªªÂä°Ë∞ÉÂ∫¶È¢ÜÂüüÊ≥®ÂÖ•‰∫ÜÊñ∞ÁöÑÊ¥ªÂäõ„ÄÇKoordinator Êèê‰æõ‰∫ÜÂÖ®Êñ∞ÁöÑÈáçË∞ÉÂ∫¶Âô®Ê°ÜÊû∂ÔºåÁùÄÈáçÂª∫ËÆæ Descheduler ÁöÑÊâ©Â±ïÊÄßÂíåÂÆâÂÖ®ÊÄßÈóÆÈ¢ò„ÄÇ</p><h1>ÂÆâË£ÖÊàñÂçáÁ∫ß Koordinator v1.0.0</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="‰ΩøÁî®-helm-ÂÆâË£Ö">‰ΩøÁî® Helm ÂÆâË£Ö<a href="#‰ΩøÁî®-helm-ÂÆâË£Ö" class="hash-link" aria-label="Direct link to ‰ΩøÁî® Helm ÂÆâË£Ö" title="Direct link to ‰ΩøÁî® Helm ÂÆâË£Ö">‚Äã</a></h2><p>ÊÇ®ÂèØ‰ª•ÈÄöËøá helm v3.5+ ÈùûÂ∏∏Êñπ‰æøÁöÑÂÆâË£Ö KoordinatorÔºåHelm ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÊÇ®ÂèØ‰ª•‰ªé <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">ËøôÈáå</a> Ëé∑ÂèñÂÆÉ„ÄÇ</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª</h1><p>Koordinator v1.0 Êï¥‰ΩìÊñ∞Â¢ûÁöÑÁâπÊÄßÂπ∂‰∏çÂ§öÔºå‰∏ªË¶ÅÊúâ‰ª•‰∏ã‰∏Ä‰∫õÂèòÂåñ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Áã¨Á´ã-api-repo">Áã¨Á´ã API Repo<a href="#Áã¨Á´ã-api-repo" class="hash-link" aria-label="Direct link to Áã¨Á´ã API Repo" title="Direct link to Áã¨Á´ã API Repo">‚Äã</a></h2><p>‰∏∫‰∫ÜÊõ¥Êñπ‰æøÈõÜÊàêÂíå‰ΩøÁî® Koordiantor ÂÆö‰πâÁöÑ APIÔºåÂπ∂ÈÅøÂÖçÂõ†‰æùËµñ Koordiantor ÂºïÂÖ•È¢ùÂ§ñÁöÑ‰æùËµñÊàñËÄÖ‰æùËµñÂÜ≤Á™ÅÈóÆÈ¢òÔºåÊàë‰ª¨Âª∫Á´ã‰∫ÜÁã¨Á´ãÁöÑ API Repo: <a href="https://github.com/koordinator-sh/apis" target="_blank" rel="noopener noreferrer">koordinator-sh/apis</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Êñ∞Â¢û-elasticquota-webhook">Êñ∞Â¢û ElasticQuota Webhook<a href="#Êñ∞Â¢û-elasticquota-webhook" class="hash-link" aria-label="Direct link to Êñ∞Â¢û ElasticQuota Webhook" title="Direct link to Êñ∞Â¢û ElasticQuota Webhook">‚Äã</a></h2><p>Âú® Koordinator v0.7 ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨Âü∫‰∫é Kubernetes sig-scheduler Êèê‰æõÁöÑ ElasticQuota ÂÅö‰∫ÜËØ∏Â§öÂ¢ûÂº∫ÔºåÊèê‰æõ‰∫ÜÊ†ëÂΩ¢ÁÆ°ÁêÜÊú∫Âà∂ÔºåÂπ∂Êèê‰æõ‰∫ÜÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂Á≠âÔºåÂèØ‰ª•ÂæàÂ•ΩÁöÑÂ∏ÆÂä©ÊÇ®Ëß£ÂÜ≥‰ΩøÁî® ElasticQuota ÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇÂú® Koordinator v1.0 ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨Ëøõ‰∏ÄÊ≠•Êèê‰æõ‰∫Ü ElasticQuota WebhookÔºåÂ∏ÆÂä©ÊÇ®Âú®‰ΩøÁî® ElasticQuota Ê†ëÂΩ¢ÁÆ°ÁêÜÊú∫Âà∂Êó∂Ôºå‰øùÈöúÊñ∞ÁöÑ ElasticQuota ÂØπË±°ÈÅµÂæ™ Koordinator ÂÆö‰πâÁöÑËßÑËåÉÊàñÁ∫¶ÊùüÔºö</p><ol><li>Èô§‰∫ÜÊ†πËäÇÁÇπÔºåÂÖ∂‰ªñÊâÄÊúâÂ≠êËäÇÁÇπÁöÑ min ‰πãÂíåË¶ÅÂ∞è‰∫éÁà∂ËäÇÁÇπÁöÑ min„ÄÇ</li><li>‰∏çÈôêÂà∂Â≠êËäÇÁÇπ maxÔºåÂÖÅËÆ∏Â≠êËäÇÁÇπÁöÑ max Â§ß‰∫éÁà∂ËäÇÁÇπÁöÑ max„ÄÇËÄÉËôë‰ª•‰∏ãÂú∫ÊôØÔºåÈõÜÁæ§‰∏≠Êúâ 2 ‰∏™ ElasticQuota Â≠êÊ†ëÔºödev-parent Âíå production-parentÔºåÊØè‰∏™Â≠êÊ†ëÈÉΩÊúâÂá†‰∏™Â≠ê ElasticQuota„ÄÇ ÂΩì production-parent ÂøôÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂè™Èôç‰Ωé dev-parent ÁöÑ max ÈôêÂà∂  dev-parent Êï¥È¢óÂ≠êÊ†ëÁöÑËµÑÊ∫ê‰ΩøÁî®ÈáèÔºåËÄå‰∏çÊòØÈôç‰Ωé dev-parent Â≠êÊ†ëÁöÑÊØè‰∏™Â≠ê ElasticQuota ÁöÑmaxÈôêÂà∂Áî®Èáè„ÄÇ</li><li>Pod ‰∏çËÉΩ‰ΩøÁî®Áà∂ËäÇÁÇπElasticQuota„ÄÇÂ¶ÇÊûúÊîæÂºÄËøô‰∏™ÈôêÂà∂Ôºå‰ºöÂØºËá¥Êï¥‰∏™ÂºπÊÄß Quota ÁöÑÊú∫Âà∂ÂèòÁöÑÂºÇÂ∏∏Â§çÊùÇÔºåÊöÇÊó∂‰∏çËÄÉËôëÊîØÊåÅËøôÁßçÂú∫ÊôØ„ÄÇ</li><li>Âè™ÊúâÁà∂ËäÇÁÇπÂèØ‰ª•ÊåÇÂ≠êËäÇÁÇπÔºå‰∏çÂÖÅËÆ∏Â≠êËäÇÁÇπÊåÇÂ≠êËäÇÁÇπ</li><li>ÊöÇÊó∂‰∏çÂÖÅËÆ∏ÊîπÂèò ElasticQuota ÁöÑ <code>quota.scheduling.koordinator.sh/is-parent</code>Â±ûÊÄß</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ-elasticquota-scheduling">Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ ElasticQuota Scheduling<a href="#Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ-elasticquota-scheduling" class="hash-link" aria-label="Direct link to Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ ElasticQuota Scheduling" title="Direct link to Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ ElasticQuota Scheduling">‚Äã</a></h2><p>Âú® Koordinator v0.7 ÁâàÊú¨‰∏≠Ôºåkoord-scheduler ÁöÑ‰∏ªÂâØ Pod ÈÉΩ‰ºöÂêØÂä® ElasticQuota Controller Âπ∂ÈÉΩ‰ºöÊõ¥Êñ∞ ElasticQuota ÂØπË±°„ÄÇÂú® Koordinator v1.0 ‰∏≠Êàë‰ª¨‰øÆÂ§ç‰∫ÜËØ•ÈóÆÈ¢òÔºåÁ°Æ‰øùÂè™Êúâ‰∏ª Pod ÂèØ‰ª•ÂêØÂä® Controller Âπ∂Êõ¥Êñ∞ ElasticQuota ÂØπË±°„ÄÇ Ëøò‰ºòÂåñ‰∫Ü ElasticQuota Controller ÊΩúÂú®ÁöÑÈ¢ëÁπÅÊõ¥Êñ∞ ElasticQuota ÂØπË±°ÁöÑÈóÆÈ¢òÔºåÂΩìÊ£ÄÊü•Âà∞ ElasticQuota ÂêÑÁª¥Â∫¶Êï∞ÊçÆÂèëÁîüÂèòÂåñÊó∂Êâç‰ºöÊõ¥Êñ∞ÔºåÈôç‰ΩéÈ¢ëÁπÅÊõ¥Êñ∞Áªô APIServer Â∏¶Êù•ÁöÑÂéãÂäõ„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ-device-share-scheduling">Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ Device Share Scheduling<a href="#Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ-device-share-scheduling" class="hash-link" aria-label="Direct link to Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ Device Share Scheduling" title="Direct link to Ëøõ‰∏ÄÊ≠•ÂÆåÂñÑ Device Share Scheduling">‚Äã</a></h2><p>Koordinator v1.0 ‰∏≠ koordlet ‰ºö‰∏äÊä• GPU ÁöÑÂûãÂè∑ÂíåÈ©±Âä®ÁâàÊú¨Âà∞ Device CRD ÂØπË±°‰∏≠ÔºåÂπ∂‰ºöÁî± koord-manager ÂêåÊ≠•Êõ¥Êñ∞Âà∞ Node ÂØπË±°ÔºåËøΩÂä†Áõ∏Â∫îÁöÑÊ†áÁ≠æ„ÄÇ</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 460.91.03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tesla</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">T4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.10.0.4.164</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="koordinator-runtime-proxy-Â¢ûÂº∫ÂÖºÂÆπÊÄß">Koordinator Runtime Proxy Â¢ûÂº∫ÂÖºÂÆπÊÄß<a href="#koordinator-runtime-proxy-Â¢ûÂº∫ÂÖºÂÆπÊÄß" class="hash-link" aria-label="Direct link to Koordinator Runtime Proxy Â¢ûÂº∫ÂÖºÂÆπÊÄß" title="Direct link to Koordinator Runtime Proxy Â¢ûÂº∫ÂÖºÂÆπÊÄß">‚Äã</a></h2><p>Âú® Koordinator ‰πãÂâçÁöÑÁâàÊú¨‰∏≠Ôºåkoord-runtime-proxy Âíå koordlet ‰∏ÄËµ∑ÂÆâË£ÖÂêéÔºåÂ¶ÇÊûú koordlet ÂºÇÂ∏∏ÊàñËÄÖ koordlet Âç∏ËΩΩ/ÈáçË£ÖÁ≠âÂú∫ÊôØ‰∏ãÔºå‰ºöÈÅáÂà∞Êñ∞Ë∞ÉÂ∫¶Âà∞ËäÇÁÇπÁöÑ Pod Êó†Ê≥ïÂàõÂª∫ÂÆπÂô®ÁöÑÈóÆÈ¢ò„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåkoord-runtime-proxy ‰ºöÊÑüÁü• Pod ÊòØÂê¶ÂÖ∑ÊúâÁâπÊÆäÁöÑ label <code>runtimeproxy.koordinator.sh/skip-hookserver=true</code>ÔºåÂ¶ÇÊûú Pod Â≠òÂú®ËØ•Ê†áÁ≠æÔºåkoord-runtime-proxy ‰ºöÁõ¥Êé•Êää CRI ËØ∑Ê±ÇËΩ¨ÂèëÁªô containerd/docker Á≠â runtime„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ∂‰ªñÊîπÂä®">ÂÖ∂‰ªñÊîπÂä®<a href="#ÂÖ∂‰ªñÊîπÂä®" class="hash-link" aria-label="Direct link to ÂÖ∂‰ªñÊîπÂä®" title="Direct link to ÂÖ∂‰ªñÊîπÂä®">‚Äã</a></h2><p>‰Ω†ÂèØ‰ª•ÈÄöËøá <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v1.0.0" target="_blank" rel="noopener noreferrer">Github release</a> È°µÈù¢ÔºåÊù•Êü•ÁúãÊõ¥Â§öÁöÑÊîπÂä®‰ª•ÂèäÂÆÉ‰ª¨ÁöÑ‰ΩúËÄÖ‰∏éÊèê‰∫§ËÆ∞ÂΩï„ÄÇ</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v0.7.0">Koordinator v0.7: ‰∏∫‰ªªÂä°Ë∞ÉÂ∫¶È¢ÜÂüüÊ≥®ÂÖ•Êñ∞Ê¥ªÂäõ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-23T00:00:00.000Z" itemprop="datePublished">September 23, 2022</time> ¬∑ <!-- -->34 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/eahydra.png" alt="Joseph"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Joseph</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="https://koordinator.sh/" target="_blank" rel="noopener noreferrer">Koordinator[1]</a> Áªß‰∏äÊ¨° <a href="https://mp.weixin.qq.com/s/YdoxVxz_91ZFemF8JuxRvQ" target="_blank" rel="noopener noreferrer">v0.6ÁâàÊú¨[2]</a> ÂèëÂ∏ÉÂêéÔºåÁªèËøá Koordinator Á§æÂå∫ÁöÑÂä™ÂäõÔºåÊàë‰ª¨ËøéÊù•‰∫ÜÂÖ∑ÊúâÈáçÂ§ßÊÑè‰πâÁöÑ v0.7 ÁâàÊú¨„ÄÇÂú®Ëøô‰∏™ÁâàÊú¨‰∏≠ÁùÄÈáçËß£ÂÜ≥Êú∫Âô®Â≠¶‰π†„ÄÅÂ§ßÊï∞ÊçÆÂú∫ÊôØÈúÄË¶ÅÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶ËÉΩÂäõÔºå‰æãÂ¶Ç CoScheduling„ÄÅElasticQuotaÂíåÁ≤æÁªÜÂåñÁöÑ GPU ÂÖ±‰∫´Ë∞ÉÂ∫¶ËÉΩÂäõ„ÄÇÂπ∂Âú®Ë∞ÉÂ∫¶ÈóÆÈ¢òËØäÊñ≠ÂàÜÊûêÊñπÈù¢ÂæóÂà∞‰∫ÜÂ¢ûÂº∫ÔºåÈáçË∞ÉÂ∫¶Âô®‰πüÊûÅÂ§ßÁöÑÊèêÂçá‰∫ÜÂÆâÂÖ®ÊÄßÔºåÈôç‰Ωé‰∫ÜÈáçË∞ÉÂ∫¶ÁöÑÈ£éÈô©„ÄÇ</p><h1>ÁâàÊú¨ÂäüËÉΩÁâπÊÄßËß£ËØª</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-‰ªªÂä°Ë∞ÉÂ∫¶">1. ‰ªªÂä°Ë∞ÉÂ∫¶<a href="#1-‰ªªÂä°Ë∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to 1. ‰ªªÂä°Ë∞ÉÂ∫¶" title="Direct link to 1. ‰ªªÂä°Ë∞ÉÂ∫¶">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-enhanced-coscheduling">1.1 Enhanced Coscheduling<a href="#11-enhanced-coscheduling" class="hash-link" aria-label="Direct link to 1.1 Enhanced Coscheduling" title="Direct link to 1.1 Enhanced Coscheduling">‚Äã</a></h3><p>Gang schedulingÊòØÂú®Âπ∂ÂèëÁ≥ªÁªü‰∏≠Â∞ÜÂ§ö‰∏™Áõ∏ÂÖ≥ËÅîÁöÑËøõÁ®ãË∞ÉÂ∫¶Âà∞‰∏çÂêåÂ§ÑÁêÜÂô®‰∏äÂêåÊó∂ËøêË°åÁöÑÁ≠ñÁï•ÔºåÂÖ∂ÊúÄ‰∏ªË¶ÅÁöÑÂéüÂàôÊòØ‰øùËØÅÊâÄÊúâÁõ∏ÂÖ≥ËÅîÁöÑËøõÁ®ãËÉΩÂ§üÂêåÊó∂ÂêØÂä®ÔºåÈò≤Ê≠¢ÈÉ®ÂàÜËøõÁ®ãÁöÑÂºÇÂ∏∏ÔºåÂØºËá¥Êï¥‰∏™ÂÖ≥ËÅîËøõÁ®ãÁªÑÁöÑÈòªÂ°û„ÄÇ‰æãÂ¶ÇÂΩìÊèê‰∫§‰∏Ä‰∏™JobÊó∂‰ºö‰∫ßÁîüÂ§ö‰∏™‰ªªÂä°ÔºåËøô‰∫õ‰ªªÂä°ÊúüÊúõË¶Å‰πàÂÖ®ÈÉ®Ë∞ÉÂ∫¶ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇËøôÁßçÈúÄÊ±ÇÁß∞‰∏∫ All-or-NothingÔºåÂØπÂ∫îÁöÑÂÆûÁé∞Ë¢´Áß∞‰Ωú Gang Scheduling(or Coscheduling) „ÄÇ<br>Koordinator Âú®ÂêØÂä®‰πãÂàùÔºåÊúüÊúõÊîØÊåÅ Kubernetes Â§öÁßçÂ∑•‰ΩúË¥üËΩΩÁöÑÊ∑∑ÈÉ®Ë∞ÉÂ∫¶ÔºåÊèêÈ´òÂ∑•‰ΩúË¥üËΩΩÁöÑËøêË°åÊó∂ÊïàÁéáÂíåÂèØÈù†ÊÄßÔºåÂÖ∂‰∏≠Â∞±ÂåÖÊã¨‰∫ÜÊú∫Âô®Â≠¶‰π†ÂíåÂ§ßÊï∞ÊçÆÈ¢ÜÂüü‰∏≠ÂπøÊ≥õÂ≠òÂú®ÁöÑÂÖ∑Â§á All-or-Nothing ÈúÄÊ±ÇÁöÑ‰Ωú‰∏öË¥üËΩΩ„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥ All-or-Nothing Ë∞ÉÂ∫¶ÈúÄÊ±ÇÔºåKoordinator v0.7.0 Âü∫‰∫éÁ§æÂå∫Â∑≤ÊúâÁöÑ Coscheduling ÂÆûÁé∞‰∫Ü Enhanced Coscheduling„ÄÇ<br>Enhanced Coscheduling ÁßâÊâøÁùÄ Koordiantor ÂÖºÂÆπÁ§æÂå∫ÁöÑÂéüÂàôÔºåÂÆåÂÖ®ÂÖºÂÆπÁ§æÂå∫ Coscheduling Âíå ‰æùËµñÁöÑ PodGroup CRD„ÄÇÂ∑≤Áªè‰ΩøÁî® PodGroup ÁöÑÁî®Êà∑ÂèØ‰ª•Êó†ÁºùÂçáÁ∫ßÂà∞ Koordinator„ÄÇ<br>Èô§Ê≠§‰πãÂ§ñÔºåEnhanced Coscheduling ËøòÂÆûÁé∞‰∫ÜÂ¶Ç‰∏ãÂ¢ûÂº∫ËÉΩÂäõÔºö</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅ-strict-Âíå-nonstrict-‰∏§ÁßçÊ®°Âºè">ÊîØÊåÅ <code>Strict</code> Âíå <code>NonStrict</code> ‰∏§ÁßçÊ®°Âºè<a href="#ÊîØÊåÅ-strict-Âíå-nonstrict-‰∏§ÁßçÊ®°Âºè" class="hash-link" aria-label="Direct link to ÊîØÊåÅ-strict-Âíå-nonstrict-‰∏§ÁßçÊ®°Âºè" title="Direct link to ÊîØÊåÅ-strict-Âíå-nonstrict-‰∏§ÁßçÊ®°Âºè">‚Äã</a></h4><p>‰∏§ÁßçÊ®°ÂºèÁöÑÂå∫Âà´Âú®‰∫é <code>Strict</code>Ê®°ÂºèÔºàÂç≥ÈªòËÆ§Ê®°ÂºèÔºâ‰∏ãË∞ÉÂ∫¶Â§±Ë¥•‰ºö Reject ÊâÄÊúâÂàÜÈÖçÂà∞ËµÑÊ∫êÂπ∂Â§Ñ‰∫é Wait Áä∂ÊÄÅÁöÑ PodÔºåËÄå <code>NonStrict</code> Ê®°Âºè‰∏ç‰ºöÂèëËµ∑ Reject„ÄÇNonStrict Ê®°Âºè‰∏ãÔºåÂêåÂ±û‰∫é‰∏Ä‰∏™ PodGroup ÁöÑ Pod A Âíå PodB Ë∞ÉÂ∫¶Êó∂ÔºåÂ¶ÇÊûú PodA Ë∞ÉÂ∫¶Â§±Ë¥•‰∏ç‰ºöÂΩ±Âìç PodB Ë∞ÉÂ∫¶Ôºå PodB Ëøò‰ºöÁªßÁª≠Ë¢´Ë∞ÉÂ∫¶„ÄÇNonStrict Ê®°ÂºèÂØπ‰∫é‰ΩìÈáèËæÉÂ§ßÁöÑ Job ÊØîËæÉÂèãÂ•ΩÔºåÂèØ‰ª•ËÆ©ËøôÁßçÂ§ß‰ΩìÈáè Job Êõ¥Âø´ÁöÑË∞ÉÂ∫¶ÂÆåÊàêÔºå‰ΩÜÂêåÊó∂‰πüÂ¢ûÂä†‰∫ÜËµÑÊ∫êÊ≠ªÈîÅÁöÑÈ£éÈô©„ÄÇÂêéÁª≠ Koordinator ‰ºöÊèê‰æõ NonStrict Ê®°Âºè‰∏ãËß£ÂÜ≥Ê≠ªÈîÅÁöÑÊñπÊ°àÂÆûÁé∞„ÄÇ <br>Áî®Êà∑Âú®‰ΩøÁî®Êó∂ÔºåÂèØ‰ª•Âú® PodGroup ÊàñËÄÖ Pod ‰∏≠ËøΩÂä† annotation <code>gang.scheduling.koordinator.sh/mode=NonStrict</code>ÂºÄÂêØ NonStrict Ê®°Âºè„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîπËøõ-podgroup-Ë∞ÉÂ∫¶Â§±Ë¥•ÁöÑÂ§ÑÁêÜÊú∫Âà∂ÂÆûÁé∞Êõ¥È´òÊïàÁöÑÈáçËØïË∞ÉÂ∫¶">ÊîπËøõ PodGroup Ë∞ÉÂ∫¶Â§±Ë¥•ÁöÑÂ§ÑÁêÜÊú∫Âà∂ÔºåÂÆûÁé∞Êõ¥È´òÊïàÁöÑÈáçËØïË∞ÉÂ∫¶<a href="#ÊîπËøõ-podgroup-Ë∞ÉÂ∫¶Â§±Ë¥•ÁöÑÂ§ÑÁêÜÊú∫Âà∂ÂÆûÁé∞Êõ¥È´òÊïàÁöÑÈáçËØïË∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to ÊîπËøõ PodGroup Ë∞ÉÂ∫¶Â§±Ë¥•ÁöÑÂ§ÑÁêÜÊú∫Âà∂ÔºåÂÆûÁé∞Êõ¥È´òÊïàÁöÑÈáçËØïË∞ÉÂ∫¶" title="Direct link to ÊîπËøõ PodGroup Ë∞ÉÂ∫¶Â§±Ë¥•ÁöÑÂ§ÑÁêÜÊú∫Âà∂ÔºåÂÆûÁé∞Êõ¥È´òÊïàÁöÑÈáçËØïË∞ÉÂ∫¶">‚Äã</a></h4><p>‰∏æ‰∏™‰æãÂ≠êÔºåPodGroup A ÂÖ≥ËÅî‰∫Ü5‰∏™PodÔºåÂÖ∂‰∏≠Ââç3‰∏™PodÈÄöËøáFilter/ScoreÔºåËøõÂÖ•WaitÈò∂ÊÆµÔºåÁ¨¨4‰∏™PodË∞ÉÂ∫¶Â§±Ë¥•ÔºåÂΩìË∞ÉÂ∫¶Á¨¨5‰∏™PodÊó∂ÔºåÂèëÁé∞Á¨¨4‰∏™PodÂ∑≤ÁªèÂ§±Ë¥•ÔºåÂàôÊãíÁªùË∞ÉÂ∫¶„ÄÇÂú®Á§æÂå∫ Coscheduling ÂÆûÁé∞‰∏≠ÔºåË∞ÉÂ∫¶Â§±Ë¥•ÁöÑPodGroup ‰ºöÂä†ÂÖ•Âà∞Âü∫‰∫écacheÊú∫Âà∂ÁöÑ lastDeniedPG  ÂØπË±°‰∏≠ÔºåÂΩì cache Ê≤°ÊúâËøáÊúüÔºåÂàô‰ºöÊãíÁªùË∞ÉÂ∫¶ÔºõÂ¶ÇÊûúËøáÊúüÂ∞±ÂÖÅËÆ∏ÁªßÁª≠Ë∞ÉÂ∫¶„ÄÇÂèØ‰ª•ÁúãÂà∞ cache ÁöÑËøáÊúüÊó∂Èó¥ÂæàÂÖ≥ÈîÆÔºåËøáÊúüÊó∂Èó¥ËÆæÁΩÆÁöÑËøáÈïø‰ºöÂØºËá¥PodËøüËøüÂæó‰∏çÂà∞Ë∞ÉÂ∫¶Êú∫‰ºöÔºåËÆæÁΩÆÁöÑËøáÁü≠‰ºöÂá∫Áé∞È¢ëÁπÅÁöÑÊó†ÊïàË∞ÉÂ∫¶„ÄÇ<br>ËÄåÂú®Enhanced Coscheduling ‰∏≠ÔºåÂÆûÁé∞‰∫Ü‰∏ÄÁßçÂü∫‰∫é ScheduleCycle ÁöÑÈáçËØïÊú∫Âà∂„ÄÇ‰ª•‰∏äÂú∫ÊôØ‰∏∫‰æãÔºå5‰∏™PodÁöÑ ScheduleCycle ÂàùÂßãÂÄº‰∏∫ 0ÔºåPodGroup ÂØπÂ∫îÁöÑ ScheduleCycle ÂàùÂßãÂÄº‰∏∫1ÔºõÂΩìÊØè‰∏ÄÊ¨°Â∞ùËØïË∞ÉÂ∫¶ Pod Êó∂ÔºåÈÉΩ‰ºöÊõ¥Êñ∞ Pod ScheduleCycle ‰∏∫ PodGroup ScheduleCycle„ÄÇÂ¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™ Pod Ë∞ÉÂ∫¶Â§±Ë¥•Ôºå‰ºöÊ†áËÆ∞ÂΩìÂâçÁöÑ PodGroup ScheduleCycle Êó†ÊïàÔºå‰πãÂêéÊâÄÊúâÂ∞è‰∫é PodGroup ScheduleCycle ÁöÑ Pod ÈÉΩ‰ºöË¢´ÊãíÁªùË∞ÉÂ∫¶„ÄÇÂΩìÂêå‰∏Ä‰∏™ PodGroup ‰∏ãÁöÑÊâÄÊúâ Pod ÈÉΩÂ∞ùËØïË∞ÉÂ∫¶‰∏ÄËΩÆÂêéÔºåPod ScheduleCycle ÈÉΩÊõ¥Êñ∞‰∏∫ÂΩìÂâç PodGroup ScheduleCycleÔºåÂπ∂ÈÄíËøõ PodGroup ScheduleCycleÔºåÂπ∂Ê†áËÆ∞ÂÖÅËÆ∏Ë∞ÉÂ∫¶„ÄÇËøôÁßçÊñπÂºèÂèØ‰ª•ÊúâÊïàËßÑÈÅøÂü∫‰∫éËøáÊúüÊó∂Èó¥ÁöÑÁº∫Èô∑ÔºåÂÆåÂÖ®ÂèñÂÜ≥‰∫éË∞ÉÂ∫¶ÈòüÂàóÁöÑÈÖçÁΩÆÈáçËØïË∞ÉÂ∫¶„ÄÇ<br><img loading="lazy" alt="image.png" src="/assets/images/gang-schedulue-cycle-597c5d13e7b13ec4e2e0752bc8e0678d.png" title="Âü∫‰∫é ScheduleCycle ÁöÑÈáçËØïÊú∫Âà∂" width="3078" height="922" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅÂ§ö‰∏™-podgroup-‰∏∫‰∏ÄÁªÑÂÆåÊàê-gang-scheduling">ÊîØÊåÅÂ§ö‰∏™ PodGroup ‰∏∫‰∏ÄÁªÑÂÆåÊàê Gang Scheduling<a href="#ÊîØÊåÅÂ§ö‰∏™-podgroup-‰∏∫‰∏ÄÁªÑÂÆåÊàê-gang-scheduling" class="hash-link" aria-label="Direct link to ÊîØÊåÅÂ§ö‰∏™ PodGroup ‰∏∫‰∏ÄÁªÑÂÆåÊàê Gang Scheduling" title="Direct link to ÊîØÊåÅÂ§ö‰∏™ PodGroup ‰∏∫‰∏ÄÁªÑÂÆåÊàê Gang Scheduling">‚Äã</a></h4><p>‰∏Ä‰∫õÂ§çÊùÇÁöÑ Job ÊúâÂ§öÁßçËßíËâ≤ÔºåÊØè‰∏™ËßíËâ≤ÁÆ°ÁêÜ‰∏ÄÊâπ‰ªªÂä°ÔºåÊØè‰∏™ËßíËâ≤ÁöÑ‰ªªÂä°Ë¶ÅÊ±ÇÊîØÊåÅ All-or-Nothing ÔºåÊØè‰∏™ËßíËâ≤ÁöÑ MinMember Ë¶ÅÊ±Ç‰πü‰∏ç‰∏ÄÊ†∑ÔºåÂπ∂‰∏îÊØè‰∏™ËßíËâ≤‰πãÈó¥‰πüË¶ÅÊ±Ç All-or-Nothing„ÄÇËøôÂ∞±ÂØºËá¥ÊØè‰∏™ËßíËâ≤ÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑ PodGroup ÔºåÂπ∂‰∏îËøòË¶ÅÊ±Ç PodGroup Âç≥‰ΩøÊª°Ë∂≥‰∫Ü‰πüÈúÄË¶ÅÁ≠âÂæÖÂÖ∂‰ªñËßíËâ≤ÁöÑ PodGroup ÂøÖÈ°ªÊª°Ë∂≥„ÄÇÁ§æÂå∫ Coscheduling Êó†Ê≥ïÊª°Ë∂≥ËøôÁßçÂú∫ÊôØÈúÄÊ±Ç„ÄÇËÄå Koordinator ÂÆûÁé∞ÁöÑ Enhanced Coscheduling ÊîØÊåÅÁî®Êà∑Âú®Â§ö‰∏™ PodGroup ‰∏≠Â¢ûÂä† anntation Áõ∏ÂÖ≥ÂÖ≥ËÅîÂÆûÁé∞ÔºåÂπ∂ÊîØÊåÅË∑®Namespace„ÄÇ‰æãÂ¶ÇÁî®Êà∑Êúâ2‰∏™PodGroup ÔºåÂêçÂ≠óÂàÜÂà´ÊòØPodGroupAÂíåPodGroupBÔºåÂèØ‰ª•ÊåâÁÖßÂ¶Ç‰∏ã‰æãÂ≠êÂÖ≥ËÅî‰∏§‰∏™ PodGroupÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> podGroupA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;namespaceA/podGroupA&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;namespaceB/podGroupB&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÊîØÊåÅËΩªÈáèÂåñ-gang-ÂçèËÆÆ">ÊîØÊåÅËΩªÈáèÂåñ Gang ÂçèËÆÆ<a href="#ÊîØÊåÅËΩªÈáèÂåñ-gang-ÂçèËÆÆ" class="hash-link" aria-label="Direct link to ÊîØÊåÅËΩªÈáèÂåñ Gang ÂçèËÆÆ" title="Direct link to ÊîØÊåÅËΩªÈáèÂåñ Gang ÂçèËÆÆ">‚Äã</a></h4><p>Â¶ÇÊûúÁî®Êà∑‰∏çÂ∏åÊúõÂàõÂª∫ PodGroupÔºåËÆ§‰∏∫ÂàõÂª∫ PodGroup Â§™ÁπÅÁêêÔºåÈÇ£‰πàÂèØ‰ª•ËÄÉËôëÂú®‰∏ÄÁªÑ Pod ‰∏≠Â°´ÂÖÖÁõ∏Âêå annotation  <code>gang.scheduling.koordinator.sh/name=&lt;podGroupName&gt;</code> Ë°®Á§∫Ëøô‰∏ÄÁªÑ Pod ‰ΩøÁî® Coscheduling Ë∞ÉÂ∫¶„ÄÇÂ¶ÇÊûúÊúüÊúõËÆæÁΩÆ minMember ÔºåÂèØ‰ª•ËøΩÂä† Annotation <code>gang.scheduling.koordinator.sh/min-available=&lt;availableNum&gt;</code>„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pod-group-a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gang.scheduling.koordinator.sh/min-available</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-elasticquota-scheduling">1.2 ElasticQuota Scheduling<a href="#12-elasticquota-scheduling" class="hash-link" aria-label="Direct link to 1.2 ElasticQuota Scheduling" title="Direct link to 1.2 ElasticQuota Scheduling">‚Äã</a></h3><p>‰∏ÄÂÆ∂‰∏≠Â§ßÂûãÂÖ¨Âè∏ÂÜÖÊúâÂ§ö‰∏™‰∫ßÂìÅÂíåÁ†îÂèëÂõ¢ÈòüÔºåÂÖ±Áî®Â§ö‰∏™ÊØîËæÉÂ§ßËßÑÊ®°ÁöÑ Kubernetes ÈõÜÁæ§ÔºåËøô‰∫õÈõÜÁæ§ÂÜÖÂê´ÊúâÁöÑÂ§ßÈáè CPU/Memory/Disk Á≠âËµÑÊ∫êË¢´ËµÑÊ∫êËøêËê•Âõ¢ÈòüÁªü‰∏ÄÁÆ°ÁêÜ„ÄÇËøêËê•Âõ¢ÈòüÂæÄÂæÄÂú®ÈááË¥≠ËµÑÊ∫êÂâçÔºåÈÄöËøáÈ¢ùÂ∫¶È¢ÑÁÆóÁöÑÊú∫Âà∂ËÆ©ÂÖ¨Âè∏ÂÜÖÊØè‰∏™Âõ¢ÈòüÊ†πÊçÆËá™Ë∫´ÁöÑÈúÄÊ±ÇÊèê‰∫§È¢ùÂ∫¶È¢ÑÁÆó„ÄÇ‰∏öÂä°Âõ¢ÈòüÊ≠§Êó∂‰∏ÄËà¨Ê†πÊçÆ‰∏öÂä°ÂΩìÂâçÂíåÂØπÊú™Êù•ÁöÑÈ¢ÑÊúüÂÅöÂ•ΩÈ¢ùÂ∫¶È¢ÑÁÆó„ÄÇÊúÄÁêÜÊÉ≥ÁöÑÊÉÖÂÜµÊòØÊØè‰∏Ä‰ªΩÈ¢ùÂ∫¶ÈÉΩËÉΩÂ§üË¢´‰ΩøÁî®Ôºå‰ΩÜÁé∞ÂÆûÂëäËØâÊàë‰ª¨ËøôÊòØ‰∏çÁé∞ÂÆûÁöÑ„ÄÇÂæÄÂæÄÂá∫Áé∞ÁöÑÈóÆÈ¢òÊòØÔºö</p><ol><li>Âõ¢Èòü A È´ò‰º∞‰∫Ü‰∏öÂä°ÁöÑÂèëÂ±ïÈÄüÂ∫¶ÔºåÁî≥ËØ∑‰∫ÜÂ§™Â§öÁöÑÈ¢ùÂ∫¶Áî®‰∏çÂÆå</li><li>Âõ¢Èòü B ‰Ωé‰º∞‰∫Ü‰∏öÂä°ÁöÑÂèëÂ±ïÈÄüÂ∫¶ÔºåÁî≥ËØ∑ÁöÑÈ¢ùÂ∫¶‰∏çÂ§üÁî®</li><li>Âõ¢Èòü C ÂÆâÊéí‰∫Ü‰∏ÄÂú∫Ê¥ªÂä®ÔºåÊâã‰∏äÁöÑÈ¢ùÂ∫¶‰∏çÂ§üÂ§ö‰∫ÜÔºå‰ΩÜÊòØÊ¥ªÂä®Âè™ÊåÅÁª≠Âá†Âë®ÔºåÁî≥ËØ∑Â§™Â§öÈ¢ùÂ∫¶ÂíåËµÑÊ∫ê‰πü‰ºöÊµ™Ë¥πÊéâ„ÄÇ</li><li>Âõ¢Èòü D ‰∏ãÈù¢ËøòÊúâÂêÑ‰∏™Â≠êÂõ¢ÈòüÂíå‰∏öÂä°ÔºåÊØè‰∏™Â≠êÂõ¢ÈòüÂÜÖ‰πü‰ºöÂá∫Áé∞Á±ª‰ººA B C ‰∏â‰∏™Âõ¢ÈòüÁöÑÊÉÖÂÜµÔºåËÄå‰∏îÂÖ∂‰∏≠Êúâ‰∫õÂõ¢ÈòüÁöÑ‰∏öÂä°‰∏¥Êó∂Á™ÅÂèëÈúÄË¶ÅÊèê‰∫§‰∏Ä‰∫õËÆ°ÁÆó‰ªªÂä°Ë¶Å‰∫§‰∏™ÂÆ¢Êà∑Ôºå‰ΩÜÊòØÊ≤°ÊúâÈ¢ùÂ∫¶‰∫ÜÔºåËµ∞È¢ùÂ∫¶È¢ÑÁÆóÂÆ°Êâπ‰πü‰∏çÂ§ü‰∫Ü„ÄÇ</li><li>......</li></ol><p>‰ª•‰∏äÂ§ßÂÆ∂Êó•Â∏∏ÁªèÂ∏∏ÈÅáÂà∞ÁöÑÂú∫ÊôØÔºåÂú®Ê∑∑ÈÉ®Âú∫ÊôØ„ÄÅÂ§ßÊï∞ÊçÆÂú∫ÊôØÔºå‰∏¥Êó∂ÊÄßÁ™ÅÂèëÈúÄÊ±ÇÂèàÊòØÊó∂Â∏∏Âá∫Áé∞ÁöÑÔºåËøô‰∫õËµÑÊ∫êÁöÑÈúÄÊ±ÇÈÉΩÁªôÈ¢ùÂ∫¶ÁÆ°ÁêÜÂ∑•‰ΩúÂ∏¶Êù•‰∫ÜÊûÅÂ§ßÁöÑÊåëÊàò„ÄÇÂÅöÂ•ΩÈ¢ùÂ∫¶ÁÆ°ÁêÜÂ∑•‰ΩúÔºå‰∏ÄÊñπÈù¢ÈÅøÂÖçËøáÂ∫¶ÈááË¥≠ËµÑÊ∫êÈôç‰ΩéÊàêÊú¨ÔºåÂèàË¶ÅÂú®‰∏¥Êó∂ÈúÄË¶ÅÈ¢ùÂ∫¶Êó∂‰∏çÈááË¥≠ËµÑÊ∫êÊàñËÄÖÂ∞ΩÈáèÂ∞ëÁöÑÈááË¥≠ËµÑÊ∫êÔºõÂè¶‰∏ÄÊñπÈù¢‰∏çËÉΩÂõ†‰∏∫È¢ùÂ∫¶ÈóÆÈ¢òÈôêÂà∂ËµÑÊ∫ê‰ΩøÁî®ÁéáÔºåÈ¢ùÂ∫¶ÁÆ°ÁêÜ‰∏çÂ•ΩÂ∞±‰ºöÂØºËá¥Âç≥‰ΩøÊúâÊØîËæÉÂ•ΩÁöÑÊäÄÊúØÂ∏ÆÂä©Â§çÁî®ËµÑÊ∫êÔºå‰πüÊó†Ê≥ïÂèëÊå•ÂÖ∂‰ª∑ÂÄº„ÄÇ ÊÄª‰πãÔºåÈ¢ùÂ∫¶ÁÆ°ÁêÜÂ∑•‰ΩúÊòØÂπøÂ§ßÂÖ¨Âè∏ÊàñÁªÑÁªáÈúÄÈïøÊúüÈù¢ÂØπ‰∏îÂøÖÈ°ªÈù¢ÂØπÁöÑÈóÆÈ¢ò„ÄÇ<br>Kubernetes ResourceQuota ÂèØ‰ª•Ëß£ÂÜ≥È¢ùÂ∫¶ÁÆ°ÁêÜÁöÑÈÉ®ÂàÜÈóÆÈ¢ò„ÄÇ ÂéüÁîü Kubernetes ResourceQuota API Áî®‰∫éÊåáÂÆöÊØè‰∏™ Namespace ÁöÑÊúÄÂ§ßËµÑÊ∫êÈ¢ùÂ∫¶ÈáèÔºåÂπ∂ÈÄöËøá admission Êú∫Âà∂ÂÆåÊàêÂáÜÂÖ•Ê£ÄÊü•„ÄÇÂ¶ÇÊûú Namespace ÂΩìÂâçËµÑÊ∫êÂàÜÈÖçÊÄªÈáèË∂ÖËøáResourceQuota ÊåáÂÆöÁöÑÈÖçÈ¢ùÔºåÂàôÊãíÁªùÂàõÂª∫ Pod„ÄÇ Kubernetes ResourceQuota ËÆæËÆ°Êúâ‰∏Ä‰∏™Â±ÄÈôêÊÄßÔºöQuota  Áî®ÈáèÊòØÊåâÁÖß Pod Requests ËÅöÂêàÁöÑ„ÄÇ ËôΩÁÑ∂ËøôÁßçÊú∫Âà∂ÂèØ‰ª•‰øùËØÅÂÆûÈôÖÁöÑËµÑÊ∫êÊ∂àËÄóÊ∞∏Ëøú‰∏ç‰ºöË∂ÖËøá ResourceQuota ÁöÑÈôêÂà∂Ôºå‰ΩÜÂÆÉÂèØËÉΩ‰ºöÂØºËá¥ËµÑÊ∫êÂà©Áî®Áéá‰ΩéÔºåÂõ†‰∏∫‰∏Ä‰∫õ Pod ÂèØËÉΩÂ∑≤ÁªèÁî≥ËØ∑‰∫ÜËµÑÊ∫ê‰ΩÜÊú™ËÉΩË∞ÉÂ∫¶„ÄÇ <br>Kuberenetes Scheduler-Sig ÂêéÊù•ÁªôÂá∫‰∫Ü‰∏Ä‰∏™ÂÄüÈâ¥ Yarn Capacity SchedulingÔºåÁß∞‰Ωú ElasticQuota ÁöÑËÆæËÆ°ÊñπÊ°àÂπ∂ÁªôÂá∫‰∫ÜÂÖ∑‰ΩìÁöÑÂÆûÁé∞„ÄÇÂÖÅËÆ∏Áî®Êà∑ËÆæÁΩÆ max Âíå minÔºö</p><ul><li>max Ë°®Á§∫Áî®Êà∑ÂèØ‰ª•Ê∂àË¥πÁöÑËµÑÊ∫ê‰∏äÈôê</li><li>min Ë°®Á§∫ÈúÄË¶Å‰øùÈöúÁî®Êà∑ÂÆûÁé∞Âü∫Êú¨ÂäüËÉΩ/ÊÄßËÉΩÊâÄÈúÄË¶ÅÁöÑÊúÄÂ∞èËµÑÊ∫êÈáè</li></ul><p>ÈÄöËøáËøô‰∏§‰∏™ÂèÇÊï∞ÂèØ‰ª•Â∏ÆÂä©Áî®Êà∑ÂÆûÁé∞Â¶Ç‰∏ãÁöÑÈúÄÊ±ÇÔºö</p><ol><li>Áî®Êà∑ËÆæÁΩÆ min &lt; max Êó∂ÔºåÂΩìÊúâÁ™ÅÂèëËµÑÊ∫êÈúÄÊ±ÇÊó∂ÔºåÂç≥‰ΩøÂΩìÂâç ElasticQuota ÁöÑÊÄªÁî®ÈáèË∂ÖËøá‰∫Ü minÔºå ‰ΩÜÂè™Ë¶ÅÊ≤°ÊúâËææÂà∞ maxÔºåÈÇ£‰πàÁî®Êà∑ÂèØ‰ª•ÁªßÁª≠ÂàõÂª∫Êñ∞ÁöÑ Pod Â∫îÂØπÊñ∞ÁöÑ‰ªªÂä°ËØ∑Ê±Ç„ÄÇ</li><li>ÂΩìÁî®Êà∑ÈúÄË¶ÅÊõ¥Â§öËµÑÊ∫êÊó∂ÔºåÁî®Êà∑ÂèØ‰ª•‰ªéÂÖ∂‰ªñ ElasticQuota ‰∏≠‚ÄúÂÄüÁî®(borrow)‚Äù ËøòÊ≤°ÊúâË¢´‰ΩøÁî®Âπ∂‰∏îÈúÄË¶ÅÈÄö‰øùÈöúÁöÑ min„ÄÇ</li><li>ÂΩì‰∏Ä‰∏™ ElasticQuota ÈúÄË¶Å‰ΩøÁî® min ËµÑÊ∫êÊó∂Ôºå‰ºöÈÄöËøáÊä¢Âç†Êú∫Âà∂‰ªéÂÖ∂‰ªñÂÄüÁî®ÊñπÊä¢ÂõûÊù•ÔºåÂç≥È©±ÈÄê‰∏Ä‰∫õÂÖ∂‰ªñElasticQuota Ë∂ÖËøá min Áî®ÈáèÁöÑ Pod„ÄÇ</li></ol><p>ElasticQuota ËøòÊúâ‰∏Ä‰∫õÂ±ÄÈôêÊÄßÔºöÊ≤°ÊúâÂæàÂ•ΩÁöÑ‰øùÈöúÂÖ¨Âπ≥ÊÄß„ÄÇÂÅáÂ¶ÇÂêå‰∏Ä‰∏™ ElasticQuota ÊúâÂ§ßÈáèÊñ∞Âª∫ÁöÑPodÔºåÊúâÂèØËÉΩ‰ºöÊ∂àËÄóÊâÄÊúâÂÖ∂‰ªñÂèØ‰ª•Ë¢´ÂÄüÁî®ÁöÑQuotaÔºå‰ªéËÄåÂØºËá¥ÂêéÊù•ÁöÑ Pod ÂèØËÉΩÊãø‰∏çÂà∞ Quota„ÄÇÊ≠§Êó∂Âè™ËÉΩÈÄöËøáÊä¢Âç†Êú∫Âà∂Êä¢ÂõûÊù•‰∏Ä‰∫õ Quota„ÄÇ<br>Âè¶Â§ñ ElasticQuota Âíå Kubernetes ResourceQuota ÈÉΩÊòØÈù¢Âêë NamespaceÁöÑÔºå‰∏çÊîØÊåÅÂ§öÁ∫ßÊ†ëÂΩ¢ÁªìÊûÑÔºåÂØπ‰∫é‰∏Ä‰∫õÊú¨Ë∫´ÂÖ∑Â§áÂ§çÊùÇÁªÑÁªáÂÖ≥Á≥ªÁöÑ‰ºÅ‰∏ö/ÁªÑÁªá‰∏çËÉΩÂæàÂ•ΩÁöÑ‰ΩøÁî®ElasticQuota/Kubenretes ResourceQuota ÂÆåÊàêÈ¢ùÂ∫¶ÁÆ°ÁêÜÂ∑•‰Ωú„ÄÇ<br>Koordinator ÈíàÂØπËøô‰∫õÈ¢ùÂ∫¶ÁÆ°ÁêÜÈóÆÈ¢òÔºåÁªôÂá∫‰∫Ü‰∏ÄÁßçÂü∫‰∫éÁ§æÂå∫ ElasticQuota ÂÆûÁé∞ÁöÑÊîØÊåÅÂ§öÁ∫ßÁÆ°ÁêÜÊñπÂºèÁöÑÂºπÊÄßQuotaÁÆ°ÁêÜÊú∫Âà∂(multi hierarchy quota management)„ÄÇÂÖ∑Â§áÂ¶Ç‰∏ãÁâπÊÄßÔºö</p><ul><li>ÂÖºÂÆπÁ§æÂå∫ÁöÑ ElasticQuota API„ÄÇÁî®Êà∑ÂèØ‰ª•Êó†ÁºùÂçáÁ∫ßÂà∞ Koordinator</li><li>ÊîØÊåÅÊ†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜ Quota„ÄÇ</li><li>ÊîØÊåÅÊåâÁÖßÂÖ±‰∫´ÊùÉÈáç(shared weight)‰øùÈöúÂÖ¨Âπ≥ÊÄß„ÄÇ</li><li>ÂÖÅËÆ∏Áî®Êà∑ËÆæÁΩÆÊòØÂê¶ÂÖÅËÆ∏ÂÄüÁî®Quota ÁªôÂÖ∂‰ªñÊ∂àË¥πÂØπË±°„ÄÇ</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pod-ÂÖ≥ËÅî-elasticquota-ÊñπÂºè">Pod ÂÖ≥ËÅî ElasticQuota ÊñπÂºè<a href="#pod-ÂÖ≥ËÅî-elasticquota-ÊñπÂºè" class="hash-link" aria-label="Direct link to Pod ÂÖ≥ËÅî ElasticQuota ÊñπÂºè" title="Direct link to Pod ÂÖ≥ËÅî ElasticQuota ÊñπÂºè">‚Äã</a></h4><p>Áî®Êà∑ÂèØ‰ª•ÈùûÂ∏∏‰ΩøÁî®ÁöÑ‰ΩøÁî®ËØ•ËÉΩÂäõÔºåÂèØ‰ª•ÂÆåÂÖ®ÊåâÁÖß ElasticQuota ÁöÑÁî®Ê≥ïÔºåÂç≥ÊØè‰∏™ Namespace ËÆæÁΩÆ‰∏Ä‰∏™ ElasticQuota ÂØπË±°„ÄÇ‰πüÂèØ‰ª•Âú® Pod ‰∏≠ËøΩÂä† Label ÂÖ≥ËÅî ElasticQuotaÔºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;elastic-quota-a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜÊú∫Âà∂Âíå‰ΩøÁî®ÊñπÊ≥ï">Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜÊú∫Âà∂Âíå‰ΩøÁî®ÊñπÊ≥ï<a href="#Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜÊú∫Âà∂Âíå‰ΩøÁî®ÊñπÊ≥ï" class="hash-link" aria-label="Direct link to Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜÊú∫Âà∂Âíå‰ΩøÁî®ÊñπÊ≥ï" title="Direct link to Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜÊú∫Âà∂Âíå‰ΩøÁî®ÊñπÊ≥ï">‚Äã</a></h4><p>ÈúÄË¶Å‰ΩøÁî®Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜ Quota Êó∂ÔºåÈúÄË¶ÅÂú® ElasticQuota ‰∏≠ËøΩÂä† Label  <code>quota.scheduling.koordinator.sh/is-parent</code>Ë°®Á§∫ÂΩìÂâç ElasticQuota ÊòØÂê¶ÊòØÁà∂ËäÇÁÇπÔºå<code>quota.scheduling.koordinator.sh/parent</code>Ë°®Á§∫ÂΩìÂâç ElasticQuota ÁöÑÁà∂ËäÇÁÇπ ElasticQuota ÁöÑÂêçÂ≠ó„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºö<br><img loading="lazy" alt="image.png" src="/assets/images/quota-tree-f8a3e073d27f66f203a45236769b9f58.png" width="2256" height="1156" class="img_ev3q"><br>Êàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™ ElasticQuota Root ‰Ωú‰∏∫Ê†πËäÇÁÇπÔºåËµÑÊ∫êÊÄªÈáè‰∏∫CPU 100CÔºåÂÜÖÂ≠ò200GiÔºå‰ª•ÂèäÂ≠êËäÇÁÇπ quota-a</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.sigs.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ElasticQuota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> parentA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/is-parent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/allow-lent-resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">min</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.sigs.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ElasticQuota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> childA1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/is-parent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/parent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parentA&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quota.scheduling.koordinator.sh/allow-lent-resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">max</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">min</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Âú®‰ΩøÁî®Ê†ëÂΩ¢ÁªìÊûÑÁÆ°ÁêÜ ElasticQuota Êó∂ÔºåÊúâ‰∏Ä‰∫õÈúÄË¶ÅÈÅµÂæ™ÁöÑÁ∫¶ÊùüÔºö</p><ol><li>Èô§‰∫ÜÊ†πËäÇÁÇπÔºåÂÖ∂‰ªñÊâÄÊúâÂ≠êËäÇÁÇπÁöÑ min ‰πãÂíåË¶ÅÂ∞è‰∫éÁà∂ËäÇÁÇπÁöÑ min„ÄÇ</li><li>‰∏çÈôêÂà∂Â≠êËäÇÁÇπ maxÔºåÂÖÅËÆ∏Â≠êËäÇÁÇπÁöÑ max Â§ß‰∫éÁà∂ËäÇÁÇπÁöÑ max„ÄÇËÄÉËôë‰ª•‰∏ãÂú∫ÊôØÔºåÈõÜÁæ§‰∏≠Êúâ 2 ‰∏™ ElasticQuota Â≠êÊ†ëÔºödev-parent Âíå production-parentÔºåÊØè‰∏™Â≠êÊ†ëÈÉΩÊúâÂá†‰∏™Â≠ê ElasticQuota„ÄÇ ÂΩì production-parent ÂøôÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂè™Èôç‰Ωé dev-parent ÁöÑ max ÈôêÂà∂  dev-parent Êï¥È¢óÂ≠êÊ†ëÁöÑËµÑÊ∫ê‰ΩøÁî®ÈáèÔºåËÄå‰∏çÊòØÈôç‰Ωé dev-parent Â≠êÊ†ëÁöÑÊØè‰∏™Â≠ê ElasticQuota ÁöÑmaxÈôêÂà∂Áî®Èáè„ÄÇ</li><li>Pod ‰∏çËÉΩ‰ΩøÁî®Áà∂ËäÇÁÇπElasticQuota„ÄÇÂ¶ÇÊûúÊîæÂºÄËøô‰∏™ÈôêÂà∂Ôºå‰ºöÂØºËá¥Êï¥‰∏™ÂºπÊÄß Quota ÁöÑÊú∫Âà∂ÂèòÁöÑÂºÇÂ∏∏Â§çÊùÇÔºåÊöÇÊó∂‰∏çËÄÉËôëÊîØÊåÅËøôÁßçÂú∫ÊôØ„ÄÇ</li><li>Âè™ÊúâÁà∂ËäÇÁÇπÂèØ‰ª•ÊåÇÂ≠êËäÇÁÇπÔºå‰∏çÂÖÅËÆ∏Â≠êËäÇÁÇπÊåÇÂ≠êËäÇÁÇπ</li><li>ÊöÇÊó∂‰∏çÂÖÅËÆ∏ÊîπÂèò ElasticQuota ÁöÑ <code>quota.scheduling.koordinator.sh/is-parent</code>Â±ûÊÄß</li></ol><p>Êàë‰ª¨Â∞ÜÂú®‰∏ã‰∏™ÁâàÊú¨‰∏≠ÈÄöËøá webhook Êú∫Âà∂ÂÆûÁé∞Ëøô‰∫õÁ∫¶Êùü„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂">ÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂<a href="#ÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂" class="hash-link" aria-label="Direct link to ÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂" title="Direct link to ÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂">‚Äã</a></h4><p>‰∏∫‰∫ÜÊñπ‰æøÈòÖËØªÂíåÁêÜËß£Â∞ÜË¶Å‰ªãÁªçÁöÑÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂ÔºåÂÖàÊòéÁ°ÆÂá†‰∏™Êñ∞Ê¶ÇÂøµÔºö</p><ul><li>request Ë°®Á§∫Âêå‰∏Ä‰∏™ ElasticQuota ÂÖ≥ËÅîÁöÑÊâÄÊúâ Pod ÁöÑËµÑÊ∫êËØ∑Ê±ÇÈáè„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ ElasticQuota A ÁöÑ request Â∞è‰∫é minÔºåElasticQuota B ÁöÑ request Â§ß‰∫é minÔºåÈÇ£‰πà ElasticQuota A Êú™‰ΩøÁî®ÁöÑÈÉ®ÂàÜÔºåÂç≥ min - request Ââ©‰ΩôÁöÑÈáèÈÄöËøáÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂ÂÄüÁî®Áªô ElasticQuota B. ÂΩì ElasticQuota A ÈúÄË¶Å‰ΩøÁî®Ëøô‰∫õÂÄüËµ∞ÁöÑÈáèÊó∂ÔºåË¶ÅÊ±Ç ElasticQuota B ‰æùÊçÆÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂ÂΩíËøòÁªô ElasticQuota A„ÄÇ</li><li>runtime Ë°®Á§∫ ElasticQuota ÂΩìÂâçÂèØ‰ª•‰ΩøÁî®ÁöÑÂÆûÈôÖËµÑÊ∫êÈáè„ÄÇÂ¶ÇÊûú request Â∞è‰∫é minÔºåruntime Á≠â‰∫é request„ÄÇËøô‰πüÊÑèÂë≥ÁùÄÔºåÈúÄË¶ÅÈÅµÂæ™ min ËØ≠‰πâÔºåÂ∫îÊó†Êù°‰ª∂Êª°Ë∂≥ request„ÄÇÂ¶ÇÊûú request Â§ß‰∫é minÔºå‰∏î min Â∞è‰∫é maxÔºåÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂‰ºöÂàÜÈÖç runtime Âú®min ‰∏é max ‰πãÂâçÔºåÂç≥ max &gt;= runtime &gt;= min„ÄÇ</li><li>shared-weight Ë°®Á§∫‰∏Ä‰∏™ ElasticQuota ÁöÑÁ´û‰∫âÂäõÔºåÈªòËÆ§Á≠â‰∫é ElasticQuota Max„ÄÇ</li></ul><p>ÈÄöËøáÂá†‰∏™‰æãÂ≠ê‰∏∫Â§ßÂÆ∂‰ªãÁªçÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂ÁöÑËøêË°åËøáÁ®ãÔºåÂÅáËÆæÂΩìÂâçÈõÜÁæ§ÁöÑ CPU ÊÄªÈáè‰∏∫100CÔºåÂπ∂‰∏îÊúâ4‰∏™ElasticQuotaÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÁªøËâ≤ÈÉ®ÂàÜ‰∏∫ Request ÈáèÔºöA ÂΩìÂâçÁöÑrequest ‰∏∫5ÔºåBÂΩìÂâçÁöÑrequest‰∏∫20ÔºåCÂΩìÂâçÁöÑRequest‰∏∫30ÔºåDÂΩìÂâçÁöÑRequest‰∏∫70„ÄÇ<br><img loading="lazy" alt="image.png" src="/assets/images/quota-init-example-f430132dc764dc42583bca4042c06af4.png" width="1338" height="732" class="img_ev3q"><br>Âπ∂‰∏îÊàë‰ª¨Ê≥®ÊÑèÂà∞Ôºå A, B, C, D ÁöÑ min ‰πãÂíåÊòØ60ÔºåÂâ©‰∏ã 40 ‰∏™Á©∫Èó≤È¢ùÂ∫¶Ôºå ÂêåÊó∂ A ËøòÂèØ‰ª•ÂÄüÁªô B, C, D 5‰∏™È¢ùÂ∫¶ÔºåÊâÄ‰ª•‰∏ÄÂÖ±Êúâ45‰∏™È¢ùÂ∫¶Ë¢´BÔºåCÔºåDÂÖ±‰∫´ÔºåÊ†πÊçÆÂêÑ‰∏™ElasticQuotaÁöÑ shared-weightÔºåBÔºåCÔºåDÂàÜÂà´ÂØπÂ∫î60Ôºå50Âíå80ÔºåËÆ°ÁÆóÂá∫ÂêÑËá™ÂèØ‰ª•ÂÖ±‰∫´ÁöÑÈáèÔºö</p><ul><li>B ÂèØ‰ª•Ëé∑Âèñ 14‰∏™È¢ùÂ∫¶Ôºå 45 * 60 / (60 + 50 + 80) = 14</li><li>C ÂèØ‰ª•Ëé∑Âèñ 12‰∏™È¢ùÂ∫¶Ôºå 45 * 50 / (60 + 50 + 80) = 12</li><li>D ÂèØ‰ª•Ëé∑Âèñ 19‰∏™È¢ùÂ∫¶Ôºå 45 * 80 / (60 + 50 + 80) = 19</li></ul><p><img loading="lazy" alt="image.png" src="/assets/images/quota-init-runtime-example-e5701da3ac0576ceb3dba51e52021c06.png" width="1444" height="736" class="img_ev3q"><br>‰ΩÜÊàë‰ª¨‰πüË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåCÂíåDÈúÄË¶ÅÊõ¥Â§öÈ¢ùÂ∫¶ÔºåËÄå BÂè™ÈúÄË¶Å5‰∏™È¢ùÂ∫¶Â∞±ËÉΩÊª°Ë∂≥ RequestÔºåÂπ∂‰∏î B ÁöÑminÊòØ15Ôºå‰πüÂ∞±ÊÑèÂë≥ÁùÄÊàë‰ª¨Âè™ÈúÄË¶ÅÁªô B 5‰∏™È¢ùÂ∫¶ÔºåÂâ©‰ΩôÁöÑ9‰∏™È¢ùÂ∫¶ÁªßÁª≠ÂàÜÁªôCÂíåD„ÄÇ</p><ul><li>C ÂèØ‰ª•Ëé∑Âèñ 3‰∏™È¢ùÂ∫¶Ôºå 9 * 50 / (50 + 80) = 3</li><li>D ÂèØ‰ª•Ëé∑Âèñ 6‰∏™È¢ùÂ∫¶Ôºå  9 * 80 / (50 + 80) = 6</li></ul><p><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/images/runtimequota3.jpg" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://github.com/koordinator-sh/koordinator/raw/main/docs/images/runtimequota3.jpg#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=url&amp;id=XJyFI&amp;margin=%5Bobject%20Object%5D&amp;originHeight=782&amp;originWidth=1570&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" class="img_ev3q"></a><br>ÊúÄÁªàÊàë‰ª¨ÂæóÂá∫Â¶Ç‰∏ãÁöÑÂàÜÈÖçÁªìÊûúÁªìÊûúÔºö</p><ul><li>A runtime = 5</li><li>B runtime = 20</li><li>C runtime = 35</li><li>D runtime = 40</li></ul><p><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/images/runtimequota4.jpg" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://github.com/koordinator-sh/koordinator/raw/main/docs/images/runtimequota4.jpg#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=url&amp;id=J8tN9&amp;margin=%5Bobject%20Object%5D&amp;originHeight=778&amp;originWidth=1560&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" class="img_ev3q"></a><br>ÊÄªÁªìÊï¥‰∏™ËøáÁ®ãÂèØ‰ª•Áü•ÈÅìÔºö</p><ol><li>ÂΩìÂâç request &lt; min Êó∂ÔºåÈúÄË¶ÅÂÄüÂá∫ lent-to-quotasÔºõÂΩì request &gt; min Êó∂ÔºåÈúÄË¶ÅÂÄüÂÖ• borrowed-qutoas</li><li>ÁªüËÆ°ÊâÄÊúâ runtime &lt; min ÁöÑ QuotaÔºåËøô‰∫õÊÄªÈáèÂ∞±ÊòØÊé•‰∏ãÊù•ÂèØË¢´ÂÄüÂá∫ÁöÑÈáè„ÄÇ</li><li>Ê†πÊçÆ shared-weight ËÆ°ÁÆóÊØè‰∏™ElasticQuotaÂèØ‰ª•ÂÄüÂÖ•ÁöÑÈáè</li><li>Â¶ÇÊûúÊúÄÊñ∞ÁöÑ runtime &gt; reuqestÔºåÈÇ£‰πà runtime - request Ââ©‰ΩôÁöÑÈáèÂèØ‰ª•ÂÄüÁªôÊõ¥ÈúÄË¶ÅÁöÑÂØπË±°„ÄÇ</li></ol><p>Âè¶Â§ñËøòÊúâ‰∏ÄÁßçÊó•Â∏∏Áîü‰∫ßÊó∂‰ºöÈÅáÂà∞ÁöÑÊÉÖÂÜµÔºöÂç≥ÈõÜÁæ§ÂÜÖËµÑÊ∫êÊÄªÈáè‰ºöÈöèÁùÄËäÇÁÇπÊïÖÈöú„ÄÅËµÑÊ∫êËøêËê•Á≠âÂéüÂõ†Èôç‰ΩéÔºåÂØºËá¥ÊâÄÊúâElasticQuotaÁöÑ min ‰πãÂíåÂ§ß‰∫éËµÑÊ∫êÊÄªÈáè„ÄÇÂΩìÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÊó∂ÔºåÊàë‰ª¨Êó†Ê≥ïÁ°Æ‰øù min ÁöÑËµÑÊ∫êËø∞Ê±Ç„ÄÇÊ≠§Êó∂Êàë‰ª¨‰ºöÊåâÁÖß‰∏ÄÂÆöÁöÑÊØî‰æãË∞ÉÊï¥ÂêÑ‰∏™ElasticQuotaÁöÑminÔºåÁ°Æ‰øùÊâÄÊúâmin‰πãÂíåÂ∞è‰∫éÊàñËÄÖÁ≠â‰∫éÂΩìÂâçÂÆûÈôÖÁöÑËµÑÊ∫êÊÄªÈáè„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Êä¢Âç†Êú∫Âà∂">Êä¢Âç†Êú∫Âà∂<a href="#Êä¢Âç†Êú∫Âà∂" class="hash-link" aria-label="Direct link to Êä¢Âç†Êú∫Âà∂" title="Direct link to Êä¢Âç†Êú∫Âà∂">‚Äã</a></h4><p>Koordinator ElasticQuota Êú∫Âà∂Âú®Ë∞ÉÂ∫¶Èò∂ÊÆµÂ¶ÇÊûúÂèëÁé∞ Quota ‰∏çË∂≥Ôºå‰ºöËøõÂÖ•Êä¢Âç†Èò∂ÊÆµÔºåÊåâÁÖß‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºåÊä¢Âç†Â±û‰∫éÂêå‰∏Ä‰∏™ElasticQuota ÂÜÖÁöÑ ‰Ωé‰ºòÂÖàÁ∫ß Pod„ÄÇ ÂêåÊó∂ÔºåÊàë‰ª¨‰∏çÊîØÊåÅË∑® ElasticQuota Êä¢Âç†ÂÖ∂‰ªñ Pod„ÄÇ‰ΩÜÊòØÊàë‰ª¨‰πüÊèê‰æõ‰∫ÜÂè¶Â§ñÁöÑÊú∫Âà∂ÊîØÊåÅ‰ªéÂÄüÁî® Quota ÁöÑ ElasticQuota Êä¢Âõû„ÄÇ<br>‰∏æ‰∏™‰æãÂ≠êÔºåÂú®ÈõÜÁæ§‰∏≠ÔºåÊúâ‰∏§‰∏™ ElasticQuotaÔºåElasticQuota A {min = 50, max = 100}Ôºå ElasticQuota B {min = 50,  max = 100}„ÄÇÁî®Êà∑Âú®‰∏äÂçà10ÁÇπ‰ΩøÁî® ElasticQuota A Êèê‰∫§‰∫Ü‰∏Ä‰∏™ JobÔºå Request = 100 ÔºåÊ≠§Êó∂Âõ†‰∏∫ ElasticQuota B Êó†‰∫∫‰ΩøÁî®ÔºåElasticQuota A ËÉΩ‰ªé B ÊâãÈáåÂÄüÁî®50‰∏™QuotaÔºåÊª°Ë∂≥‰∫Ü Request = 100Ôºå Âπ∂‰∏îÊ≠§Êó∂ Used = 100„ÄÇÂú®11ÁÇπÈíüÊó∂ÔºåÂè¶‰∏Ä‰∏™Áî®Êà∑ÂºÄÂßã‰ΩøÁî® ElasticQuota B Êèê‰∫§JobÔºåRequest = 100ÔºåÂõ†‰∏∫ ElasticQuota B ÁöÑ min = 50ÔºåÊòØÂøÖÈ°ª‰øùÈöúÁöÑÔºåÈÄöËøáÂÖ¨Âπ≥ÊÄß‰øùÈöúÊú∫Âà∂ÔºåÊ≠§Êó∂ A Âíå B ÁöÑ runtime Âùá‰∏∫50„ÄÇÈÇ£‰πàÊ≠§Êó∂ÂØπ‰∫é ElasticQuota A ÔºåUsed = 100 ÊòØÂ§ß‰∫éÂΩìÂâç runtime = 50 ÁöÑÔºåÂõ†Ê≠§Êàë‰ª¨‰ºöÊèê‰æõ‰∏Ä‰∏™ ControllerÔºåÈ©±ÈÄêÊéâ‰∏ÄÈÉ®ÂàÜ Pod Ôºå‰ΩøÂæóÂΩìÂâç ElasticQuota A ÁöÑ Used Èôç‰ΩéÂà∞ runtime Áõ∏Á≠âÁöÑÊ∞¥‰Ωç„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-Á≤æÁªÜÂåñËµÑÊ∫êË∞ÉÂ∫¶">2. Á≤æÁªÜÂåñËµÑÊ∫êË∞ÉÂ∫¶<a href="#2-Á≤æÁªÜÂåñËµÑÊ∫êË∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to 2. Á≤æÁªÜÂåñËµÑÊ∫êË∞ÉÂ∫¶" title="Direct link to 2. Á≤æÁªÜÂåñËµÑÊ∫êË∞ÉÂ∫¶">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="device-share-scheduling">Device Share Scheduling<a href="#device-share-scheduling" class="hash-link" aria-label="Direct link to Device Share Scheduling" title="Direct link to Device Share Scheduling">‚Äã</a></h3><p>Êú∫Âô®Â≠¶‰π†È¢ÜÂüüÈáå‰æùÈù†Â§ßÈáèÂº∫Â§ßÁÆóÂäõÊÄßËÉΩÁöÑ GPU ËÆæÂ§áÂÆåÊàêÊ®°ÂûãËÆ≠ÁªÉÔºå‰ΩÜÊòØ GPU Ëá™Ë∫´‰ª∑Ê†ºÂçÅÂàÜÊòÇË¥µ„ÄÇÂ¶Ç‰ΩïÊõ¥Â•ΩÂú∞Âà©Áî®GPUËÆæÂ§áÔºåÂèëÊå•GPUÁöÑ‰ª∑ÂÄºÔºåÈôç‰ΩéÊàêÊú¨ÔºåÊòØ‰∏Ä‰∏™‰∫üÂæÖËß£ÂÜ≥ÁöÑÈóÆÈ¢ò„ÄÇ  Kubernetes Á§æÂå∫Áé∞ÊúâÁöÑ GPU ÂàÜÈÖçÊú∫Âà∂‰∏≠ÔºåGPU ÊòØÁî± kubelet ÂàÜÈÖçÁöÑÔºåÂπ∂Âè™ÊîØÊåÅÂàÜÈÖç‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÆåÊï¥ÁöÑ GPU ÂÆû‰æã„ÄÇ ËøôÁßçÊñπÊ≥ïÁÆÄÂçïÂèØÈù†Ôºå‰ΩÜÁ±ª‰ºº‰∫é CPU Âíå MemoryÔºåGPU Âπ∂‰∏çÊòØ‰∏ÄÁõ¥Â§Ñ‰∫éÈ´òÂà©Áî®ÁéáÊ∞¥‰ΩçÔºåÂêåÊ†∑Â≠òÂú®ËµÑÊ∫êÊµ™Ë¥πÁöÑÈóÆÈ¢ò„ÄÇ Âõ†Ê≠§ÔºåKoordinator Â∏åÊúõÊîØÊåÅÂ§öÂ∑•‰ΩúË¥üËΩΩÂÖ±‰∫´‰ΩøÁî® GPU ËÆæÂ§á‰ª•ËäÇÁúÅÊàêÊú¨„ÄÇ Ê≠§Â§ñÔºåGPU ÊúâÂÖ∂ÁâπÊÆäÊÄß„ÄÇ ÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ NVIDIA GPU ÊîØÊåÅÁöÑ NVLink ÂíåË∂ÖÂçñÂú∫ÊôØÔºåÈÉΩÈúÄË¶ÅÈÄöËøáË∞ÉÂ∫¶Âô®ËøõË°å‰∏≠Â§ÆÂÜ≥Á≠ñÔºå‰ª•Ëé∑ÂæóÂÖ®Â±ÄÊúÄ‰ºòÁöÑÂàÜÈÖçÁªìÊûú„ÄÇ<br><img loading="lazy" alt="image.png" src="/assets/images/nvlink-87c3973857a32b2efaa5dd2f714766b2.png" width="2222" height="828" class="img_ev3q"></p><p>‰ªéÂõæ‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂèëÁé∞ÔºåËôΩÁÑ∂ËØ•ËäÇÁÇπÊúâ8‰∏™ GPU ÂÆû‰æãÔºåÂûãÂè∑‰∏∫A100/V100Ôºå‰ΩÜ GPU ÂÆû‰æã‰πãÈó¥ÁöÑÊï∞ÊçÆ‰º†ËæìÈÄüÂ∫¶ÊòØ‰∏çÂêåÁöÑ„ÄÇ ÂΩì‰∏Ä‰∏™ Pod ÈúÄË¶ÅÂ§ö‰∏™ GPU ÂÆû‰æãÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ Pod ÂàÜÈÖçÂÖ∑ÊúâÊúÄÂ§ßÊï∞ÊçÆ‰º†ËæìÈÄüÂ∫¶ÁªÑÂêàÂÖ≥Á≥ªÁöÑ GPU ÂÆû‰æã„ÄÇ Ê≠§Â§ñÔºåÂΩìÊàë‰ª¨Â∏åÊúõ‰∏ÄÁªÑ Pod ‰∏≠ÁöÑ GPU ÂÆû‰æãÂÖ∑ÊúâÊúÄÂ§ßÊï∞ÊçÆ‰º†ËæìÈÄüÂ∫¶ÁªÑÂêàÂÖ≥Á≥ªÊó∂ÔºåË∞ÉÂ∫¶Âô®Â∫îËØ•Â∞ÜÊúÄ‰Ω≥ GPU ÂÆû‰æãÊâπÈáèÂàÜÈÖçÁªôËøô‰∫õ PodÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÂàÜÈÖçÂà∞Âêå‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gpu-ËµÑÊ∫êÂçèËÆÆ">GPU ËµÑÊ∫êÂçèËÆÆ<a href="#gpu-ËµÑÊ∫êÂçèËÆÆ" class="hash-link" aria-label="Direct link to GPU ËµÑÊ∫êÂçèËÆÆ" title="Direct link to GPU ËµÑÊ∫êÂçèËÆÆ">‚Äã</a></h4><p>Koordinator ÂÖºÂÆπÁ§æÂå∫Â∑≤ÊúâÁöÑ <code>nvidia.com/gpu</code>ËµÑÊ∫êÂçèËÆÆÔºåÂπ∂‰∏îËøòËá™ÂÆö‰πâ‰∫ÜÊâ©Â±ïËµÑÊ∫êÂçèËÆÆÔºåÊîØÊåÅÁî®Êà∑Êõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÂàÜÈÖç GPU ËµÑÊ∫ê„ÄÇ</p><ul><li>kubernetes.io/gpu-core ‰ª£Ë°®GPUÁöÑËÆ°ÁÆóËÉΩÂäõ„ÄÇ ‰∏é Kuberetes MilliCPU Á±ª‰ººÔºåÊàë‰ª¨Â∞Ü GPU ÁöÑÊÄªÁÆóÂäõÊäΩË±°‰∏∫100ÔºåÁî®Êà∑ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÁî≥ËØ∑Áõ∏Â∫îÊï∞ÈáèÁöÑ GPU ÁÆóÂäõ„ÄÇ</li><li>kubernetes.io/gpu-memory Ë°®Á§∫ GPU ÁöÑÂÜÖÂ≠òÂÆπÈáèÔºå‰ª•Â≠óËäÇ‰∏∫Âçï‰Ωç„ÄÇ</li><li>kubernetes.io/gpu-memory-ratio ‰ª£Ë°® GPU ÂÜÖÂ≠òÁöÑÁôæÂàÜÊØî„ÄÇ</li></ul><p>ÂÅáËÆæ‰∏Ä‰∏™ËäÇÁÇπÊúâ4‰∏™GPUËÆæÂ§áÂÆû‰æãÔºåÊØè‰∏™GPUËÆæÂ§áÂÆû‰æãÊúâ 8Gi ÊòæÂ≠ò„ÄÇÁî®Êà∑Â¶ÇÊûúÊúüÊúõÁî≥ËØ∑‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ GPU ÂÆû‰æãÔºåÈô§‰∫Ü‰ΩøÁî® <code>nvidia.com/gpu</code>‰πãÂ§ñÔºåËøòÂèØ‰ª•ÊåâÁÖßÂ¶Ç‰∏ãÊñπÂºèÁî≥ËØ∑Ôºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8Gi&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Â¶ÇÊûúÊúüÊúõÂè™‰ΩøÁî®‰∏Ä‰∏™ GPU ÂÆû‰æã‰∏ÄÂçäÁöÑËµÑÊ∫êÔºåÂèØ‰ª•ÊåâÁÖßÂ¶Ç‰∏ãÊñπÂºèÁî≥ËØ∑Ôºö</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4Gi&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ËÆæÂ§á‰ø°ÊÅØÂíåËÆæÂ§áÂÆπÈáè‰∏äÊä•">ËÆæÂ§á‰ø°ÊÅØÂíåËÆæÂ§áÂÆπÈáè‰∏äÊä•<a href="#ËÆæÂ§á‰ø°ÊÅØÂíåËÆæÂ§áÂÆπÈáè‰∏äÊä•" class="hash-link" aria-label="Direct link to ËÆæÂ§á‰ø°ÊÅØÂíåËÆæÂ§áÂÆπÈáè‰∏äÊä•" title="Direct link to ËÆæÂ§á‰ø°ÊÅØÂíåËÆæÂ§áÂÆπÈáè‰∏äÊä•">‚Äã</a></h4><p>Âú® Koordinator v0.7.0 ÁâàÊú¨‰∏≠ÔºåÂçïÊú∫‰æß koordlet ÂÆâË£ÖÂêé‰ºöËá™Âä®ËØÜÂà´ËäÇÁÇπ‰∏äÊòØÂê¶Âê´Êúâ GPU ËÆæÂ§áÔºåÂ¶ÇÊûúÂ≠òÂú®ÁöÑËØùÔºå‰ºö‰∏äÊä•Ëøô‰∫õ GPU ËÆæÂ§áÁöÑ Minor ID„ÄÅ UUID„ÄÅÁÆóÂäõÂíåÊòæÂ≠òÂ§ßÂ∞èÂà∞‰∏Ä‰∏™Á±ªÂûã‰∏∫ Device CRD ‰∏≠„ÄÇÊØè‰∏™ËäÇÁÇπÂØπÂ∫î‰∏Ä‰∏™ Device CRD ÂÆû‰æã„ÄÇDevice CRD ‰∏ç‰ªÖÊîØÊåÅÊèèËø∞ GPUÔºåËøòÊîØÊåÅÁ±ª‰ºº‰∫é FPGA/RDMAÁ≠âËÆæÂ§áÁ±ªÂûãÔºåÁõÆÂâç v0.7.0 ÁâàÊú¨Âè™ÊîØÊåÅ GPUÔºå ÊöÇÊú™ÊîØÊåÅËøô‰∫õËÆæÂ§áÁ±ªÂûã„ÄÇ <br>Device CRD ‰ºöË¢´ koord-manager ÂÜÖÁöÑ NodeResource controller Âíå koord-scheduler Ê∂àË¥π„ÄÇNodeResource controller ‰ºöÊ†πÊçÆ Device CRD ‰∏≠ÊèèËø∞ÁöÑ‰ø°ÊÅØÔºåÊç¢ÁÆóÊàê Koordinator ÊîØÊåÅÁöÑËµÑÊ∫êÂçèËÆÆ <code>kubernetes.io/gpu-core</code>,<code>kubernetes.io/gpu-memory</code> Êõ¥Êñ∞Âà∞  Node.Status.Allocatable Âíå Node.Status.Capacity Â≠óÊÆµÔºåÂ∏ÆÂä©Ë∞ÉÂ∫¶Âô®Âíå kubelet ÂÆåÊàêËµÑÊ∫êË∞ÉÂ∫¶„ÄÇgpu-core Ë°®Á§∫GPU ËÆæÂ§áÂÆû‰æãÁöÑÁÆóÂäõÔºå‰∏Ä‰∏™ÂÆû‰æãÁöÑÂÆåÊï¥ÁÆóÂäõ‰∏∫100„ÄÇÂÅáËÆæ‰∏Ä‰∏™ËäÇÁÇπÊúâ 8 ‰∏™ GPU ËÆæÂ§áÂÆû‰æãÔºåÈÇ£‰πàËäÇÁÇπÁöÑ gpu-core ÂÆπÈáè‰∏∫ 8 <em> 100 = 800Ôºõ gpu-memory Ë°®Á§∫ GPU ËÆæÂ§áÂÆû‰æãÁöÑÊòæÂ≠òÂ§ßÂ∞èÔºåÂçï‰Ωç‰∏∫Â≠óËäÇÔºåÂêåÊ†∑ÁöÑËäÇÁÇπÂèØ‰ª•ÂàÜÈÖçÁöÑÊòæÂ≠òÊÄªÈáè‰∏∫ ËÆæÂ§áÊï∞Èáè </em> ÊØè‰∏™ÂÆû‰æãÁöÑÂçï‰ΩçÂÆπÈáèÔºå‰æãÂ¶Ç‰∏Ä‰∏™ GPU ËÆæÂ§áÁöÑÊòæÂ≠òÊòØ 8GÔºåËäÇÁÇπ‰∏äÊúâ8 ‰∏™ GPU ÂÆû‰æãÔºåÊÄªÈáè‰∏∫ 8 * 8G = 64G„ÄÇ</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">capacity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;64Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allocatable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;64Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/gpu-memory-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="‰∏≠ÂøÉË∞ÉÂ∫¶ÂàÜÈÖçËÆæÂ§áËµÑÊ∫ê">‰∏≠ÂøÉË∞ÉÂ∫¶ÂàÜÈÖçËÆæÂ§áËµÑÊ∫ê<a href="#‰∏≠ÂøÉË∞ÉÂ∫¶ÂàÜÈÖçËÆæÂ§áËµÑÊ∫ê" class="hash-link" aria-label="Direct link to ‰∏≠ÂøÉË∞ÉÂ∫¶ÂàÜÈÖçËÆæÂ§áËµÑÊ∫ê" title="Direct link to ‰∏≠ÂøÉË∞ÉÂ∫¶ÂàÜÈÖçËÆæÂ§áËµÑÊ∫ê">‚Äã</a></h4><p>Kuberetes Á§æÂå∫ÂéüÁîüÊèê‰æõÁöÑËÆæÂ§áË∞ÉÂ∫¶Êú∫Âà∂‰∏≠ÔºåË∞ÉÂ∫¶Âô®Âè™Ë¥üË¥£Ê†°È™åËÆæÂ§áÂÆπÈáèÊòØÂê¶Êª°Ë∂≥ PodÔºåÂØπ‰∫é‰∏Ä‰∫õÁÆÄÂçïÁöÑËÆæÂ§áÁ±ªÂûãÊòØË∂≥Â§üÁöÑÔºå‰ΩÜÊòØÂΩìÈúÄË¶ÅÊõ¥ÁªÜÁ≤íÂ∫¶ÂàÜÈÖç GPU Êó∂ÔºåÈúÄË¶Å‰∏≠ÂøÉË∞ÉÂ∫¶Âô®Áªô‰∫àÊîØÊåÅÊâçËÉΩÂÆûÁé∞ÂÖ®Â±ÄÊúÄ‰ºò„ÄÇ<br>Koordinator Ë∞ÉÂ∫¶Âô® koord-scheduler Êñ∞Â¢û‰∫ÜË∞ÉÂ∫¶Êèí‰ª∂ DeviceShareÔºåË¥üË¥£Á≤æÁªÜÂ∫¶ËÆæÂ§áËµÑÊ∫êË∞ÉÂ∫¶„ÄÇDeviceShare Êèí‰ª∂Ê∂àË¥π Device CRDÔºåËÆ∞ÂΩïÊØè‰∏™ËäÇÁÇπÂèØ‰ª•ÂàÜÈÖçÁöÑËÆæÂ§á‰ø°ÊÅØ„ÄÇDeviceShare Âú®Ë∞ÉÂ∫¶Êó∂Ôºå‰ºöÊää Pod ÁöÑGPUËµÑÊ∫êËØ∑Ê±ÇËΩ¨Êç¢‰∏∫ Koordinator ÁöÑËµÑÊ∫êÂçèËÆÆÔºåÂπ∂ËøáÊª§ÊØè‰∏™ËäÇÁÇπÁöÑÊú™ÂàÜÈÖçÁöÑ GPU ËÆæÂ§áÂÆû‰æã„ÄÇÁ°Æ‰øùÊúâËµÑÊ∫êÂèØÁî®ÂêéÔºåÂú® Reserve Èò∂ÊÆµÊõ¥Êñ∞ÂÜÖÈÉ®Áä∂ÊÄÅÔºåÂπ∂Âú® PreBind Èò∂ÊÆµÊõ¥Êñ∞ Pod AnnotationÔºåËÆ∞ÂΩïÂΩìÂâç Pod Â∫îËØ•‰ΩøÁî®Âì™‰∫õ GPU ËÆæÂ§á„ÄÇ<br>DeviceShare Â∞ÜÂú®ÂêéÁª≠ÁâàÊú¨ÊîØÊåÅ Binpacking  Âíå Spread Á≠ñÁï•ÔºåÂÆûÁé∞Êõ¥Â•ΩÁöÑËÆæÂ§áËµÑÊ∫êË∞ÉÂ∫¶ËÉΩÂäõ„ÄÇ</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ÂçïÊú∫‰æßÁ≤æÂáÜÁªëÂÆöËÆæÂ§á‰ø°ÊÅØ">ÂçïÊú∫‰æßÁ≤æÂáÜÁªëÂÆöËÆæÂ§á‰ø°ÊÅØ<a href="#ÂçïÊú∫‰æßÁ≤æÂáÜÁªëÂÆöËÆæÂ§á‰ø°ÊÅØ" class="hash-link" aria-label="Direct link to ÂçïÊú∫‰æßÁ≤æÂáÜÁªëÂÆöËÆæÂ§á‰ø°ÊÅØ" title="Direct link to ÂçïÊú∫‰æßÁ≤æÂáÜÁªëÂÆöËÆæÂ§á‰ø°ÊÅØ">‚Äã</a></h4><p>Kubernetes Á§æÂå∫Âú® kubelet ‰∏≠Êèê‰æõ‰∫Ü DevicePlugin Êú∫Âà∂ÔºåÊîØÊåÅËÆæÂ§áÂéÇÂïÜÂú® kubelet ÂàÜÈÖçÂ•ΩËÆæÂ§áÂêéÊúâÊú∫‰ºöËé∑ÂæóËÆæÂ§á‰ø°ÊÅØÔºåÂπ∂Â°´ÂÖÖÂà∞ÁéØÂ¢ÉÂèòÈáèÊàñËÄÖÊõ¥Êñ∞ÊåÇËΩΩË∑ØÂæÑ„ÄÇ‰ΩÜÊòØ‰∏çËÉΩÊîØÊåÅ ‰∏≠ÂøÉÂåñÁöÑ GPU Á≤æÁªÜÂåñË∞ÉÂ∫¶Âú∫ÊôØ„ÄÇ<br>ÈíàÂØπËøô‰∏™ÈóÆÈ¢òÔºå Koordinator Êâ©Â±ï‰∫Ü koord-runtime-proxy ÔºåÊîØÊåÅÂú® kubelet ÂàõÂª∫ÂÆπÂô®Êó∂Êõ¥Êñ∞ÁéØÂ¢ÉÂèòÈáèÔºåÊ≥®ÂÖ•Ë∞ÉÂ∫¶Âô®ÂàÜÈÖçÁöÑ GPU ËÆæÂ§á‰ø°ÊÅØ„ÄÇ<br><img loading="lazy" src="/assets/images/koordlet-inject-env-80dc8617520f3b4f4ce0bff46548d467.jpeg" width="1394" height="700" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-Ë∞ÉÂ∫¶Âô®ËØäÊñ≠ÂàÜÊûê">3. Ë∞ÉÂ∫¶Âô®ËØäÊñ≠ÂàÜÊûê<a href="#3-Ë∞ÉÂ∫¶Âô®ËØäÊñ≠ÂàÜÊûê" class="hash-link" aria-label="Direct link to 3. Ë∞ÉÂ∫¶Âô®ËØäÊñ≠ÂàÜÊûê" title="Direct link to 3. Ë∞ÉÂ∫¶Âô®ËØäÊñ≠ÂàÜÊûê">‚Äã</a></h2><p>Â§ßÂÆ∂Âú®‰ΩøÁî® Kubernetes Êó∂ÁªèÂ∏∏‰ºöÈÅáÂà∞‰∏Ä‰∫õË∞ÉÂ∫¶Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢òÔºö</p><ol><li>ÊàëËøô‰∏™ Pod ‰∏∫‰ªÄ‰πà‰∏çËÉΩË∞ÉÂ∫¶Ôºü</li><li>Ëøô‰∏™ Pod ‰∏∫‰ªÄ‰πà‰ºöË∞ÉÂ∫¶Âà∞Ëøô‰∏™ËäÇÁÇπÔºå‰∏çÊòØÂ∫îËØ•Ë¢´Âè¶‰∏Ä‰∏™ÊâìÂàÜÊèí‰ª∂ÂΩ±ÂìçÂà∞‰πàÔºü </li><li>ÊàëÊñ∞ÂºÄÂèë‰∫Ü‰∏Ä‰∏™Êèí‰ª∂ÔºåÂèëÁé∞Ë∞ÉÂ∫¶ÁªìÊûú‰∏çÁ¨¶ÂêàÈ¢ÑÊúüÔºå‰ΩÜÊòØÊúâ‰∏çÁü•ÈÅìÂì™ÈáåÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇ</li></ol><p>Ë¶ÅËØäÊñ≠ÂàÜÊûêËøô‰∫õÈóÆÈ¢òÔºåÈô§‰∫ÜË¶ÅÊéåÊè° Kubernetes Âü∫Êú¨ÁöÑË∞ÉÂ∫¶Êú∫Âà∂ÂíåËµÑÊ∫êÂàÜÈÖçÊú∫Âà∂Â§ñÔºåËøòÈúÄË¶ÅË∞ÉÂ∫¶Âô®Ëá™Ë∫´Áªô‰∫àÊîØÊåÅ„ÄÇ‰ΩÜÊòØ Kubernetes kube-scheduler Êèê‰æõÁöÑËØäÊñ≠ËÉΩÂäõÊØîËæÉÊúâÈôêÔºåÊúâÊó∂ÂÄôÁîöËá≥Ê≤°Êúâ‰ªÄ‰πàÊó•ÂøóÂèØ‰ª•Êü•Áúã„ÄÇkube-scheduler ÂéüÁîüÊòØÊîØÊåÅÈÄöËøá HTTP Êõ¥ÊîπÊó•ÂøóÁ≠âÁ∫ßÔºåÂèØ‰ª•Ëé∑ÂæóÊõ¥Â§öÊó•Âøó‰ø°ÊÅØÔºå‰æãÂ¶ÇÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÂèØ‰ª•Êõ¥ÊîπÊó•ÂøóÁ≠âÁ∫ßÂà∞5Ôºö</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X PUT schedulerLeaderIP:10251/debug/flags/v --data </span><span class="token string" style="color:#e3116c">&#x27;5&#x27;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">successfully </span><span class="token builtin class-name">set</span><span class="token plain"> klog.logging.verbosity to </span><span class="token number" style="color:#36acaa">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Koordinator ÈíàÂØπËøô‰∫õÈóÆÈ¢òÔºåÂÆûÁé∞‰∫Ü‰∏ÄÂ•ó Restful API ÔºåÂ∏ÆÂä©Áî®Êà∑ÊèêÂçáÈóÆÈ¢òËØäÊñ≠ÂàÜÊûêÁöÑÊïàÁéá</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ÂàÜÊûê-score-ÁªìÊûú">ÂàÜÊûê Score ÁªìÊûú<a href="#ÂàÜÊûê-score-ÁªìÊûú" class="hash-link" aria-label="Direct link to ÂàÜÊûê Score ÁªìÊûú" title="Direct link to ÂàÜÊûê Score ÁªìÊûú">‚Äã</a></h3><p><code>PUT /debug/flags/s</code>  ÂÖÅËÆ∏Áî®Êà∑ÊâìÂºÄ Debug Score ÂºÄÂÖ≥ÔºåÂú®ÊâìÂàÜÁªìÊùüÂêéÔºå‰ª•Markdown Ê†ºÂºèÊâìÂç∞ TopN ËäÇÁÇπÂêÑ‰∏™Êèí‰ª∂ÁöÑÂàÜÂÄº„ÄÇ‰æãÂ¶ÇÔºö</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X PUT schedulerLeaderIP:10251/debug/flags/s --data </span><span class="token string" style="color:#e3116c">&#x27;100&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">successfully </span><span class="token builtin class-name">set</span><span class="token plain"> debugTopNScores to </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> ÂΩìÊúâÊñ∞ Pod Ë∞ÉÂ∫¶Êó∂ÔºåËßÇÂØü scheduler log ÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏ã‰ø°ÊÅØ</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># | Pod | Node | Score | ImageLocality | InterPodAffinity | LoadAwareScheduling | NodeAffinity | NodeNUMAResource | NodeResourcesBalancedAllocation | NodeResourcesFit | PodTopologySpread | Reservation | TaintToleration |</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> --- </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> --- </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> --- </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ---:</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> default/curlimage-545745d8f8-rngp7 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> cn-hangzhou.10.0.4.51 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">577</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">87</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">96</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">94</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> default/curlimage-545745d8f8-rngp7 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> cn-hangzhou.10.0.4.50 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">574</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">85</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">96</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">93</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> default/curlimage-545745d8f8-rngp7 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> cn-hangzhou.10.0.4.19 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">541</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">55</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">95</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">91</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> default/curlimage-545745d8f8-rngp7 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> cn-hangzhou.10.0.4.18 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">487</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">82</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Êâæ‰∏™ Markdown Â∑•ÂÖ∑ÔºåÂ∞±ÂèØ‰ª•ËΩ¨‰∏∫Â¶Ç‰∏ãË°®Ê†º</p><table><thead><tr><th>#</th><th>Pod</th><th>Node</th><th>Score</th><th>LoadAwareScheduling</th><th>NodeNUMAResource</th><th>NodeResourcesFit</th><th>PodTopologySpread</th></tr></thead><tbody><tr><td>0</td><td>default/curlimage-545745d8f8-rngp7</td><td>cn-hangzhou.10.0.4.51</td><td>577</td><td>87</td><td>0</td><td>94</td><td>200</td></tr><tr><td>1</td><td>default/curlimage-545745d8f8-rngp7</td><td>cn-hangzhou.10.0.4.50</td><td>574</td><td>85</td><td>0</td><td>93</td><td>200</td></tr><tr><td>2</td><td>default/curlimage-545745d8f8-rngp7</td><td>cn-hangzhou.10.0.4.19</td><td>541</td><td>55</td><td>0</td><td>91</td><td>200</td></tr><tr><td>3</td><td>default/curlimage-545745d8f8-rngp7</td><td>cn-hangzhou.10.0.4.18</td><td>487</td><td>15</td><td>0</td><td>82</td><td>200</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ë∞ÉÂ∫¶Êèí‰ª∂ÂØºÂá∫ÂÜÖÈÉ®Áä∂ÊÄÅ">Ë∞ÉÂ∫¶Êèí‰ª∂ÂØºÂá∫ÂÜÖÈÉ®Áä∂ÊÄÅ<a href="#Ë∞ÉÂ∫¶Êèí‰ª∂ÂØºÂá∫ÂÜÖÈÉ®Áä∂ÊÄÅ" class="hash-link" aria-label="Direct link to Ë∞ÉÂ∫¶Êèí‰ª∂ÂØºÂá∫ÂÜÖÈÉ®Áä∂ÊÄÅ" title="Direct link to Ë∞ÉÂ∫¶Êèí‰ª∂ÂØºÂá∫ÂÜÖÈÉ®Áä∂ÊÄÅ">‚Äã</a></h3><p>ÂÉè koord-scheduler ÂÜÖÈÉ®ÁöÑ NodeNUMAResource „ÄÅ DeviceShareÂíåElasticQuotaÁ≠âÊèí‰ª∂ÂÜÖÈÉ®ÈÉΩÊúâÁª¥Êä§‰∏Ä‰∫õÁä∂ÊÄÅÂ∏ÆÂä©Ë∞ÉÂ∫¶„ÄÇ koord-scheduler Ëá™ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÊèí‰ª∂Êâ©Â±ïÊé•Âè£ÔºàÂÆö‰πâËßÅ‰∏ãÊñáÔºâÔºåÂπ∂‰ºöÂú®ÂàùÂßãÂåñÊèí‰ª∂ÂêéÔºåËØÜÂà´ËØ•Êèí‰ª∂ÊòØÂê¶ÂÆûÁé∞‰∫ÜËØ•Êé•Âè£Âπ∂Ë∞ÉÁî®ËØ•Êé•Âè£ÔºåËÆ©Êèí‰ª∂Ê≥®ÂÖ•ÈúÄË¶ÅÊö¥Èú≤ÁöÑ RestfulAPI„ÄÇ‰ª• NodeNUMAResource Êèí‰ª∂‰∏∫‰æãÔºå‰ºöÊèê‰æõ <code>/cpuTopologyOptions/:nodeName</code>Âíå <code>/availableCPUs/:nodeName</code>‰∏§‰∏™EndpointsÔºåÂèØ‰ª•Êü•ÁúãÊèí‰ª∂ÂÜÖÈÉ®ËÆ∞ÂΩïÁöÑ CPU ÊãìÊâë‰ø°ÊÅØÂíåÂàÜÈÖçÁªìÊûú„ÄÇ</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> APIServiceProvider </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">RegisterEndpoints</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RouterGroup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Áî®Êà∑Âú®‰ΩøÁî®Êó∂ÔºåÊåâÁÖß <code>/apis/v1/plugins/&lt;pluginName&gt;/&lt;pluginEndpoints&gt;</code>Êñπ ÂºèÊûÑÂª∫ URL Êü•ÁúãÊï∞ÊçÆÔºå‰æãÂ¶ÇË¶ÅÊü•Áúã <code>/cpuTopologyOptions/:nodeName</code>Ôºö</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> schedulerLeaderIP:10252/apis/v1/plugins/NodeNUMAResources/cpuTopologyOptions/node-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;cpuTopology&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;numCPUs&quot;</span><span class="token plain">:32,</span><span class="token string" style="color:#e3116c">&quot;numCores&quot;</span><span class="token plain">:16,</span><span class="token string" style="color:#e3116c">&quot;numNodes&quot;</span><span class="token plain">:1,</span><span class="token string" style="color:#e3116c">&quot;numSockets&quot;</span><span class="token plain">:1,</span><span class="token string" style="color:#e3116c">&quot;cpuDetails&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Êü•ÁúãÂΩìÂâçÊîØÊåÅÁöÑÊèí‰ª∂-api">Êü•ÁúãÂΩìÂâçÊîØÊåÅÁöÑÊèí‰ª∂ API<a href="#Êü•ÁúãÂΩìÂâçÊîØÊåÅÁöÑÊèí‰ª∂-api" class="hash-link" aria-label="Direct link to Êü•ÁúãÂΩìÂâçÊîØÊåÅÁöÑÊèí‰ª∂ API" title="Direct link to Êü•ÁúãÂΩìÂâçÊîØÊåÅÁöÑÊèí‰ª∂ API">‚Äã</a></h3><p>‰∏∫‰∫ÜÊñπ‰æøÂ§ßÂÆ∂‰ΩøÁî®Ôºåkoord-scheduler Êèê‰æõ‰∫Ü <code>/apis/v1/__services__</code> Êü•ÁúãÊîØÊåÅÁöÑ API Endpoints</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> schedulerLeaderIP:10251/apis/v1/__services__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;GET&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/__services__&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/nodes/:nodeName&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/Coscheduling/gang/:namespace/:name&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/DeviceShare/nodeDeviceSummaries&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/DeviceShare/nodeDeviceSummaries/:name&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/ElasticQuota/quota/:name&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/NodeNUMAResource/availableCPUs/:nodeName&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;/apis/v1/plugins/NodeNUMAResource/cpuTopologyOptions/:nodeName&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-Êõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶">4. Êõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶<a href="#4-Êõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶" class="hash-link" aria-label="Direct link to 4. Êõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶" title="Direct link to 4. Êõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶">‚Äã</a></h2><p>Âú® Koordinator v0.6 ÁâàÊú¨‰∏≠Êàë‰ª¨ÂèëÂ∏É‰∫ÜÂÖ®Êñ∞ÁöÑ koord-deschedulerÔºåÊîØÊåÅÊèí‰ª∂ÂåñÂÆûÁé∞ÈúÄË¶ÅÁöÑÈáçË∞ÉÂ∫¶Á≠ñÁï•ÂíåËá™ÂÆö‰πâÈ©±ÈÄêÊú∫Âà∂ÔºåÂπ∂ÂÜÖÁΩÆ‰∫ÜÈù¢Âêë PodMigrationJob ÁöÑËøÅÁßªÊéßÂà∂Âô®ÔºåÈÄöËøá Koordinator Reservation Êú∫Âà∂È¢ÑÁïôËµÑÊ∫êÔºåÁ°Æ‰øùÊúâËµÑÊ∫êÁöÑÊÉÖÂÜµ‰∏ãÂèëËµ∑È©±ÈÄê„ÄÇËß£ÂÜ≥‰∫Ü Pod Ë¢´È©±ÈÄêÂêéÊó†ËµÑÊ∫êÂèØÁî®ÂΩ±ÂìçÂ∫îÁî®ÁöÑÂèØÁî®ÊÄßÈóÆÈ¢ò„ÄÇ<br>Koordinator v0.7 ÁâàÊú¨‰∏≠Ôºåkoord-descheduler ÂÆûÁé∞‰∫ÜÊõ¥ÂÆâÂÖ®ÁöÑÈáçË∞ÉÂ∫¶</p><ul><li>ÊîØÊåÅ Evict ÈôêÊµÅÔºåÁî®Êà∑ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈÖçÁΩÆÈôêÊµÅÁ≠ñÁï•Ôºå‰æãÂ¶ÇÂÖÅËÆ∏ÊØèÂàÜÈíüÈ©±ÈÄêÂ§öÂ∞ë‰∏™ Pod</li><li>ÊîØÊåÅÈÖçÁΩÆ Namespace ÁÅ∞Â∫¶ÈáçË∞ÉÂ∫¶ËÉΩÂäõÔºåËÆ©Áî®Êà∑ÂèØ‰ª•Êõ¥ÊîæÂøÉÁöÑÁÅ∞Â∫¶</li><li>ÊîØÊåÅÊåâÁÖß Node/Namespace ÈÖçÁΩÆÈ©±ÈÄêÊï∞ÈáèÔºå‰æãÂ¶ÇÈÖçÁΩÆËäÇÁÇπÁª¥Â∫¶ÊúÄÂ§öÂè™È©±ÈÄê‰∏§‰∏™ÔºåÈÇ£‰πàÂç≥‰ΩøÊúâÊèí‰ª∂Ë¶ÅÊ±ÇÈ©±ÈÄêËØ•ËäÇÁÇπ‰∏äÁöÑÊõ¥Â§öPodÔºå‰ºöË¢´ÊãíÁªù„ÄÇ</li><li>ÊÑüÁü• Workload ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ Workload Ê≠£Âú®ÂèëÂ∏É„ÄÅÁº©ÂÆπ„ÄÅÂ∑≤ÁªèÊúâ‰∏ÄÂÆöÈáèÁöÑ Pod Ê≠£Âú®Ë¢´È©±ÈÄêÊàñËÄÖ‰∏Ä‰∫õPod NotReadyÔºåÈáçË∞ÉÂ∫¶Âô®‰ºöÊãíÁªùÊñ∞ÁöÑÈáçË∞ÉÂ∫¶ËØ∑Ê±Ç„ÄÇÁõÆÂâçÊîØÊåÅÂéüÁîüÁöÑ DeploymentÔºåStatefulSet ‰ª•Âèä Kruise  CloneSetÔºåKruise AdvancedStatefulSet„ÄÇ</li></ul><p>ÂêéÁª≠ÈáçË∞ÉÂ∫¶Âô®Ëøò‰ºöÊèêÂçáÂÖ¨Âπ≥ÊÄßÔºåÈò≤Ê≠¢‰∏ÄÁõ¥ÈáçÂ§çÁöÑÈáçË∞ÉÂ∫¶Âêå‰∏Ä‰∏™ workload ÔºåÂ∞ΩÈáèÈôç‰ΩéÈáçË∞ÉÂ∫¶ÂØπÂ∫îÁî®ÁöÑÂèØÁî®ÊÄßÁöÑÂΩ±Âìç„ÄÇ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-ÂÖ∂‰ªñÊîπÂä®">5. ÂÖ∂‰ªñÊîπÂä®<a href="#5-ÂÖ∂‰ªñÊîπÂä®" class="hash-link" aria-label="Direct link to 5. ÂÖ∂‰ªñÊîπÂä®" title="Direct link to 5. ÂÖ∂‰ªñÊîπÂä®">‚Äã</a></h2><ul><li>Koordinator Ëøõ‰∏ÄÊ≠•Â¢ûÂº∫‰∫Ü CPU Á≤æÁªÜÂåñË∞ÉÂ∫¶ËÉΩÂäõÔºåÂÆåÂÖ®ÂÖºÂÆπ kubelet ( &lt;= v1.22) CPU Manager static Á≠ñÁï•„ÄÇË∞ÉÂ∫¶Âô®ÂàÜÈÖç CPU Êó∂‰ºöÈÅøÂÖçÂàÜÈÖçË¢´ kubelet È¢ÑÁïôÁöÑ CPUÔºåÂçïÊú∫‰æßkoordletÂÆåÊï¥ÈÄÇÈÖç‰∫Ükubelet‰ªé1.18Âà∞1.22ÁâàÊú¨ÁöÑÂàÜÈÖçÁ≠ñÁï•ÔºåÊúâÊïàÈÅøÂÖç‰∫Ü CPU ÂÜ≤Á™Å„ÄÇ</li><li>ËµÑÊ∫êÈ¢ÑÁïôÊú∫Âà∂ÊîØÊåÅ AllocateOnce ËØ≠‰πâÔºåÊª°Ë∂≥ÂçïÊ¨°È¢ÑÁïôÂú∫ÊôØ„ÄÇÂπ∂ÊîπËøõ‰∫Ü Reservation Áä∂ÊÄÅËØ≠‰πâÔºåÊõ¥Âä†ÂáÜÁ°ÆÊèèËø∞ Reservation ÂØπË±°ÂΩìÂâçÁöÑÁä∂ÊÄÅ„ÄÇ</li><li>ÊîπËøõ‰∫ÜÁ¶ªÁ∫øËµÑÊ∫ê(Batch CPU/Memory) ÁöÑÂ£∞ÊòéÊñπÂºèÔºåÊîØÊåÅlimitÂ§ß‰∫érequestÁöÑËµÑÊ∫êÊèèËø∞ÂΩ¢ÂºèÔºåÂèØ‰ª•Êñπ‰æøÂéüburstableÁ±ªÂûãÁöÑ‰ªªÂä°Áõ¥Êé•ËΩ¨Êç¢‰∏∫Ê∑∑ÈÉ®Ê®°ÂºèËøêË°å„ÄÇ</li></ul><p>‰Ω†ÂèØ‰ª•ÈÄöËøá <a href="https://github.com/koordinator-sh/koordinator/releases/tag/v0.6.1" target="_blank" rel="noopener noreferrer">Github release[6]</a> È°µÈù¢ÔºåÊù•Êü•ÁúãÊõ¥Â§öÁöÑÊîπÂä®‰ª•ÂèäÂÆÉ‰ª¨ÁöÑ‰ΩúËÄÖ‰∏éÊèê‰∫§ËÆ∞ÂΩï„ÄÇ</p><h1>Áõ∏ÂÖ≥ÈìæÊé•</h1><ul><li><a href="https://koordinator.sh" target="_blank" rel="noopener noreferrer">[1] Koordinator</a> </li><li><a href="https://mp.weixin.qq.com/s/YdoxVxz_91ZFemF8JuxRvQ" target="_blank" rel="noopener noreferrer">[2]  Koordinator 0.6 Release Note</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220901-gang-scheduling.md" target="_blank" rel="noopener noreferrer">[3] Design: Gang Scheduling</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220722-multi-hierarchy-elastic-quota-management.md" target="_blank" rel="noopener noreferrer">[4] Design: Multi Hierarchy ElasticQuota Management</a></li><li><a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220629-fine-grained-device-scheduling.md" target="_blank" rel="noopener noreferrer">[5] Design: Fine-grained Device Scheduling</a></li><li><a href="https://github.com/koordinator-sh/koordinator/releases/tag/v0.6.1" target="_blank" rel="noopener noreferrer">[6] Github Release</a></li><li><a href="https://join.slack.com/t/koordinator-sh/shared_invite/zt-1756qoub4-Cn4~esfdlfAPsD7cwO2NzA" target="_blank" rel="noopener noreferrer">[7] Slack Channel</a></li><li><a href="https://mp.weixin.qq.com/s/y8k_q6rhTIubQ-lqvDp2hw" target="_blank" rel="noopener noreferrer">[8] ‰∫ëÂéüÁîüÊ∑∑ÈÉ®Á≥ªÁªü Koordinator Êû∂ÊûÑËØ¶Ëß£</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v0.6.0">Koordinator v0.6: Complete fine-grained CPU orchestration, Resource Reservation and Descheduling</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-08-04T00:00:00.000Z" itemprop="datePublished">August 4, 2022</time> ¬∑ <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/eahydra.png" alt="Joseph"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Joseph</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We are happy to announce the release of Koordinator v0.6.0. Koordinator v0.6.0 brings complete Fine-grained CPU Orchestration, Resource Reservation mechanism, safely Pod Migration mechanism and Descheduling Framework.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-or-upgrade-to-koordinator-v060">Install or Upgrade to Koordinator v0.6.0<a href="#install-or-upgrade-to-koordinator-v060" class="hash-link" aria-label="Direct link to Install or Upgrade to Koordinator v0.6.0" title="Direct link to Install or Upgrade to Koordinator v0.6.0">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-with-helms">Install with helms<a href="#install-with-helms" class="hash-link" aria-label="Direct link to Install with helms" title="Direct link to Install with helms">‚Äã</a></h3><p>Koordinator can be simply installed by helm v3.5+, which is a simple command-line tool, and you can get it
from <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.6</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-with-helm">Upgrade with helm<a href="#upgrade-with-helm" class="hash-link" aria-label="Direct link to Upgrade with helm" title="Direct link to Upgrade with helm">‚Äã</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Upgrade the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.6</span><span class="token plain">.0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--force</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, please refer to the <a href="/docs/installation">installation manual</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fine-grained-cpu-orchestration">Fine-grained CPU Orchestration<a href="#fine-grained-cpu-orchestration" class="hash-link" aria-label="Direct link to Fine-grained CPU Orchestration" title="Direct link to Fine-grained CPU Orchestration">‚Äã</a></h2><p>In Koordinator v0.5.0, we designed and implemented basic CPU orchestration capabilities. The koord-scheduler supports different CPU bind policies to help LSE/LSR Pods achieve better performance. </p><p>Now in the v0.6 version, we have basically completed the CPU orchestration capabilities originally designed, such as:</p><ul><li>Support default CPU bind policy configured by koord-scheduler for LSR/LSE Pods that do not specify a CPU bind policy</li><li>Support CPU exclusive policy that supports <code>PCPULevel</code> and <code>NUMANodeLevel</code>, which can spread the CPU-bound Pods to different physical cores or NUMA Nodes as much as possible to reduce the interference between Pods.</li><li>Support Node CPU Orchestration API to helper cluster administrators control the CPU orchestration behavior of nodes. The label <code>node.koordinator.sh/cpu-bind-policy</code> constrains how to bind CPU logical CPUs when scheduling. If set with the <code>FullPCPUsOnly</code> that requires that the scheduler must allocate full physical cores. Equivalent to kubelet CPU manager policy option <code>full-pcpus-only=true</code>. If there is no <code>node.koordinator.sh/cpu-bind-policy</code> in the node&#x27;s label, it will be executed according to the policy configured by the Pod or koord-scheduler. The label <code>node.koordinator.sh/numa-allocate-strategy</code> indicates how to choose satisfied NUMA Nodes when scheduling. Support <code>MostAllocated</code> and <code>LeastAllocated</code>.</li><li>koordlet supports the LSE Pods and improve compatibility with existing Guaranteed Pods with static CPU Manager policy. </li></ul><p>Please check out our <a href="/docs/user-manuals/fine-grained-cpu-orchestration">user manual</a> for a detailed introduction and
tutorial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-reservation">Resource Reservation<a href="#resource-reservation" class="hash-link" aria-label="Direct link to Resource Reservation" title="Direct link to Resource Reservation">‚Äã</a></h2><p>We completed the <code>Resource Reservation API</code> design proposal in v0.5, and implemented the basic Reservation mechanism in the current v0.6 version. </p><p>When you want to use the Reservation mechanism to reserve resources, you do not need to modify the Pod or the existing workloads(e.g. Deployment, StatefulSet). koord-scheduler provides a simple to use API named <code>Reservation</code>, which allows us to reserve node resources for specified pods or workloads even if they haven&#x27;t get created yet. You only need to write the Pod Template and the owner information in the ReservationSpec when creating a Reservation. When koord-scheduler perceives a new Reservation object, it will allocate resources to the Reservation object through the normal Pod scheduling process. After scheduling, koord-scheduler will update the success or failure information to ResourceStatus. If the reservation is successful, and the OwnerReference or Labels of the newly created Pod satisfy the owner information declared earlier, then the newly created Pod will directly reuse the resources held by the Reservation. When the Pod is destroyed, the Reservation object can be reused until the Reservation expires.</p><p><img loading="lazy" alt="image" src="/assets/images/resource-reservation-0c5a187530dd5e3dc9c6e96f97add1ba.svg" width="511" height="371" class="img_ev3q"></p><p>The resource reservation mechanism can help solve or optimize the problems in the following scenarios:</p><ol><li>Preemption: Existing preemption does not guarantee that only preempting pods can allocate preempted resources. With a
reservation, the scheduler should be able to &quot;lock&quot; resources preventing from allocation of other pods with the same
or higher priority.</li><li>Descheduling: For the descheduler, it is better to ensure sufficient resources with the reservation before pods get
rescheduled. Otherwise, rescheduled pods may not be runnable anymore and make the belonging application disrupted.</li><li>Horizontal scaling: Using reservation to achieve more deterministic horizontal scaling. e.g. Submit a reservation and
make sure it is available before scaling up replicas.</li><li>Resource Pre-allocation: Sometimes we want to pre-allocate node resources for future resource demands even if the
resources are not currently allocatable. Reservation can help with this and it should make no physical cost.</li></ol><ul><li>Please check out our <a href="/docs/user-manuals/resource-reservation">user manual</a> for a detailed introduction and
tutorial.</li><li>For more information, please see <a href="/docs/designs/resource-reservation">Design: Resource Reservation</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pod-migration-job">Pod Migration Job<a href="#pod-migration-job" class="hash-link" aria-label="Direct link to Pod Migration Job" title="Direct link to Pod Migration Job">‚Äã</a></h2><p>Migrating Pods is an important capability that many components (such as descheduler) rely on, and can be used to optimize scheduling or help resolve workload runtime quality issues. We believe that pod migration is a complex process, involving steps such as auditing, resource allocation, and application startup, and is mixed with application upgrading, scaling scenarios, resource operation and maintenance operations by cluster administrators. Therefore, how to manage the stability risk of this process to ensure that the application does not fail due to the migration of Pods is a very critical issue that must be resolved.</p><p>The descheduler in the K8s community evicts pods according to different strategies. However, it does not guarantee whether the evicted Pod has resources available after re-creation. If a large number of newly created Pods are in the Pending state when the resources in the cluster are tight, may lower the application availabilities.</p><p>Koordinator defines a CRD-based Migration/Eviction API named <code>PodMigrationAPI</code>, through which the descheduler or other components can evict or delete Pods more safely. With PodMigrationJob we can track the status of each process in the migration, and perceive scenarios such as upgrading and scaling of the application.</p><p>It&#x27;s simple to use the PodMigrationJob API. Create a <code>PodMigrationJob</code> with the YAML file below to migrate <code>pod-demo-0</code>. </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scheduling.koordinator.sh/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodMigrationJob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> migrationjob</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">paused</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ttl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ReservationFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">podRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">5f9b977566</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c7lvk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">phase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pending</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f migrationjob-demo.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">podmigrationjob.scheduling.koordinator.sh/migrationjob-demo created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you can query the migration status and query the migration events</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get podmigrationjob migrationjob-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                PHASE     STATUS     AGE   NODE     RESERVATION                            PODNAMESPACE   POD                         NEWPOD                      TTL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">migrationjob-demo   Succeed   Complete   37s   node-1   d56659ab-ba16-47a2-821d-22d6ba49258e   default        pod-demo-5f9b977566-c7lvk   pod-demo-5f9b977566-nxjdf   5m0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl describe podmigrationjob migrationjob-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason                Age    From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----    ------                ----   ----               -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ReservationCreated    8m33s  koord-descheduler  Successfully create Reservation </span><span class="token string" style="color:#e3116c">&quot;d56659ab-ba16-47a2-821d-22d6ba49258e&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ReservationScheduled  8m33s  koord-descheduler  Assigned Reservation </span><span class="token string" style="color:#e3116c">&quot;d56659ab-ba16-47a2-821d-22d6ba49258e&quot;</span><span class="token plain"> to </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;node-1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Evicting              8m33s  koord-descheduler  Try to evict Pod </span><span class="token string" style="color:#e3116c">&quot;default/pod-demo-5f9b977566-c7lvk&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  EvictComplete         8m     koord-descheduler  Pod </span><span class="token string" style="color:#e3116c">&quot;default/pod-demo-5f9b977566-c7lvk&quot;</span><span class="token plain"> has been evicted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Complete              8m     koord-descheduler  Bind Pod </span><span class="token string" style="color:#e3116c">&quot;default/pod-demo-5f9b977566-nxjdf&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> Reservation </span><span class="token string" style="color:#e3116c">&quot;d56659ab-ba16-47a2-821d-22d6ba49258e&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Please check out our <a href="/docs/user-manuals/pod-migration-job">user manual</a> for a detailed introduction and
tutorial.</li><li>For more information, please see <a href="/docs/designs/pod-migration-job">Design: PodMigrationJob</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="descheduling-framework">Descheduling Framework<a href="#descheduling-framework" class="hash-link" aria-label="Direct link to Descheduling Framework" title="Direct link to Descheduling Framework">‚Äã</a></h2><p>We implemented a brand new Descheduling Framework in v0.6. </p><p>The existing descheduler in the community can solve some problems, but we think that there are still many aspects of the descheduler that can be improved, for example, it only supports the mode of periodic execution, and does not support the event-triggered mode. It is not possible to extend and configure custom descheduling strategies without invading the existing code of descheduler like kube-scheduler; it also does not support implementing custom evictor.</p><p>We also noticed that the K8s descheduler community also found these problems and proposed corresponding solutions such as <a href="https://github.com/kubernetes-sigs/descheduler/issues/753" target="_blank" rel="noopener noreferrer">#753 Descheduler framework Proposal</a> and <a href="https://github.com/kubernetes-sigs/descheduler/pull/781" target="_blank" rel="noopener noreferrer">PoC #781</a>. The K8s descheduler community tries to implement a descheduler framework similar to the k8s scheduling framework. This coincides with our thinking.</p><p>Overall, these solutions solved most of our problems, but we also noticed that the related implementations were not merged into the main branch. But we review these implementations and discussions, and we believe this is the right direction. Considering that Koordiantor has clear milestones for descheduler-related features, we will implement Koordinator&#x27;s own descheduler independently of the upstream community. We try to use some of the designs in the <a href="https://github.com/kubernetes-sigs/descheduler/issues/753" target="_blank" rel="noopener noreferrer">#753 PR</a> proposed by the community and we will follow the Koordinator&#x27;s compatibility principle with K8s to maintain compatibility with the upstream community descheduler when implementing. Such as independent implementation can also drive the evolution of the upstream community&#x27;s work on the descheduler framework. And when the upstream community has new changes or switches to the architecture that Koordinator deems appropriate, Koordinator will follow up promptly and actively.</p><p>Based on this descheduling framework, it is very easy to be compatible with the existing descheduling strategies in the K8s community, and users can implement and integrate their own descheduling plugins as easily as K8s Scheduling Framework. At the same time, users are also supported to implement Controller in the form of plugins to realize event-based descheduling scenarios. At the same time, the framework integrates the <code>MigrationController</code> based on PodMigrationJob API and serves as the default Evictor plugin to help safely migrate Pods in various descheduling scenarios.</p><p>At present, we have implemented the main body of the framework, including the MigrationController based on PodMigrationJob, which is available as a whole. And we also provide <a href="https://github.com/koordinator-sh/koordinator/blob/main/pkg/descheduler/framework/plugins/removepodsviolatingnodeaffinity/node_affinity.go" target="_blank" rel="noopener noreferrer">a demo descheduling plugin</a>. In the future, we will migrate and be compatible with the existing descheduling policies of the community, as well as the load balancing descheduling plugin provided for co-location scenarios. </p><p>The current framework is still in the early stage of rapid evolution, and there are still many details that need to be improved. Everyone who is interested is welcome to participate in the construction together. We hope that more people can be more assured and simpler to realize the descheduling capabilities they need.</p><ul><li>For more information, please see <a href="/docs/designs/descheduler-framework">Design: descheduling framework</a>.</li><li>For specific implementation, please see <a href="https://github.com/koordinator-sh/koordinator/tree/main/pkg/descheduler" target="_blank" rel="noopener noreferrer">pkg/descheduler</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-gpu-scheduling">About GPU Scheduling<a href="#about-gpu-scheduling" class="hash-link" aria-label="Direct link to About GPU Scheduling" title="Direct link to About GPU Scheduling">‚Äã</a></h2><p>There are also some new developments in GPU scheduling capabilities that everyone cares about. </p><p>During the iteration of v0.6, we completed the design of <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220629-fine-grained-device-scheduling.md" target="_blank" rel="noopener noreferrer">GPU Share Scheduling</a>, and also completed the design of <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220701-schedule-gang.md" target="_blank" rel="noopener noreferrer">Gang Scheduling</a>. Development of these capabilities is ongoing and will be released in v0.7. </p><p>In addition, in order to explore the mechanism of GPU overcommitment, we have implemented the ability to <a href="https://github.com/koordinator-sh/koordinator/pull/361" target="_blank" rel="noopener noreferrer">report GPU Metric</a> in v0.6.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-coming-next-in-koordinator">What‚Äôs coming next in Koordinator<a href="#whats-coming-next-in-koordinator" class="hash-link" aria-label="Direct link to What‚Äôs coming next in Koordinator" title="Direct link to What‚Äôs coming next in Koordinator">‚Äã</a></h2><p>Don&#x27;t forget that Koordinator is developed in the open. You can check out our Github milestone to know more about what
is happening and what we have planned. For more details, please refer to
our <a href="https://github.com/koordinator-sh/koordinator/milestones" target="_blank" rel="noopener noreferrer">milestone</a>. Hope it helps!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v0.5.0">Koordinator v0.5: Now With Node Resource Topology And More</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-06-30T00:00:00.000Z" itemprop="datePublished">June 30, 2022</time> ¬∑ <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/jasonliu747" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/jasonliu747.png" alt="Jason"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jasonliu747" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jason</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>In addition to the usual updates to supporting utilities, Koordinator v0.5 adds a couple of new useful features we think
you&#x27;ll like.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-or-upgrade-to-koordinator-v050">Install or Upgrade to Koordinator v0.5.0<a href="#install-or-upgrade-to-koordinator-v050" class="hash-link" aria-label="Direct link to Install or Upgrade to Koordinator v0.5.0" title="Direct link to Install or Upgrade to Koordinator v0.5.0">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-with-helms">Install with helms<a href="#install-with-helms" class="hash-link" aria-label="Direct link to Install with helms" title="Direct link to Install with helms">‚Äã</a></h3><p>Koordinator can be simply installed by helm v3.5+, which is a simple command-line tool, and you can get it
from <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-with-helm">Upgrade with helm<a href="#upgrade-with-helm" class="hash-link" aria-label="Direct link to Upgrade with helm" title="Direct link to Upgrade with helm">‚Äã</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Upgrade the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">.0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--force</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, please refer to the <a href="/docs/installation">installation manual</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fine-grained-cpu-orchestration">Fine-grained CPU Orchestration<a href="#fine-grained-cpu-orchestration" class="hash-link" aria-label="Direct link to Fine-grained CPU Orchestration" title="Direct link to Fine-grained CPU Orchestration">‚Äã</a></h2><p>In this version, we introduced a fine-grained CPU orchestration. Pods in the Kubernetes cluster may interfere with
others&#x27; running when they share the same physical resources and both demand many resources. The sharing of CPU resources
is almost inevitable. e.g. SMT threads (i.e. logical processors) share execution units of the same core, and cores in
the same chip share one last-level cache. The resource contention can slow down the running of these CPU-sensitive
workloads, resulting in high response latency (RT).</p><p>To improve the performance of CPU-sensitive workloads, koord-scheduler provides a mechanism of fine-grained CPU
orchestration. It enhances the CPU management of Kubernetes and supports detailed NUMA-locality and CPU exclusions.</p><p>Please check out our <a href="/docs/user-manuals/fine-grained-cpu-orchestration">user manual</a> for a detailed introduction and
tutorial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-reservation">Resource Reservation<a href="#resource-reservation" class="hash-link" aria-label="Direct link to Resource Reservation" title="Direct link to Resource Reservation">‚Äã</a></h2><p>Pods are fundamental units for allocating node resources in Kubernetes, which bind resource requirements with business
logic. The scheduler is not able to reserve node resources for specific pods or workloads. We may try using a fake pod
to prepare resources by the preemption mechanism. However, fake pods can be preempted by any scheduled pods with higher
priorities, which make resources get scrambled unexpectedly.</p><p>In Koordinator, a resource reservation mechanism is proposed to enhance scheduling and especially benefits scenarios
below:</p><ol><li>Preemption: Existing preemption does not guarantee that only preempting pods can allocate preempted resources. With a
reservation, the scheduler should be able to &quot;lock&quot; resources preventing from allocation of other pods with the same
or
higher priority.</li><li>De-scheduling: For the descheduler, it is better to ensure sufficient resources with the reservation before pods get
rescheduled. Otherwise, rescheduled pods may not be runnable anymore and make the belonging application disrupted.</li><li>Horizontal scaling: Using reservation to achieve more deterministic horizontal scaling. e.g. Submit a reservation and
make sure it is available before scaling up replicas.</li><li>Resource Pre-allocation: Sometimes we want to pre-allocate node resources for future resource demands even if the
resources are not currently allocatable. Reservation can help with this and it should make no physical cost.</li></ol><p>This feature is still under development. We&#x27;ve finalized the API, feel free to check it out.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Reservation struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1.TypeMeta `json:&quot;,inline&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A Reservation object is non-namespaced.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // It can reserve resources for pods of any namespace. Any affinity/anti-affinity of reservation scheduling can be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // specified in the pod template.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1.ObjectMeta `json:&quot;metadata,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Spec              ReservationSpec   `json:&quot;spec,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status            ReservationStatus `json:&quot;status,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationSpec struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Template defines the scheduling requirements (resources, affinities, images, ...) processed by the scheduler just</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // like a normal pod.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If the `template.spec.nodeName` is specified, the scheduler will not choose another node but reserve resources on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the specified node.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Template *corev1.PodTemplateSpec `json:&quot;template,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Specify the owners who can allocate the reserved resources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Multiple owner selectors and ANDed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Owners []ReservationOwner `json:&quot;owners,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // By default, the resources requirements of reservation (specified in `template.spec`) is filtered by whether the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // node has sufficient free resources (i.e. ReservationRequest &lt;  NodeFree).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // When `preAllocation` is set, the scheduler will skip this validation and allow overcommitment. The scheduled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // reservation would be waiting to be available until free resources are sufficient.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PreAllocation bool `json:&quot;preAllocation,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Time-to-Live period for the reservation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // `expires` and `ttl` are mutually exclusive. If both `ttl` and `expires` are not specified, a very</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // long TTL will be picked as default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TTL *metav1.Duration `json:&quot;ttl,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Expired timestamp when the reservation expires.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // `expires` and `ttl` are mutually exclusive. Defaults to being set dynamically at runtime based on the `ttl`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Expires *metav1.Time `json:&quot;expires,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationStatus struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The `phase` indicates whether is reservation is waiting for process (`Pending`), available to allocate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // (`Available`) or expired to get cleanup (Expired).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Phase ReservationPhase `json:&quot;phase,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The `conditions` indicate the messages of reason why the reservation is still pending.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Conditions []ReservationCondition `json:&quot;conditions,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Current resource owners which allocated the reservation resources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CurrentOwners []corev1.ObjectReference `json:&quot;currentOwners,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationOwner struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Multiple field selectors are ORed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Object        *corev1.ObjectReference         `json:&quot;object,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Controller    *ReservationControllerReference `json:&quot;controller,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LabelSelector *metav1.LabelSelector           `json:&quot;labelSelector,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationControllerReference struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Extend with a `namespace` field for reference different namespaces.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1.OwnerReference `json:&quot;,inline&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Namespace             string `json:&quot;namespace,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationPhase string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ReservationPending indicates the Reservation has not been processed by the scheduler or is unschedulable for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // some reasons (e.g. the resource requirements cannot get satisfied).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReservationPending ReservationPhase = &quot;Pending&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ReservationAvailable indicates the Reservation is both scheduled and available for allocation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReservationAvailable ReservationPhase = &quot;Available&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ReservationWaiting indicates the Reservation is scheduled, but the resources to reserve are not ready for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // allocation (e.g. in pre-allocation for running pods).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReservationWaiting ReservationPhase = &quot;Waiting&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ReservationExpired indicates the Reservation is expired, which the object is not available to allocate and will</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // get cleaned in the future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReservationExpired ReservationPhase = &quot;Expired&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ReservationCondition struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LastProbeTime      metav1.Time `json:&quot;lastProbeTime&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LastTransitionTime metav1.Time `json:&quot;lastTransitionTime&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Reason             string      `json:&quot;reason&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message            string      `json:&quot;message&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qos-manager">QoS Manager<a href="#qos-manager" class="hash-link" aria-label="Direct link to QoS Manager" title="Direct link to QoS Manager">‚Äã</a></h2><p>Currently, plugins from resmanager in Koordlet are mixed together, they should be classified into two
categories: <code>static</code> and <code>dynamic</code>. Static plugins will be called and run only once when a container created, updated,
started or stopped. However, for dynamic plugins, they may be called and run at any time according the real-time runtime
states of node, such as CPU suppress, CPU burst, etc. This proposal only focuses on refactoring dynamic plugins. Take a
look at current plugin implementation, there are many function calls to resmanager&#x27;s methods directly, such as
collecting node/pod/container metrics, fetching metadata of node/pod/container, fetching configurations(NodeSLO, etc.).
In the feature, we may need a flexible and powerful framework with scalability for special external plugins.</p><p>The below is directory tree of qos-manager inside koordlet, all existing dynamic plugins(as built-in plugins) will be
moved into sub-directory <code>plugins</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pkg/koordlet/qosmanager/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       - manager.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       - context.go   // plugin context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       - /plugins/    // built-in plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 - /cpubrust/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 - /cpusuppress/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 - /cpuevict/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 - /memoryevict/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We only have the proposal in this version. Stay tuned, further implementation is coming soon!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-running-hook-modes">Multiple Running Hook Modes<a href="#multiple-running-hook-modes" class="hash-link" aria-label="Direct link to Multiple Running Hook Modes" title="Direct link to Multiple Running Hook Modes">‚Äã</a></h2><p><code>Runtime Hooks</code> includes a set of plugins which are responsible for the injections of resource isolation parameters
by pod attribute. When <code>Koord Runtime Proxy</code> running as a CRI Proxy, <code>Runtime Hooks</code> acts as the backend server. The
mechanism of CRI Proxy can ensure the consistency of resource parameters during pod lifecycle. However,
<code>Koord Runtime Proxy</code> can only hijack CRI requests from kubelet for pods, the consistency of resource parameters in
QoS class directory cannot be guaranteed. Besides, modification of pod parameters from third-party(e.g. manually) will
also break the correctness of hook plugins.</p><p>Therefore, a standalone running mode with reconciler for <code>Runtime Hooks</code> is necessary. Under <code>Standalone</code> running
mode, resource isolation parameters will be injected asynchronously, keeping eventual consistency of the injected
parameters for pod and QoS class even without <code>Runtime Hook Manager</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="some-minor-works">Some minor works<a href="#some-minor-works" class="hash-link" aria-label="Direct link to Some minor works" title="Direct link to Some minor works">‚Äã</a></h2><ol><li>We fix the backward compatibility issues reported by our users
in <a href="https://github.com/koordinator-sh/koordinator/issues/310" target="_blank" rel="noopener noreferrer">here</a>. If you&#x27;ve ever encountered similar problem,
please upgrade to the latest version.</li><li>Two more interfaces were added into runtime-proxy. One is <code>PreCreateContainerHook</code>, which could set container
resources setting before creating, and the other is <code>PostStopSandboxHook</code>, which could do the resource setting
garbage collecting before pods deleted.</li><li><code>cpuacct.usage</code> is more precise than <code>cpuacct.stat</code>, and <code>cpuacct.stat</code> is in USER_HZ unit, while <code>cpuacct.usage</code> is
nanoseconds. After thorough discussion, we were on the same page that we replace <code>cpuacct.stat</code> with <code>cpuacct.usage</code>
in koordlet.</li><li>Koordlet needs to keep fetching data from kubelet. Before this version, we only support accessing kubelet via
read-only port over HTTP. Due to security concern, we&#x27;ve enabled HTTPS access in this version. For more details,
please refer to this <a href="https://github.com/koordinator-sh/koordinator/pull/320" target="_blank" rel="noopener noreferrer">PR</a>.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-coming-next-in-koordinator">What‚Äôs coming next in Koordinator<a href="#whats-coming-next-in-koordinator" class="hash-link" aria-label="Direct link to What‚Äôs coming next in Koordinator" title="Direct link to What‚Äôs coming next in Koordinator">‚Äã</a></h2><p>Don&#x27;t forget that Koordinator is developed in the open. You can check out our Github milestone to know more about what
is happening and what we have planned. For more details, please refer to
our <a href="https://github.com/koordinator-sh/koordinator/milestones" target="_blank" rel="noopener noreferrer">milestone</a>. Hope it helps!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v0.4.0">What&#x27;s New in Koordinator v0.4.0?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-05-31T00:00:00.000Z" itemprop="datePublished">May 31, 2022</time> ¬∑ <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/eahydra.png" alt="Joseph"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/eahydra" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Joseph</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We are happy to announce the release of Koordinator v0.4.0. Koordinator v0.4.0 brings in some notable changes that are most wanted by the community while continuing to expand on experimental features. And in this version, we started to gradually enhance the capabilities of the scheduler.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-or-upgrade-to-koordinator-v040">Install or Upgrade to Koordinator v0.4.0<a href="#install-or-upgrade-to-koordinator-v040" class="hash-link" aria-label="Direct link to Install or Upgrade to Koordinator v0.4.0" title="Direct link to Install or Upgrade to Koordinator v0.4.0">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-with-helms">Install with helms<a href="#install-with-helms" class="hash-link" aria-label="Direct link to Install with helms" title="Direct link to Install with helms">‚Äã</a></h3><p>Koordinator can be simply installed by helm v3.5+, which is a simple command-line tool, and you can get it
from <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-with-helm">Upgrade with helm<a href="#upgrade-with-helm" class="hash-link" aria-label="Direct link to Upgrade with helm" title="Direct link to Upgrade with helm">‚Äã</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Upgrade the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain">.0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--force</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, please refer to the <a href="/docs/installation">installation manual</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-node-side-scheduling-capabilities">Enhanced node-side scheduling capabilities<a href="#enhanced-node-side-scheduling-capabilities" class="hash-link" aria-label="Direct link to Enhanced node-side scheduling capabilities" title="Direct link to Enhanced node-side scheduling capabilities">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-memory-evict-threshold">Custom memory evict threshold<a href="#custom-memory-evict-threshold" class="hash-link" aria-label="Direct link to Custom memory evict threshold" title="Direct link to Custom memory evict threshold">‚Äã</a></h3><p>In the Koordinator v0.2.0, an ability to improve the stability of the node side in the co-location scenario was introduced: <a href="/blog/release-v0.2.0#active-eviction-mechanism-based-on-memory-safety-thresholds">Active eviction mechanism based on memory safety thresholds</a>. The current memory utilization safety threshold default value is 70%, now in the v0.4.0 version, you can modify the <code>memoryEvictThresholdPercent</code> with 60% in ConfigMap <code>slo-controller-config</code> according to the actual situation:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">colocation-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;enable&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-threshold-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;clusterStrategy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;memoryEvictThresholdPercent&quot;: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="be-pods-eviction-based-on-satisfaction">BE Pods eviction based on satisfaction<a href="#be-pods-eviction-based-on-satisfaction" class="hash-link" aria-label="Direct link to BE Pods eviction based on satisfaction" title="Direct link to BE Pods eviction based on satisfaction">‚Äã</a></h3><p>In order to ensure the runtime quality of different workloads in co-location scenarios, Koordinator uses the CPU Suppress mechanism provided by koordlet on the node side to suppress workloads of the best effort type when the load increases. Or increase the resource quota for best effort type workloads when the load decreases. </p><p>However, it is not suitable if there are many best effort Pods on the node and they are frequently suppressed. Therefore, in version v0.4.0, Koordinator provides an eviction mechanism based on satisfaction of the requests for the best effort Pods. If the best effort Pods are frequently suppressed, the requests of the best effort Pods cannot be satisfied, and the satisfaction is generally less than 1; if the best effort Pods are not suppressed and more CPU resources are obtained when the node resources are idle, then the requests of the best effort Pods can be satisfied, and the satisfaction is greater than or equal to 1. If the satisfaction is less than the specified threshold, and the CPU utilization of the best effort Pods is close to 100%, <code>koordlet</code> will evict some best effort Pods to improve the runtime quality of the node. The priority with lower priority or with higher CPU utilization of the same priority is evicted.</p><p>You can modify the ConfigMap <code>slo-controller-config</code> according to the actual situation:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">colocation-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;enable&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-threshold-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;clusterStrategy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;cpuEvictBESatisfactionUpperPercent&quot;: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;cpuEvictBESatisfactionLowerPercent&quot;: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="group-identity">Group identity<a href="#group-identity" class="hash-link" aria-label="Direct link to Group identity" title="Direct link to Group identity">‚Äã</a></h3><p>When latency-sensitive applications and best effort workloads are deployed on the same node, the Linux kernel scheduler must provide more scheduling opportunities to high-priority applications to minimize scheduling latency and the impacts of low-priority workloads on kernel scheduling. For this scenario, Koordinator integrated with the group identity allowing users to configure scheduling priorities to CPU cgroups. </p><p>Alibaba Cloud Linux 2 with a kernel of the kernel-4.19.91-24.al7 version or later supports the group identity feature. The group identity feature relies on a dual red-black tree architecture. A low-priority red-black tree is added based on the red-black tree of the Completely Fair Scheduler (CFS) scheduling queue to store low-priority workloads. When the kernel schedules the workloads that have identities, the kernel processes the workloads based on their priorities. For more details, please refer to the <a href="https://www.alibabacloud.com/help/en/elastic-compute-service/latest/group-identity-feature" target="_blank" rel="noopener noreferrer">doc</a>.</p><p>Koordinator defines group identity default values for Pods of different QoS types:</p><table><thead><tr><th>QoS</th><th>Default Value</th></tr></thead><tbody><tr><td>LSR</td><td>2</td></tr><tr><td>LS</td><td>2</td></tr><tr><td>BE</td><td>-1</td></tr></tbody></table><p>You can modify the ConfigMap <code>slo-controller-config</code> to set group identity values according to the actual situation:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">colocation-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;enable&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-qos-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;clusterStrategy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;lsrClass&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;cpuQOS&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;groupIdentity&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;lsClass&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;cpuQOS&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;groupIdentity&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;beClass&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;cpuQOS&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;groupIdentity&quot;: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;systemClass&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;cpuQOS&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;enable&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                &quot;groupIdentity&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To enable this feature, you need to update the kernel and configuration file, then install the new component <code>koord-runtime-proxy</code> of koordinator.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="koord-runtime-proxy-experimental">koord-runtime-proxy (experimental)<a href="#koord-runtime-proxy-experimental" class="hash-link" aria-label="Direct link to koord-runtime-proxy (experimental)" title="Direct link to koord-runtime-proxy (experimental)">‚Äã</a></h2><p><code>koord-runtime-proxy</code> acts as a proxy between kubelet and containerd(dockerd under dockershim scenario), which is designed to intercept CRI request, and apply some resource management policies, such as setting different cgroup parameters by pod priorities under hybrid workload orchestration scenario, applying new isolation policies for latest Linux kernel, CPU architecture, and etc.</p><p>There are two components involved, koord-runtime-proxy and RuntimePlugins.</p><p><img loading="lazy" alt="image" src="/assets/images/koord-runtime-proxy-architecture-89594d54b7712128b218cd4d611b457f.svg" width="431" height="303" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="koord-runtime-proxy">koord-runtime-proxy<a href="#koord-runtime-proxy" class="hash-link" aria-label="Direct link to koord-runtime-proxy" title="Direct link to koord-runtime-proxy">‚Äã</a></h3><p>koord-runtime-proxy is in charge of intercepting request during pod&#x27;s lifecycle, such as RunPodSandbox, CreateContainer etc., and then calling RuntimePlugins to do resource isolation policies before transferring request to backend containerd(dockerd) and after transferring response to kubelet. koord-runtime-proxy provides an isolation-policy-execution framework which allows customized plugins registered to do specified isolation policies, these plugins are called RuntimePlugins. koord-runtime-proxy itself does NOT do any isolation policies.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtimeplugins">RuntimePlugins<a href="#runtimeplugins" class="hash-link" aria-label="Direct link to RuntimePlugins" title="Direct link to RuntimePlugins">‚Äã</a></h3><p>RuntimePlugins register events(RunPodSandbox etc.) to koord-runtime-proxy and would receive notifications when events happen. RuntimePlugins should complete resource isolation policies basing on the notification message, and then response koord-runtime-proxy, koord-runtime-proxy would decide to transfer request to backend containerd or discard request according to plugins&#x27; response.</p><p>If no RuntimePlugins registered, koord-runtime-proxy would become a transparent proxy between kubelet and containerd.</p><p>For more details, please refer to the <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/design-archive/runtime-manager-design-doc.md" target="_blank" rel="noopener noreferrer">design doc</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">‚Äã</a></h3><p>When installing koord-runtime-proxy, you need to change the startup parameters of the kubelet, set the CRI parameters to point to the koord-runtime-proxy, and configure the CRI parameters of the corresponding container runtime when installing the koord-runtime-proxy. </p><p>koord-runtime-proxy is in the Alpha experimental version stage. Currently, it provides a minimum set of extension points. At the same time, there may be some bugs. You are welcome to try it and give feedback.</p><p>For detailed installation process, please refer to the <a href="/docs/installation#install-koord-runtime-proxy-experimental">manual</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-aware-scheduling">Load-Aware Scheduling<a href="#load-aware-scheduling" class="hash-link" aria-label="Direct link to Load-Aware Scheduling" title="Direct link to Load-Aware Scheduling">‚Äã</a></h2><p>Although Koordinator provides the co-location mechanism to improve the resource utilization of the cluster and reduce costs, it does not yet have the ability to control the utilization level of the cluster dimension, Best Effort workloads may also interfere with latency-sensitive applications. Load-aware scheduling plugin helps Koordinator to achieve this capability.</p><p>The scheduling plugin filters abnormal nodes and scores them according to resource usage. This scheduling plugin extends the Filter/Score/Reserve/Unreserve extension points defined in the Kubernetes scheduling framework.</p><p>By default, abnormal nodes are filtered, and users can decide whether to enable or not by configuring as needed.</p><ul><li>Filter nodes where koordlet fails to update NodeMetric. </li><li>Filter nodes by utilization thresholds. If the configuration enables, the plugin will exclude nodes with <em>latestUsageUtilization &gt;= utilizationThreshold</em>.</li></ul><p>This plugin is dependent on NodeMetric&#x27;s reporting period. Different reporting periods need to be set according to different scenarios and workloads. Therefore, NodeMetricSpec has been extended to support user-defined reporting period and aggregation period. Users can modify <code>slo-controller-config</code> to complete the corresponding configuration, and the controller in <code>koord-manager</code> will be responsible for updating the reporting period and aggregation period fields of NodeMetrics of related nodes.</p><p>Currently, the resource utilization thresholds of nodes are configured based on experience to ensure the runtime quality of nodes. But there are also ways to evaluate the workload running on the node to arrive at a more appropriate threshold for resource utilization. For example, in a time-sharing scenario, a higher threshold can be set to allow scheduling to run more best effort workloads during the valley of latency-sensitive applications. When the peak of latency-sensitive applications comes up, lower the threshold and evict some best effort workloads. In addition, 3-sigma can be used to analyze the utilization level in the cluster to obtain a more appropriate threshold.</p><p>The core logic of the scoring algorithm is to select the node with the smallest resource usage. However, considering the delay of resource usage reporting and the delay of Pod startup time, the resource requests of the Pods that have been scheduled and the Pods currently being scheduled within the time window will also be estimated, and the estimated values will be involved in the calculation.</p><p>At present, Koordinator does not have the ability to profile workloads. Different types of workloads have different ways of building profiles. For example, long-running pods need to be scheduled with long-period profiling, while short-period pods should be scheduled with short-period profiling.</p><p>For more details, please refer to the <a href="https://github.com/koordinator-sh/koordinator/blob/main/docs/proposals/scheduling/20220510-load-aware-scheduling.md" target="_blank" rel="noopener noreferrer">proposal</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-comes-next">What Comes Next<a href="#what-comes-next" class="hash-link" aria-label="Direct link to What Comes Next" title="Direct link to What Comes Next">‚Äã</a></h2><p>For more details, please refer to our <a href="https://github.com/koordinator-sh/koordinator/milestones" target="_blank" rel="noopener noreferrer">milestone</a>. Hope it
helps!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/release-v0.3.0">What&#x27;s New in Koordinator v0.3.0?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-05-07T00:00:00.000Z" itemprop="datePublished">May 7, 2022</time> ¬∑ <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/jasonliu747" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/jasonliu747.png" alt="Jason"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jasonliu747" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jason</span></a></div><small class="avatar__subtitle" itemprop="description">Koordinator maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We are happy to announce the v0.3.0 release of <strong>Koordinator</strong>. After starting small and learning what users needed, we
are able to adjust its path and develop features needed for a stable community release.</p><p>The release of Koordinator v0.3.0 brings in some notable changes that are most wanted by the community while continuing
to expand on experimental features.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-or-upgrade-to-koordinator-v030">Install or Upgrade to Koordinator v0.3.0<a href="#install-or-upgrade-to-koordinator-v030" class="hash-link" aria-label="Direct link to Install or Upgrade to Koordinator v0.3.0" title="Direct link to Install or Upgrade to Koordinator v0.3.0">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-with-helms">Install with helms<a href="#install-with-helms" class="hash-link" aria-label="Direct link to Install with helms" title="Direct link to Install with helms">‚Äã</a></h3><p>Koordinator can be simply installed by helm v3.5+, which is a simple command-line tool, and you can get it
from <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-with-helm">Upgrade with helm<a href="#upgrade-with-helm" class="hash-link" aria-label="Direct link to Upgrade with helm" title="Direct link to Upgrade with helm">‚Äã</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add koordinator charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> koordinator-sh https://koordinator-sh.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Upgrade the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade koordinator koordinator-sh/koordinator --version </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain">.0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--force</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, please refer to the <a href="/docs/installation">installation manual</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cpu-burst">CPU Burst<a href="#cpu-burst" class="hash-link" aria-label="Direct link to CPU Burst" title="Direct link to CPU Burst">‚Äã</a></h2><p>CPU Burst is a service level objective (SLO)-aware resource scheduling feature provided by Koordinator. You can use CPU
Burst to improve the performance of latency-sensitive applications. CPU scheduling for
a container may be throttled by the kernel due to the CPU limit, which downgrades the performance of the application.
Koordlet automatically detects CPU throttling events and automatically adjusts the CPU limit to a
proper value. This greatly improves the performance of latency-sensitive applications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-cpu-burst-works">How CPU Burst works<a href="#how-cpu-burst-works" class="hash-link" aria-label="Direct link to How CPU Burst works" title="Direct link to How CPU Burst works">‚Äã</a></h3><p>Kubernetes allows you to specify CPU limits, which can be reused based on time-sharing. If you specify a CPU limit for a
container, the OS limits the amount of CPU resources that can be used by the container within a specific time period.
For example, you set the CPU limit of a container to 2. The OS kernel limits the CPU time slices that the container can
use to 200 milliseconds within each 100-millisecond period.</p><p>CPU utilization is a key metric that is used to evaluate the performance of a container. In most cases, the CPU limit is
specified based on CPU utilization. CPU utilization on a per-millisecond basis shows more spikes than on a per-second
basis. If the CPU utilization of a container reaches the limit within a 100-millisecond period, CPU throttling is
enforced by the OS kernel and threads in the container are suspended for the rest of the time period.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-cpu-burst">How to use CPU Burst<a href="#how-to-use-cpu-burst" class="hash-link" aria-label="Direct link to How to use CPU Burst" title="Direct link to How to use CPU Burst">‚Äã</a></h3><ul><li><p>Use an annotation to enable CPU Burst</p><p>Add the following annotation to the pod configuration to enable CPU Burst:</p></li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Set the value to auto to enable CPU Burst for the pod. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/cpuBurst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;policy&quot;: &quot;auto&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># To disable CPU Burst for the pod, set the value to none. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#koordinator.sh/cpuBurst: &#x27;{&quot;policy&quot;: &quot;none&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Use a ConfigMap to enable CPU Burst for all pods in a cluster</p><p>Modify the slo-controller-config ConfigMap based on the
following content to enable CPU Burst for all pods in a cluster:</p></li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu-burst-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;clusterStrategy&quot;: {&quot;policy&quot;: &quot;auto&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#cpu-burst-config: &#x27;{&quot;clusterStrategy&quot;: {&quot;policy&quot;: &quot;cpuBurstOnly&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#cpu-burst-config: &#x27;{&quot;clusterStrategy&quot;: {&quot;policy&quot;: &quot;none&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Advanced configurations</p><p>The following code block shows the pod annotations and ConfigMap fields that you can use for advanced configurations:</p></li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example of the slo-controller-config ConfigMap. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu-burst-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      &quot;clusterStrategy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;policy&quot;: &quot;auto&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;cpuBurstPercent&quot;: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;cfsQuotaBurstPercent&quot;: 300,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;sharePoolThresholdPercent&quot;: 50,</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        &quot;cfsQuotaBurstPeriodSeconds&quot;: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Example of pod annotations. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/cpuBurst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;policy&quot;: &quot;auto&quot;, &quot;cpuBurstPercent&quot;: 1000, &quot;cfsQuotaBurstPercent&quot;: 300, &quot;cfsQuotaBurstPeriodSeconds&quot;: -1}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following table describes the ConfigMap fields that you can use for advanced configurations of CPU Burst.</p><table><thead><tr><th>Field</th><th>Data type</th><th>Description</th></tr></thead><tbody><tr><td>policy</td><td>string</td><td><ul> <li> none: disables CPU Burst. If you set the value to none, the related fields are reset to their original values. This is the default value.</li> <li>cpuBurstOnly: enables the CPU Burst feature only for the kernel of Alibaba Cloud Linux 2. </li><li> cfsQuotaBurstOnly: enables automatic adjustment of CFS quotas of general kernel versions. </li> <li> auto: enables CPU Burst and all the related features. </li> </ul></td></tr><tr><td>cpuBurstPercent</td><td>int</td><td>Default value:<code>1000</code>. Unit: %. This field specifies the percentage to which the CPU limit can be increased by CPU Burst. If the CPU limit is set to <code>1</code>, CPU Burst can increase the limit to 10 by default.</td></tr><tr><td>cfsQuotaBurstPercent</td><td>int</td><td>Default value: <code>300</code>. Unit: %. This field specifies the maximum percentage to which the value of cfs_quota in the cgroup parameters can be increased. By default, the value of cfs_quota can be increased to at most three times.</td></tr><tr><td>cfsQuotaBurstPeriodSeconds</td><td>int</td><td>Default value: <code>-1</code>. Unit: seconds. This indicates that the time period in which the container can run with an increased CFS quota is unlimited. This field specifies the time period in which the container can run with an increased CFS quota, which cannot exceed the upper limit specified by <code>cfsQuotaBurstPercent</code>.</td></tr><tr><td>sharePoolThresholdPercent</td><td>int</td><td>Default value: <code>50</code>. Unit: %. This field specifies the CPU utilization threshold of the node. If the CPU utilization of the node exceeds the threshold, the value of cfs_quota in cgroup parameters is reset to the original value.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="l3-cache-and-mba-resource-isolation">L3 cache and MBA resource isolation<a href="#l3-cache-and-mba-resource-isolation" class="hash-link" aria-label="Direct link to L3 cache and MBA resource isolation" title="Direct link to L3 cache and MBA resource isolation">‚Äã</a></h2><p>Pods of different priorities are usually deployed on the same machine. This may cause pods to compete for computing
resources. As a result, the quality of service (QoS) of your service cannot be ensured. The Resource Director
Technology (RDT) controls the Last Level Cache (L3 cache) that can be used by workloads of different priorities. RDT
also uses the Memory Bandwidth Allocation (MBA) feature to control the memory bandwidth that can be used by workloads.
This isolates the L3 cache and memory bandwidth used by workloads, ensures the QoS of high-priority workloads, and
improves overall resource utilization. This topic describes how to improve the resource isolation of pods with
different priorities by controlling the L3 cache and using the MBA feature.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-l3-cache-and-mba-resource-isolation">How to use L3 cache and MBA resource isolation<a href="#how-to-use-l3-cache-and-mba-resource-isolation" class="hash-link" aria-label="Direct link to How to use L3 cache and MBA resource isolation" title="Direct link to How to use L3 cache and MBA resource isolation">‚Äã</a></h3><ul><li>Use a ConfigMap to enable L3 cache and MBA resource isolation for all pods in a cluster</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-qos-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">&quot;clusterStrategy&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;lsClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;resctrlQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeStartPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeEndPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;MBAPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;beClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;resctrlQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeStartPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;catRangeEndPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;MBAPercent&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory-qos">Memory QoS<a href="#memory-qos" class="hash-link" aria-label="Direct link to Memory QoS" title="Direct link to Memory QoS">‚Äã</a></h2><p>The Koordlet provides the memory quality of service (QoS) feature for containers. You can use this
feature to optimize the performance of memory-sensitive applications while ensuring fair memory scheduling among
containers. This topic describes how to enable the memory QoS feature for containers.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background-information">Background information<a href="#background-information" class="hash-link" aria-label="Direct link to Background information" title="Direct link to Background information">‚Äã</a></h3><p>The following memory limits apply to containers:</p><ul><li>The memory limit of the container. If the amount of memory that a container uses, including the page cache, is about
to reach the memory limit of the container, the memory reclaim mechanism of the OS kernel is triggered. As a result,
the application in the container may not be able to request or release memory resources as normal.</li><li>The memory limit of the node. If the memory limit of a container is greater than the memory request of the container,
the container can overcommit memory resources. In this case, the available memory on the node may become insufficient.
This causes the OS kernel to reclaim memory from containers. As a result, the performance of your application is
downgraded. In extreme cases, the node cannot run as normal.</li></ul><p>To improve the performance of applications and the stability of nodes, Koordinator provides the memory QoS feature for
containers. We recommend that you use Anolis OS as the node OS. For other OS, we will try our best to adapt, and users
can still enable it without side effects. After you enable the memory QoS feature for a container, Koordlet
automatically configures the memory control group (memcg) based on the configuration of the container. This helps you
optimize the performance of memory-sensitive applications while ensuring fair memory scheduling on the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-memory-qos">How to use Memory QoS<a href="#how-to-use-memory-qos" class="hash-link" aria-label="Direct link to How to use Memory QoS" title="Direct link to How to use Memory QoS">‚Äã</a></h3><p>When you enable memory QoS for the containers in a pod, the memcg is automatically configured based on the specified
ratios and pod parameters. To enable memory QoS for the containers in a pod, perform the following steps:</p><ol><li>Add the following annotations to enable memory QoS for the containers in a pod:</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># To enable memory QoS for the containers in a pod, set the value to auto. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">koordinator.sh/memoryQOS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;policy&quot;: &quot;auto&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># To disable memory QoS for the containers in a pod, set the value to none. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#koordinator.sh/memoryQOS: &#x27;{&quot;policy&quot;: &quot;none&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Use a ConfigMap to enable memory QoS for all the containers in a cluster.</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> slo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> koordinator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource-qos-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">&quot;clusterStrategy&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;lsClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;memoryQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;beClass&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token key atrule" style="color:#00a4db">&quot;memoryQOS&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token key atrule" style="color:#00a4db">&quot;enable&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li><p>Optional. Configure advanced parameters.</p><p>The following table describes the advanced parameters that you can use to configure fine-grained memory QoS
configurations at the pod level and cluster level.</p></li></ol><table><thead><tr><th>Parameter</th><th>Data type</th><th>Valid value</th><th>Description</th></tr></thead><tbody><tr><td>enable</td><td>Boolean</td><td><ul> <li> true </li> <li> false </li> </ul></td><td><ul> <li> true: enables memory QoS for all the containers in a cluster. The default memory QoS settings for the QoS class of the containers are used. </li> <li> false: disables memory QoS for all the containers in a cluster. The memory QoS settings are restored to the original settings for the QoS class of the containers. </li> </ul></td></tr><tr><td>policy</td><td>String</td><td><ul> <li> auto </li> <li> default </li> <li> none </li> </ul></td><td><ul> <li> auto: enables memory QoS for the containers in the pod and uses the recommended memory QoS settings. The recommended memory QoS settings are prioritized over the cluster-wide memory QoS settings. </li> <li> default: specifies that the pod inherits the cluster-wide memory QoS settings. </li> <li> none: disables memory QoS for the pod. The relevant memory QoS settings are restored to the original settings. The original settings are prioritized over the cluster-wide memory QoS settings. </li> </ul></td></tr><tr><td>minLimitPercent</td><td>Int</td><td>0~100</td><td>Unit: %. Default value:<code>0</code>. The default value indicates that this parameter is disabled. This parameter specifies the unreclaimable proportion of the memory request of a pod. The amount of unreclaimable memory is calculated based on the following formula: <code>Value of memory.min = Memory request √ó Value of minLimitPercent/100</code>. This parameter is suitable for scenarios where applications are sensitive to the page cache. You can use this parameter to cache files to optimize read and write performance. For example, if you specify Memory <code>Request=100MiB</code> and <code>minLimitPercent=100</code> for a container, <code>the value of memory.min is 104857600</code>.</td></tr><tr><td>lowLimitPercent</td><td>Int</td><td>0~100</td><td>Unit: %. Default value:<code>0</code>. The default value indicates that this parameter is disabled. This parameter specifies the relatively unreclaimable proportion of the memory request of a pod. The amount of relatively unreclaimable memory is calculated based on the following formula: <code>Value of memory.low = Memory request √ó Value of lowLimitPercent/100</code>. For example, if you specify <code>Memory Request=100MiB</code> and <code>lowLimitPercent=100</code> for a container, <code>the value of memory.low is 104857600</code>.</td></tr><tr><td>throttlingPercent</td><td>Int</td><td>0~100</td><td>Unit: %. Default value:<code>0</code>. The default value indicates that this parameter is disabled. This parameter specifies the memory throttling threshold for the ratio of the memory usage of a container to the memory limit of the container. The memory throttling threshold for memory usage is calculated based on the following formula: <code>Value of memory.high = Memory limit √ó Value of throttlingPercent/100</code>. If the memory usage of a container exceeds the memory throttling threshold, the memory used by the container will be reclaimed. This parameter is suitable for container memory overcommitment scenarios. You can use this parameter to cgroups from triggering OOM. For example, if you specify <code>Memory Limit=100MiB</code> and <code>throttlingPercent=80</code> for a container, <code>the value of memory.high is 83886080</code>, which is equal to 80 MiB.</td></tr><tr><td>wmarkRatio</td><td>Int</td><td>0~100</td><td>Unit: %. Default value:<code>95</code>. A value of <code>0</code> indicates that this parameter is disabled. This parameter specifies the threshold of the usage of the memory limit or the value of <code>memory.high</code> that triggers asynchronous memory reclaim. If <code>throttlingPercent</code> is disabled, the asynchronous memory reclaim threshold for memory usage is calculated based on the following formula: <code>Value of memory.wmark_high = Memory limit √ó wmarkRatio/100</code>. If <code>throttlingPercent</code> is enabled, the asynchronous memory reclaim threshold for memory usage is calculated based on the following formula: <code>Value of memory.wmark_high = Value of memory.high √ó wmarkRatio/100</code>. If the usage of the memory limit or the value of memory.high exceeds the threshold, the memcg backend asynchronous reclaim feature is triggered. For example, if you specify <code>Memory Limit=100MiB</code>for a container, the memory throttling setting is<code>memory.high=83886080</code>, the reclaim ratio setting is <code>memory.wmark_ratio=95</code>, and the reclaim threshold setting is <code>memory.wmark_high=79691776</code>.</td></tr><tr><td>wmarkMinAdj</td><td>Int</td><td>-25~50</td><td>Unit: %. The default value is <code>-25</code> for the <code>LS</code>/ <code>LSR</code> QoS class and <code>50</code> for the <code>BE</code> QoS class. A value of 0 indicates that this parameter is disabled. This parameter specifies the adjustment to the global minimum watermark for a container. A negative value decreases the global minimum watermark and therefore postpones memory reclaim for the container. A positive value increases the global minimum watermark and therefore antedates memory reclaim for the container. For example, if you create a pod whose QoS class is LS, the default setting of this parameter is <code>memory.wmark_min_adj=-25</code>, which indicates that the minimum watermark is decreased by 25% for the containers in the pod.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-comes-next">What Comes Next<a href="#what-comes-next" class="hash-link" aria-label="Direct link to What Comes Next" title="Direct link to What Comes Next">‚Äã</a></h2><p>For more details, please refer to our <a href="https://github.com/koordinator-sh/koordinator/milestones" target="_blank" rel="noopener noreferrer">milestone</a>. Hope it
helps!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/koordinator">koordinator</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/colocation">colocation</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/scheduling">scheduling</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/orchestration">orchestration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tags/release/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/tags/docs/installation">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/docs/user-manuals/colocation-profile">User Manuals</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/docs/architecture/overview">Architecture</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/koordinator-sh/shared_invite/zt-1756qoub4-Cn4~esfdlfAPsD7cwO2NzA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack ( #koordinator channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/">DingTalk (GroupID: 33383887)</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/koordinator-sh/koordinator" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Copyright ¬© 2024 The Koordinator Authors. All rights reserved.</strong></div></div></div></footer></div>
<script src="/assets/js/runtime~main.75f70c36.js"></script>
<script src="/assets/js/main.07456b1b.js"></script>
</body>
</html>